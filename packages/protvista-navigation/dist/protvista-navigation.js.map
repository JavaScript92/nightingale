{"version":3,"file":"protvista-navigation.js","sources":["../src/protvista-navigation.js","../src/index.js"],"sourcesContent":["import * as d3 from \"d3\";\n\nconst height = 40,\n  width = 700,\n  padding = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 10\n  };\n\nclass ProtVistaNavigation extends HTMLElement {\n\n  constructor() {\n    super();\n    this._length = parseInt(this.getAttribute('length'));\n    this._start = parseInt(this.getAttribute('start')) || 1;\n    this._end = parseInt(this.getAttribute('end')) || this._length;\n    this._highlightStart = parseInt(this.getAttribute('highlightStart'));\n    this._highlightEnd = parseInt(this.getAttribute('highlightEnd'));\n  }\n\n  connectedCallback() {\n    this._createNavRuler();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    //TODO Listen to changes and update\n  }\n\n  _updateLabels(startLabel, endLabel) {\n    startLabel.text(this._start);\n    endLabel.text(this._end);\n  }\n\n  _createNavRuler() {\n    const x = d3.scaleLinear().range([padding.left, width - padding.right]);\n    x.domain([1, (this._length + 1)]);\n\n    const svg = d3.select(this)\n      .append('div')\n      .attr('class', '')\n      .append('svg')\n      .attr('id', '')\n      .attr('width', width)\n      .attr('height', (height));\n\n    const xAxis = d3.axisBottom(x);\n\n    const startLabel = svg.append(\"text\")\n                        .attr('class', 'start-label')\n                        .attr('x', 0)\n                        .attr('y', height - padding.bottom);\n\n    const endLabel = svg.append(\"text\")\n                      .attr('class', 'end-label')\n                      .attr('x', width)\n                      .attr('y', height - padding.bottom)\n                      .attr('text-anchor', 'end');\n    svg.append('g')\n      .attr('class', 'x axis')\n      .call(xAxis);\n\n    const viewport = d3.brushX().extent([\n        [padding.left, 0],\n        [(width - padding.right), height]\n      ])\n      .on(\"brush\", () => {\n        this._start = d3.format(\"d\")(x.invert(d3.event.selection[0]));\n        this._end = d3.format(\"d\")(x.invert(d3.event.selection[1]));\n        this.dispatchEvent(new CustomEvent(\"protvista-zoom\", {\n          detail: {\n            start: this._start,\n            end: this._end\n          }\n        }));\n        this.dispatchEvent(new CustomEvent(\"change\", {\n          detail: {\n            value: this._start,\n            type: 'start'\n          }\n        }));\n        this.dispatchEvent(new CustomEvent(\"change\", {\n          detail: {\n            value: this._end,\n            type: 'end'\n          },\n        }));\n        this._updateLabels(startLabel, endLabel);\n      });\n\n    svg.append(\"g\")\n      .attr(\"class\", \"brush\")\n      .call(viewport)\n      .call(viewport.move, [x(this._start), x(this._end)]);\n  }\n}\n\nexport default ProtVistaNavigation;\n","import ProtVistaNavigation from './protvista-navigation';\n\nif (window.customElements) {\n  customElements.define('protvista-navigation', ProtVistaNavigation);\n}\n\nexport default ProtVistaNavigation;\n"],"names":["height","width","padding","ProtVistaNavigation","HTMLElement","_length","parseInt","getAttribute","_start","_end","_highlightStart","_highlightEnd","_createNavRuler","name","oldValue","newValue","startLabel","endLabel","text","x","d3","range","left","right","domain","svg","append","attr","xAxis","bottom","call","viewport","extent","on","invert","selection","dispatchEvent","CustomEvent","_updateLabels","move","window","customElements","define"],"mappings":"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"}