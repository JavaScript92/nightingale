{"version":3,"file":"index.js","sources":["../../../node_modules/style-inject/dist/style-inject.es.js","../src/protvista-tooltip.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import '../style/protvista-tooltip.css';\n\nclass ProtvistaTooltip extends HTMLElement {\n    constructor() {\n        super();\n        this._top = parseInt(this.getAttribute(\"top\"));\n        this._left = parseInt(this.getAttribute(\"left\"));\n        this._content = this.getAttribute(\"content\");\n        this._title = this.getAttribute(\"title\");\n        this._mirror = undefined;\n    }\n    \n    set top(top) {\n        this._top = top;\n    }\n\n    get top() {\n        return this._top;\n    }\n\n    set left(left) {\n        this._left = left;\n    }\n\n    get left() {\n        return this._left;\n    }\n\n    set content(content) {\n        this._content = content;\n    }\n\n    get content() {\n        return this._content;\n    }\n\n    set title(title) {\n        this._title = title;\n    }\n\n    get title() {\n        return this._title;\n    }\n\n    set closeable(isCloseable) {\n        if(isCloseable) {\n            this.setAttribute('closeable', '');\n        } else {\n            this.removeAttribute('closeable');\n        }\n    }\n\n    get closeable() {\n        return this.hasAttribute('closeable');\n    }\n\n    get mirror() {\n        return this._mirror;\n    }\n\n    set mirror(orientation) {\n        this.setAttribute('mirror', orientation);\n    }\n\n    static get observedAttributes() {\n        return ['top', 'left', 'mirror'];\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if(oldValue != newValue) {\n            if(name === 'top' || name === 'left' ) {\n                this[`_${name}`] = this.getAttribute(name);\n                this._updatePosition();\n            } else {\n                this.render();\n            }\n        }\n    }\n\n    connectedCallback() {\n        this.render();\n        document.getElementsByTagName('body')[0].addEventListener('click', e => {\n            // TODO if another tooltip-trigger than the one for that feature is selected, remove the other tooltip(s)\n            if((this.hasTooltipParent(e.target) && !e.target.classList.contains('tooltip-close'))\n                || e.target.getAttribute('tooltip-trigger') !== null) {\n                return;\n            }\n            this.remove();\n        });\n    }\n\n    hasTooltipParent(el) {\n        if(!el.parentElement || el.parentElement.tagName === 'body') {\n            return false;\n        } else if(el.parentElement.tagName === 'PROTVISTA-TOOLTIP')\n            return true;\n        else {\n            return this.hasTooltipParent(el.parentElement);\n        }\n    }\n\n    _updatePosition() {\n        this.style.top = `${this._top}px`;\n        this.style.left = `${this._left}px`;\n    }\n\n    render() {\n        this._updatePosition();\n\n        if ('undefined' !== typeof this.mirror) {\n            this.mirror = this.mirror;\n        }\n\n        let html = `<div class=\"tooltip-header\">`;\n        if(this.closeable) {\n            html = `${html}<span class=\"tooltip-close\"></span>`\n        }\n        html = `${html}<span class=\"tooltip-header-title\">${this._title}</span></div>\n        <div class=\"tooltip-body\">${this._content}</div>`;\n        this.innerHTML = html;\n    }\n\n}\n\nexport default ProtvistaTooltip;\n","import ProtvistaTooltip from './protvista-tooltip'\n\nconst loadComponent = function () {\n    customElements.define('protvista-tooltip', ProtvistaTooltip);\n}\n\n// Conditional loading of polyfill\nif (window.customElements) {\n    loadComponent();\n} else {\n    document\n        .addEventListener('WebComponentsReady', function () {\n            loadComponent();\n        });\n}"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","ProtvistaTooltip","HTMLElement","constructor","_top","parseInt","getAttribute","_left","_content","_title","_mirror","undefined","top","left","content","title","closeable","isCloseable","setAttribute","removeAttribute","hasAttribute","mirror","orientation","observedAttributes","attributeChangedCallback","name","oldValue","newValue","_updatePosition","render","connectedCallback","addEventListener","e","hasTooltipParent","target","classList","contains","remove","el","parentElement","tagName","html","innerHTML","loadComponent","customElements","define","window"],"mappings":"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"}