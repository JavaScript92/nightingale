{"version":3,"file":"index.js","sources":["../../../node_modules/style-inject/dist/style-inject.es.js","../src/protvista-tooltip.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import '../style/protvista-tooltip.css';\r\n\r\nclass ProtvistaTooltip extends HTMLElement {\r\n    constructor() {\r\n        super();\r\n        this._top = parseInt(this.getAttribute(\"top\"));\r\n        this._left = parseInt(this.getAttribute(\"left\"));\r\n        this._content = this.getAttribute(\"content\");\r\n        this._title = this.getAttribute(\"title\");\r\n        this._mirror = undefined;\r\n    }\r\n    \r\n    set top(top) {\r\n        this._top = top;\r\n    }\r\n\r\n    get top() {\r\n        return this._top;\r\n    }\r\n\r\n    set left(left) {\r\n        this._left = left;\r\n    }\r\n\r\n    get left() {\r\n        return this._left;\r\n    }\r\n\r\n    set content(content) {\r\n        this._content = content;\r\n    }\r\n\r\n    get content() {\r\n        return this._content;\r\n    }\r\n\r\n    set title(title) {\r\n        this._title = title;\r\n    }\r\n\r\n    get title() {\r\n        return this._title;\r\n    }\r\n\r\n    set closeable(isCloseable) {\r\n        if(isCloseable) {\r\n            this.setAttribute('closeable', '');\r\n        } else {\r\n            this.removeAttribute('closeable');\r\n        }\r\n    }\r\n\r\n    get closeable() {\r\n        return this.hasAttribute('closeable');\r\n    }\r\n\r\n    get mirror() {\r\n        return this._mirror;\r\n    }\r\n\r\n    set mirror(orientation) {\r\n        this.setAttribute('mirror', orientation);\r\n    }\r\n\r\n    static get observedAttributes() {\r\n        return ['top', 'left', 'mirror'];\r\n    }\r\n\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        if(oldValue != newValue) {\r\n            if(name === 'top' || name === 'left' ) {\r\n                this[`_${name}`] = this.getAttribute(name);\r\n                this._updatePosition();\r\n            } else {\r\n                this.render();\r\n            }\r\n        }\r\n    }\r\n\r\n    connectedCallback() {\r\n        this.render();\r\n        document.getElementsByTagName('body')[0].addEventListener('click', e => {\r\n            // TODO if another tooltip-trigger than the one for that feature is selected, remove the other tooltip(s)\r\n            if((this.hasTooltipParent(e.target) && !e.target.classList.contains('tooltip-close'))\r\n                || e.target.getAttribute('tooltip-trigger') !== null) {\r\n                return;\r\n            }\r\n            this.remove();\r\n        });\r\n    }\r\n\r\n    hasTooltipParent(el) {\r\n        if(!el.parentElement || el.parentElement.tagName === 'body') {\r\n            return false;\r\n        } else if(el.parentElement.tagName === 'PROTVISTA-TOOLTIP')\r\n            return true;\r\n        else {\r\n            return this.hasTooltipParent(el.parentElement);\r\n        }\r\n    }\r\n\r\n    _updatePosition() {\r\n        this.style.top = `${this._top}px`;\r\n        this.style.left = `${this._left}px`;\r\n    }\r\n\r\n    render() {\r\n        this._updatePosition();\r\n\r\n        if ('undefined' !== typeof this.mirror) {\r\n            this.mirror = this.mirror;\r\n        }\r\n\r\n        let html = `<div class=\"tooltip-header\">`;\r\n        if(this.closeable) {\r\n            html = `${html}<span class=\"tooltip-close\"></span>`\r\n        }\r\n        html = `${html}<span class=\"tooltip-header-title\">${this._title}</span></div>\r\n        <div class=\"tooltip-body\">${this._content}</div>`;\r\n        this.innerHTML = html;\r\n    }\r\n\r\n}\r\n\r\nexport default ProtvistaTooltip;\r\n","import ProtvistaTooltip from './protvista-tooltip'\r\n\r\nconst loadComponent = function () {\r\n    customElements.define('protvista-tooltip', ProtvistaTooltip);\r\n}\r\n\r\n// Conditional loading of polyfill\r\nif (window.customElements) {\r\n    loadComponent();\r\n} else {\r\n    document\r\n        .addEventListener('WebComponentsReady', function () {\r\n            loadComponent();\r\n        });\r\n}"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","ProtvistaTooltip","HTMLElement","constructor","_top","parseInt","getAttribute","_left","_content","_title","_mirror","undefined","top","left","content","title","closeable","isCloseable","setAttribute","removeAttribute","hasAttribute","mirror","orientation","observedAttributes","attributeChangedCallback","name","oldValue","newValue","_updatePosition","render","connectedCallback","addEventListener","e","hasTooltipParent","target","classList","contains","remove","el","parentElement","tagName","html","innerHTML","loadComponent","customElements","define","window"],"mappings":"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"}