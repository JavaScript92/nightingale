(window.webpackJsonp=window.webpackJsonp||[]).push([[5,4],{161:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(636),a=n(596),s=n(593),c=n(575),u=n(628),l=n(627),h=n(642),f=n(637),p=n(647),d=n(629),y=n(651),g=n(109),v=n(648),m=n(674),b=[{accession:"IPR00001",locations:[{fragments:[{start:1,end:466}]}],color:"#cacaca"}],_=[{accession:"SF00001",locations:[{fragments:[{start:127,end:264},{start:279,end:385},{start:400,end:466}]}],color:"#7acaca"},{accession:"PF00001",locations:[{fragments:[{start:146,end:266}]},{fragments:[{start:346,end:466}]}],color:"#ca7aca"},{accession:"CD0001",locations:[{fragments:[{start:146,end:456}]}],color:"#caca7a"}],w=[{accession:"cd00108",locations:[{fragments:[{start:127,end:203}]}],color:"#cacaca",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]},{accession:"cd00108",locations:[{fragments:[{start:204,end:285}]}],color:"#c00aca",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]},{accession:"cd00108",source_database:"cdd",locations:[{fragments:[{start:298,end:380}]}],color:"#caca0a",entry_type:"domain",type:"entry",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]},{accession:"cd00108",source_database:"cdd",locations:[{fragments:[{start:384,end:466}]}],color:"#0acaca",entry_type:"domain",type:"entry",residues:[{accession:"KR",entry_accession:"cd00108",source_database:"CDD",locations:[{fragments:[{start:153,end:153,residues:"W"},{start:163,end:163,residues:"Y"},{start:184,end:184,residues:"W"},{start:186,end:186,residues:"F"},{start:194,end:194,residues:"Y"},{start:231,end:231,residus:"W"},{start:241,end:241,residues:"F"},{start:266,end:266,residues:"W"},{start:268,end:268,residues:"Y"},{start:276,end:276,residues:"W"},{start:325,end:325,residues:"W"},{start:335,end:335,residues:"V"},{start:360,end:360,residues:"W"},{start:362,end:362,residues:"F"},{start:370,end:370,residues:"V"},{start:411,end:411,residues:"W"},{start:421,end:421,residues:"H"},{start:447,end:447,residues:"W"},{start:449,end:449,residues:"Y"},{start:457,end:457,residues:"W"}],description:"ligand binding site"},{fragments:[{start:138,end:138,residues:"K"},{start:216,end:216,residues:"R"},{start:310,end:310,residues:"R"},{start:396,end:396,residues:"M"}],description:"putative domain interaction site"}]}]}],O=n(649),S=n(675),E=new WeakMap,j=function(t){return"function"==typeof t&&E.has(t)},x=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,k=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e;r!==n;){var i=r.nextSibling;t.removeChild(r),r=i}},A={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var P="{{lit-".concat(String(Math.random()).slice(2),"}}"),C="\x3c!--".concat(P,"--\x3e"),T=new RegExp("".concat(P,"|").concat(C)),L=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parts=[],this.element=n;var i=-1,o=0,a=[];!function t(n){for(var s,c,u=n.content,l=document.createTreeWalker(u,133,null,!1);l.nextNode();){i++,s=c;var h=c=l.currentNode;if(1===h.nodeType){if(h.hasAttributes()){for(var f=h.attributes,p=0,d=0;d<f.length;d++)f[d].value.indexOf(P)>=0&&p++;for(;p-- >0;){var y=e.strings[o],g=F.exec(y)[2],v=g.toLowerCase()+"$lit$",m=h.getAttribute(v).split(T);r.parts.push({type:"attribute",index:i,name:g,strings:m}),h.removeAttribute(v),o+=m.length-1}}"TEMPLATE"===h.tagName&&t(h)}else if(3===h.nodeType){var b=h.nodeValue;if(b.indexOf(P)<0)continue;var _=h.parentNode,w=b.split(T),O=w.length-1;o+=O;for(var S=0;S<O;S++)_.insertBefore(""===w[S]?N():document.createTextNode(w[S]),h),r.parts.push({type:"node",index:i++});_.insertBefore(""===w[O]?N():document.createTextNode(w[O]),h),a.push(h)}else if(8===h.nodeType)if(h.nodeValue===P){var E=h.parentNode,j=h.previousSibling;null===j||j!==s||j.nodeType!==Node.TEXT_NODE?E.insertBefore(N(),h):i--,r.parts.push({type:"node",index:i++}),a.push(h),null===h.nextSibling?E.insertBefore(N(),h):i--,c=s,o++}else for(var x=-1;-1!==(x=h.nodeValue.indexOf(P,x+1));)r.parts.push({type:"node",index:-1})}}(n);for(var s=0,c=a;s<c.length;s++){var u=c[s];u.parentNode.removeChild(u)}},R=function(t){return-1!==t.index},N=function(){return document.createComment("")},F=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=\/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function M(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var H=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._parts=[],this.template=e,this.processor=n,this.options=r}var e,n,r;return e=t,(n=[{key:"update",value:function(t){var e=0,n=!0,r=!1,i=void 0;try{for(var o,a=this._parts[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;void 0!==s&&s.setValue(t[e]),e++}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var c=!0,u=!1,l=void 0;try{for(var h,f=this._parts[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value;void 0!==p&&p.commit()}}catch(t){u=!0,l=t}finally{try{c||null==f.return||f.return()}finally{if(u)throw l}}}},{key:"_clone",value:function(){var t=this,e=x?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=this.template.parts,r=0,i=0;return function e(o){for(var a=document.createTreeWalker(o,133,null,!1),s=a.nextNode();r<n.length&&null!==s;){var c=n[r];if(R(c))if(i===c.index){if("node"===c.type){var u=t.processor.handleTextExpression(t.options);u.insertAfterNode(s),t._parts.push(u)}else{var l;(l=t._parts).push.apply(l,M(t.processor.handleAttributeExpressions(s,c.name,c.strings,t.options)))}r++}else i++,"TEMPLATE"===s.nodeName&&e(s.content),s=a.nextNode();else t._parts.push(void 0),r++}}(e),x&&(document.adoptNode(e),customElements.upgrade(e)),e}}])&&D(e.prototype,n),r&&D(e,r),t}();function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var W=function(){function t(e,n,r,i){V(this,t),this.strings=e,this.values=n,this.type=r,this.processor=i}return q(t,[{key:"getHTML",value:function(){for(var t=this.strings.length-1,e="",n=0;n<t;n++){var r=this.strings[n],i=!1;e+=r.replace(F,function(t,e,n,r){return i=!0,e+n+"$lit$"+r+P}),i||(e+=C)}return e+this.strings[t]}},{key:"getTemplateElement",value:function(){var t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}]),t}();function U(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t,e,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */var $=function(t){return null===t||!("object"===Z(t)||"function"==typeof t)},J=function(){function t(e,n,r){B(this,t),this.dirty=!0,this.element=e,this.name=n,this.strings=r,this.parts=[];for(var i=0;i<r.length-1;i++)this.parts[i]=this._createPart()}return X(t,[{key:"_createPart",value:function(){return new tt(this)}},{key:"_getValue",value:function(){for(var t=this.strings,e=t.length-1,n="",r=0;r<e;r++){n+=t[r];var i=this.parts[r];if(void 0!==i){var o=i.value;if(null!=o&&(Array.isArray(o)||"string"!=typeof o&&o[Symbol.iterator])){var a=!0,s=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var h=u.value;n+="string"==typeof h?h:String(h)}}catch(t){s=!0,c=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw c}}}else n+="string"==typeof o?o:String(o)}}return n+=t[e]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),t}(),tt=function(){function t(e){B(this,t),this.value=void 0,this.committer=e}return X(t,[{key:"setValue",value:function(t){t===A||$(t)&&t===this.value||(this.value=t,j(t)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;j(this.value);){var t=this.value;this.value=A,t(this)}this.value!==A&&this.committer.commit()}}]),t}(),et=function(){function t(e){B(this,t),this.value=void 0,this._pendingValue=void 0,this.options=e}return X(t,[{key:"appendInto",value:function(t){this.startNode=t.appendChild(N()),this.endNode=t.appendChild(N())}},{key:"insertAfterNode",value:function(t){this.startNode=t,this.endNode=t.nextSibling}},{key:"appendIntoPart",value:function(t){t._insert(this.startNode=N()),t._insert(this.endNode=N())}},{key:"insertAfterPart",value:function(t){t._insert(this.startNode=N()),this.endNode=t.endNode,t.endNode=this.startNode}},{key:"setValue",value:function(t){this._pendingValue=t}},{key:"commit",value:function(){for(;j(this._pendingValue);){var t=this._pendingValue;this._pendingValue=A,t(this)}var e=this._pendingValue;e!==A&&($(e)?e!==this.value&&this._commitText(e):e instanceof W?this._commitTemplateResult(e):e instanceof Node?this._commitNode(e):Array.isArray(e)||e[Symbol.iterator]?this._commitIterable(e):this._commitText(e))}},{key:"_insert",value:function(t){this.endNode.parentNode.insertBefore(t,this.endNode)}},{key:"_commitNode",value:function(t){this.value!==t&&(this.clear(),this._insert(t),this.value=t)}},{key:"_commitText",value:function(t){var e=this.startNode.nextSibling;t=null==t?"":t,e===this.endNode.previousSibling&&e.nodeType===Node.TEXT_NODE?e.textContent=t:this._commitNode(document.createTextNode("string"==typeof t?t:String(t))),this.value=t}},{key:"_commitTemplateResult",value:function(t){var e=this.options.templateFactory(t);if(this.value&&this.value.template===e)this.value.update(t.values);else{var n=new H(e,t.processor,this.options),r=n._clone();n.update(t.values),this._commitNode(r),this.value=n}}},{key:"_commitIterable",value:function(e){Array.isArray(this.value)||(this.value=[],this.clear());var n,r=this.value,i=0,o=!0,a=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;void 0===(n=r[i])&&(n=new t(this.options),r.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(r[i-1])),n.setValue(l),n.commit(),i++}}catch(t){a=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i<r.length&&(r.length=i,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;k(this.startNode.parentNode,t.nextSibling,this.endNode)}}]),t}(),nt=function(){function t(e,n,r){if(B(this,t),this.value=void 0,this._pendingValue=void 0,2!==r.length||""!==r[0]||""!==r[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=n,this.strings=r}return X(t,[{key:"setValue",value:function(t){this._pendingValue=t}},{key:"commit",value:function(){for(;j(this._pendingValue);){var t=this._pendingValue;this._pendingValue=A,t(this)}if(this._pendingValue!==A){var e=!!this._pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)),this.value=e,this._pendingValue=A}}}]),t}(),rt=function(t){function e(t,n,r){var i;return B(this,e),(i=U(this,K(e).call(this,t,n,r))).single=2===r.length&&""===r[0]&&""===r[1],i}return Y(e,J),X(e,[{key:"_createPart",value:function(){return new it(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:G(K(e.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),e}(),it=function(t){function e(){return B(this,e),U(this,K(e).apply(this,arguments))}return Y(e,tt),e}(),ot=!1;try{var at={get capture(){return ot=!0,!1}};window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch(t){}var st=function(){function t(e,n,r){var i=this;B(this,t),this.value=void 0,this._pendingValue=void 0,this.element=e,this.eventName=n,this.eventContext=r,this._boundHandleEvent=function(t){return i.handleEvent(t)}}return X(t,[{key:"setValue",value:function(t){this._pendingValue=t}},{key:"commit",value:function(){for(;j(this._pendingValue);){var t=this._pendingValue;this._pendingValue=A,t(this)}if(this._pendingValue!==A){var e=this._pendingValue,n=this.value,r=null==e||null!=n&&(e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive),i=null!=e&&(null==n||r);r&&this.element.removeEventListener(this.eventName,this._boundHandleEvent,this._options),i&&(this._options=ct(e),this.element.addEventListener(this.eventName,this._boundHandleEvent,this._options)),this.value=e,this._pendingValue=A}}},{key:"handleEvent",value:function(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}]),t}(),ct=function(t){return t&&(ot?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)};function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var lt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"handleAttributeExpressions",value:function(t,e,n,r){var i=e[0];return"."===i?new rt(t,e.slice(1),n).parts:"@"===i?[new st(t,e.slice(1),r.eventContext)]:"?"===i?[new nt(t,e.slice(1),n)]:new J(t,e,n).parts}},{key:"handleTextExpression",value:function(t){return new et(t)}}])&&ut(e.prototype,n),r&&ut(e,r),t}());
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
function ht(t){var e=ft.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},ft.set(t.type,e));var n=e.stringsArray.get(t.strings);if(void 0!==n)return n;var r=t.strings.join(P);return void 0===(n=e.keyString.get(r))&&(n=new L(t,t.getTemplateElement()),e.keyString.set(r,n)),e.stringsArray.set(t.strings,n),n}var ft=new Map,pt=new WeakMap,dt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new W(t,n,"html",lt)};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(){var t=mt(['\n        <button\n          style="background-color: #1878ba; color: white; cursor: pointer; display: inline-block;padding: 0.5rem 0.5rem; border-radius: 4px; margin-bottom: 5px;"\n          @click=',"\n        >\n          Download\n        </button>\n      "]);return gt=function(){return t},t}function vt(){var t=mt(["\n          ","\n        "]);return vt=function(){return t},t}function mt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e){return!e||"object"!==yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){var e="function"==typeof Map?new Map:void 0;return(wt=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Ot(t,arguments,Et(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),St(r,t)})(t)}function Ot(t,e,n){return(Ot=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&St(i,n.prototype),i}).apply(null,arguments)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_t(this,Et(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,wt(HTMLElement)),n=e,(r=[{key:"connectedCallback",value:function(){this.elementId=this.getAttribute("element-id"),this.fillColor=this.getAttribute("background-color"),this.fileName=this.getAttribute("file-name")||"protvista",this.fileFormat=["png","jpeg","bmp","tiff","gif"].includes(this.getAttribute("file-format"))?this.getAttribute("file-format"):"png",this.renderContent()}},{key:"saveSvg",value:function(){var t=this.parentElement,e=t.elementId,n=document.querySelector("#".concat(e));n.style.display="block","function"==typeof t.preSave&&t.preSave();var r=document.createElement("canvas"),i=window.getComputedStyle(n).getPropertyValue("width"),o=window.getComputedStyle(n).getPropertyValue("height");if(r.setAttribute("width",i),r.setAttribute("height",o),t.fillColor){var a=r.getContext("2d");a.fillStyle=t.fillColor,a.fillRect(0,0,Number(i),Number(o))}S.drawHTML(document.getElementById(e).innerHTML,r).then(function(){var e=r.toDataURL("image/".concat(t.fileFormat),1).replace("image/".concat(t.fileFormat),"image/octet-stream"),n=document.createElement("a");n.download="".concat(t.fileName,".").concat(t.fileFormat),n.href=e,document.body.appendChild(n),n.click()}).catch(function(t){console.log(t)}).finally(function(){n.style.display="","function"==typeof t.postSave&&t.postSave()})}},{key:"renderContent",value:function(){var t,e,n,r,i;if(this.hasChildNodes()){var o=this.firstElementChild;"BUTTON"===o.tagName?(o.addEventListener("click",this.saveSvg),t=dt(vt(),o)):console.error("Only Buttons are accepted as children")}else t=dt(gt(),this.saveSvg);e=t,n=this,void 0===(i=pt.get(n))&&(k(n,n.firstChild),pt.set(n,i=new et(Object.assign({templateFactory:ht},r))),i.appendInto(n)),i.setValue(e),i.commit()}},{key:"backgroundColor",set:function(t){this.fillColor=t}}])&&bt(n.prototype,r),i&&bt(n,i),e}();function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function At(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),At(this,Pt(e).apply(this,arguments))}var n,S,E;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,r["Component"]),n=e,(S=[{key:"componentDidMount",value:function(){document.querySelector("#variation-track").data=v,document.querySelector("#interpro-track-residues").data=w,document.querySelector("#interpro-track").data=b,document.querySelector("#interpro-track").contributors=_,document.querySelector("#sequence-track").data=m,document.querySelector("#sequence-track").fixedHighlight="400:600",document.querySelector("#sequence-coloured-track").data=m,document.querySelector("#sequence-coloured-track").fixedHighlight="400:600",document.querySelector("#sequence-coloured-track-iso").data=m,document.querySelector("#sequence-coloured-track-iso").fixedHighlight="400:600",document.querySelector("#track1").fixedHighlight="400:600",document.querySelector("#track2").fixedHighlight="400:600",document.querySelector("#track3").data=O,document.querySelector("#track3").fixedHighlight="400:600",document.querySelector("#interpro-track").fixedHighlight="400:600",document.querySelector("#interpro-track-residues").fixedHighlight="400:600",document.querySelector("#variation-track").fixedHighlight="400:600",document.querySelector("#variation-graph").fixedHighlight="400:600",document.querySelector("#saver").preSave=function(){var t=document.querySelector("#example"),e=document.createElement("h2");e.setAttribute("id","tmp_title_element"),e.innerHTML="ProtVista Snapshot",t.insertBefore(e,t.firstChild)},document.querySelector("#saver").postSave=function(){document.querySelector("#example").removeChild(document.getElementById("tmp_title_element"))},document.querySelector("#saver").backgroundColor="#ffffff",document.querySelector("#saver2").backgroundColor="#ddddee"}},{key:"render",value:function(){return Object(g.a)("protvista-manager",o.a),Object(g.a)("protvista-feature-adapter",s.a),Object(g.a)("protvista-track",c.b),Object(g.a)("protvista-navigation",u.a),Object(g.a)("protvista-sequence",l.a),Object(g.a)("protvista-coloured-sequence",h.a),Object(g.a)("protvista-interpro-track",y.a),Object(g.a)("protvista-variation",f.a),Object(g.a)("protvista-variation-graph",p.a),Object(g.a)("data-loader",a.a),Object(g.a)("protvista-variation-adapter",d.a),Object(g.a)("protvista-saver",jt),i.a.createElement(r.Fragment,null,i.a.createElement("protvista-saver",{"element-id":"example",id:"saver"}),i.a.createElement("protvista-saver",{"element-id":"just-tracks",id:"saver2","file-name":"tracks","file-format":"jpeg"},i.a.createElement("button",null,"Download Just Tracks")),i.a.createElement("protvista-manager",{attributes:"length displaystart displayend variantfilters highlight",displaystart:"53",id:"example"},i.a.createElement("protvista-navigation",{length:"770"}),i.a.createElement("div",{id:"just-tracks"},i.a.createElement("protvista-sequence",{length:"770",id:"sequence-track","highlight-event":"onmouseover"}),i.a.createElement("protvista-coloured-sequence",{length:"770",id:"sequence-coloured-track",scale:"hydrophobicity-interface-scale",height:"10","highlight-event":"onmouseover"}),i.a.createElement("protvista-coloured-sequence",{length:"770",id:"sequence-coloured-track-iso",scale:"isoelectric-point-scale",color_range:"white:0,dodgerblue:11",height:"10"}),i.a.createElement("protvista-track",{id:"track1",length:"770"},i.a.createElement("protvista-feature-adapter",{id:"adapter1"},i.a.createElement("data-loader",null,i.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"})))),i.a.createElement("protvista-track",{id:"track2",length:"770",layout:"non-overlapping"},i.a.createElement("protvista-feature-adapter",{id:"adapter1"},i.a.createElement("data-loader",null,i.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"})))),i.a.createElement("protvista-track",{id:"track3",length:"770",displaystart:"1",displayend:"80",layout:"non-overlapping"}),i.a.createElement("protvista-interpro-track",{id:"interpro-track",length:"770",shape:"roundRectangle","highlight-event":"onmouseover",expanded:!0}),i.a.createElement("protvista-interpro-track",{id:"interpro-track-residues",length:"770",shape:"roundRectangle","highlight-event":"onmouseover",expanded:!0})),i.a.createElement("protvista-variation-graph",{id:"variation-graph",length:"770"},i.a.createElement("protvista-variation-adapter",null,i.a.createElement("data-loader",null,i.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/variation/P05067"})))),i.a.createElement("protvista-variation",{id:"variation-track",length:"770"})))}}])&&kt(n.prototype,S),E&&kt(n,E),e}();e.default=Tt},560:function(t,e,n){"use strict";var r=n(570),i=n(561);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a="[object Symbol]";e.a=function(t){return"symbol"==o(t)||Object(i.a)(t)&&Object(r.a)(t)==a}},566:function(t,e,n){"use strict";var r=n(560),i=1/0;e.a=function(t){if("string"==typeof t||Object(r.a)(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},572:function(t,e,n){"use strict";var r=n(559),i=n(560);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.a=function(t,e){if(Object(r.a)(t))return!1;var n=o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(i.a)(t))||s.test(t)||!a.test(t)||null!=e&&t in Object(e)}},573:function(t,e,n){"use strict";var r=n(567),i=n(562),o=Object(r.a)(i.a,"DataView"),a=n(607),s=Object(r.a)(i.a,"Promise"),c=n(597),u=Object(r.a)(i.a,"WeakMap"),l=n(570),h=n(630),f=Object(h.a)(o),p=Object(h.a)(a.a),d=Object(h.a)(s),y=Object(h.a)(c.a),g=Object(h.a)(u),v=l.a;(o&&"[object DataView]"!=v(new o(new ArrayBuffer(1)))||a.a&&"[object Map]"!=v(new a.a)||s&&"[object Promise]"!=v(s.resolve())||c.a&&"[object Set]"!=v(new c.a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=Object(l.a)(t),n="[object Object]"==e?t.constructor:void 0,r=n?Object(h.a)(n):"";if(r)switch(r){case f:return"[object DataView]";case p:return"[object Map]";case d:return"[object Promise]";case y:return"[object Set]";case g:return"[object WeakMap]"}return e});e.a=v},574:function(t,e,n){"use strict";e.a=function(t){return t}},575:function(t,e,n){"use strict";var r=n(563),i=n(605),o=n(571),a=n(570),s=n(559),c=n(561),u="[object String]";var l=function(t){return"string"==typeof t||!Object(s.a)(t)&&Object(c.a)(t)&&Object(a.a)(t)==u},h=n(565),f=n(560),p=NaN,d=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,v=/^0o[0-7]+$/i,m=parseInt;var b=function(t){if("number"==typeof t)return t;if(Object(f.a)(t))return p;if(Object(h.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(h.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var n=g.test(t);return n||v.test(t)?m(t.slice(2),n?2:8):y.test(t)?p:+t},_=1/0,w=17976931348623157e292;var O=function(t){return t?(t=b(t))===_||t===-_?(t<0?-1:1)*w:t==t?t:0:0===t?t:0};var S=function(t){var e=O(t),n=e%1;return e==e?n?e-n:e:0},E=n(568);var j=function(t,e){return Object(E.a)(e,function(e){return t[e]})},x=n(564);var k=function(t){return null==t?[]:j(t,Object(x.a)(t))},A=Math.max;var P=function(t,e,n,r){t=Object(o.a)(t)?t:k(t),n=n&&!r?S(n):0;var a=t.length;return n<0&&(n=A(a+n,0)),l(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Object(i.a)(t,e,n)>-1},C=n(579);function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"isContinuous",value:function(t){return"bridge"!==(t=t.toLowerCase())}}],(n=[{key:"getFeatureShape",value:function(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 "+-6+",6h"+(12-this._ftWidth)+"a6,6 0 0 1 "+-6+","+-6+"v"+(12-this._ftHeight)+"a6,6 0 0 1 6,"+-6+"Z"}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}},{key:"_helix",value:function(){for(var t=2.5,e=2.5,n=Math.round(this._ftWidth/5),r="",i=0;i<n;i++){r+="M"+(-2.5+e)+","+this._ftHeight+" C"+(e+t)+",7.5 "+(2.5+e)+","+t+" "+e+", 0 C"+(e-t)+","+t+" "+e+",7.5 "+(2.5+e)+","+this._ftHeight,e+=5}return r}},{key:"_strand",value:function(){var t=0;this._ftWidth>5&&(t=this._ftWidth-5);var e=this._ftHeight/4;return"M0,"+e+"L"+t+","+e+"L"+t+","+3*e+"L0,"+3*e+"L0,"+e+("M"+t+",0L"+this._ftWidth+","+2*e+"L"+t+","+this._ftHeight+"Z")}}])&&T(e.prototype,n),r&&T(e,r),t}();function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var N=function(){function t(e){var n=e.layoutHeight,r=e.padding,i=void 0===r?1:r,o=e.minHeight,a=void 0===o?17:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=i,this._minHeight=a,this._layoutHeight=n}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(){return Math.min(this._layoutHeight,this._minHeight)+this._padding}},{key:"getFeatureHeight",value:function(){return Math.min(this._layoutHeight,this._minHeight)-this._padding}}])&&R(e.prototype,n),r&&R(e,r),t}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t,e){return e.some(function(e){return n=t,r=e,!(Number(r.start)>Number(n.end)||Number(r.end)<Number(n.start));var n,r})},q=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=D(this,H(e).call(this,t))).featuresMap=new Map,n._rowHeight=0,n._rows=[],n._minHeight=15,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(e,N),n=e,(r=[{key:"init",value:function(t){var e=this;t.forEach(function(t){var n=e._rows.findIndex(function(e){return!I(t,e)});n>=0?(e._rows[n].push(t),e.featuresMap.set(t,n)):(e._rows.push([t]),e.featuresMap.set(t,e._rows.length-1))}),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)}},{key:"getOffset",value:function(){return this._rows.length*this._rowHeight<this._layoutHeight?this._layoutHeight/2-this._rows.length*this._rowHeight/2:0}},{key:"getFeatureYPos",value:function(t){var e=this.featuresMap.get(t);return this.getOffset()+this._rowHeight*e+2*this._padding}},{key:"getFeatureHeight",value:function(){return this._rowHeight-2*this._padding}}])&&M(n.prototype,r),i&&M(n,i),e}(),W={CHAIN:{name:"chain",label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},TRANSIT:{name:"transit peptide",label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},INIT_MET:{name:"initiator methionine",label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},PROPEP:{name:"propeptide",label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},PEPTIDE:{name:"peptide",label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},SIGNAL:{name:"signal peptide",label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},HELIX:{name:"helix",label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},STRAND:{name:"strand",label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},TURN:{name:"turn",label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},DISULFID:{name:"disulfide bond",label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},CROSSLNK:{name:"cross-link",label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},REGION:{name:"region of interest",label:"Region of interest",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},COILED:{name:"coiled-coil region",label:"Coiled-coil region",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},MOTIF:{name:"short sequence motif",label:"Short sequence motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},REPEAT:{name:"repeat",label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},CA_BIND:{name:"calcium-binding region",label:"Calcium-binding region",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},DNA_BIND:{name:"DNA-binding region",label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},DOMAIN:{name:"other domain of interest",label:"Other domain of interest",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},ZN_FING:{name:"zinc finger region",label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},NP_BIND:{name:"nucleotide-binding region",label:"Nucleotide-binding region",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},METAL:{name:"metal ion-binding site",label:"Metal ion-binding site",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},SITE:{name:"other site of interest",label:"Other site of interest",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},BINDING:{name:"other binding site",label:"Other binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},ACT_SITE:{name:"active site",label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},MOD_RES:{name:"Post-translationally modified residue",label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},LIPID:{name:"lipid moiety-binding region",label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},CARBOHYD:{name:"glycosylation site",label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},COMPBIAS:{name:"compositionally biased region",label:"Compositionally biased region",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},CONFLICT:{name:"sequence conflict",label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},NON_CONS:{name:"non-consecutive residues",label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},NON_TER:{name:"non-terminal residue",label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},UNSURE:{name:"unsure residue",label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},NON_STD:{name:"non-standard amino acid",label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},MUTAGEN:{name:"mutagenesis site",label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},TOPO_DOM:{name:"topological domain",label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},TRANSMEM:{name:"transmembrane region",label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},INTRAMEM:{name:"intramembrane region",label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},VAR_SEQ:{name:"splice variant",label:"Splice variant",tooltip:"",shape:"rectangle",color:"#CC11CC"},VARIANT:{name:"sequence variant",label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},UNIQUE:{name:"unique",label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},NON_UNIQUE:{name:"non-unique",label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},ANTIGEN:{name:"antigen",label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},PDBE_COVER:{name:"pdbe coverage",label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}},U=function(t){if(W[t.toUpperCase()])return W[t.toUpperCase()].shape;var e=Object.values(W).find(function(e){return e.name.toUpperCase()===t.toUpperCase()});return e?e.shape:"rectangle"},G=function(t){if(W[t.toUpperCase()])return W[t.toUpperCase()].color;var e=Object.values(W).find(function(e){return e.name.toUpperCase()===t.toUpperCase()});return e||console.log(t),e?e.color:"black"};function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t,e,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Q(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return N});var Z=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),z(this,Q(e).apply(this,arguments))}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(e,C["a"]),n=e,o=[{key:"normalizeLocations",value:function(t){return t.map(function(t){var e=t.locations,n=t.start,r=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})})}},{key:"observedAttributes",get:function(){return C.a.observedAttributes.concat(["highlight","color","shape"])}}],(i=[{key:"getLayout",value:function(){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new q({layoutHeight:this._height}):new N({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;B(Q(e.prototype),"connectedCallback",this).call(this),this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new L,this._layoutObj=this.getLayout(),this._data&&this._createTrack(),this.addEventListener("load",function(e){P(t.children,e.target)&&(t.data=e.detail.payload)})}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:t.feature&&t.feature.color?t.feature.color:this._color?this._color:t.type?G(t.type):t.feature&&t.feature.type?G(t.feature.type):"black"}},{key:"_getFeatureFillColor",value:function(t){return t.fill?t.fill:t.feature&&t.feature.fill?t.feature.fill:this._getFeatureColor(t)}},{key:"_getShape",value:function(t){return t.shape?t.shape:t.feature&&t.feature.shape?t.feature.shape:this._shape?this._shape:t.type?U(t.type):t.feature&&t.feature.type?U(t.feature.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(r.l)(this).selectAll("svg").remove(),this.svg=Object(r.l)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this.seq_g=this.svg.append("g").attr("class","sequence-features"),this._createFeatures()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.attr("clip-path","url(#trackClip)").selectAll("g.feature-group").data(this._data),this._clipPath=this.svg.append("clipPath").attr("id","trackClip").append("rect").attr("width",this.getWidthWithMargins()).attr("height",this._height),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",function(t){return"g_".concat(t.accession)}).selectAll("g.location-group").data(function(t){return t.locations.map(function(e){return Object.assign({},e,{feature:t})})}).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data(function(t){return t.fragments.map(function(e){return Object.assign({},e,{feature:t.feature})})}).enter().append("path").attr("class",function(e){return"".concat(t._getShape(e)," feature")}).attr("d",function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))}).attr("transform",function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")}).attr("fill",function(e){return t._getFeatureFillColor(e)}).attr("stroke",function(e){return t._getFeatureColor(e)}).style("fill-opacity",.9).call(this.bindEvents,this)}},{key:"refresh",value:function(){var t=this;this.xScale&&this.seq_g&&(this.features=this.seq_g.selectAll("path.feature").data(this._data.reduce(function(t,e){return t.concat(e.locations.reduce(function(t,n){return t.concat(n.fragments.map(function(t){return Object.assign({},t,{feature:e})}))},[]))},[])),this.features.attr("d",function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e))}).attr("transform",function(e){return"translate(".concat(t.getXFromSeqPosition(e.start),",").concat(t._layoutObj.getFeatureYPos(e.feature),")")}),this._updateHighlight(),this._clipPath.attr("width",this.getWidthWithMargins()))}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}},{key:"data",set:function(t){this._data=e.normalizeLocations(t),this._createTrack()}}])&&Y(n.prototype,i),o&&Y(n,o),e}();e.b=Z},576:function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},577:function(t,e,n){"use strict";var r=n(578);e.a=function(t,e,n){var i=null==t?void 0:Object(r.a)(t,e);return void 0===i?n:i}},578:function(t,e,n){"use strict";var r=n(581),i=n(566);e.a=function(t,e){for(var n=0,o=(e=Object(r.a)(e,t)).length;null!=t&&n<o;)t=t[Object(i.a)(e[n++])];return n&&n==o?t:void 0}},579:function(t,e,n){"use strict";var r=n(563),i=n(582),o=n(620);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function h(t,e,n){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=p(e).call(this),t=!r||"object"!==a(r)&&"function"!=typeof r?u(n):r,e._polyfillElementClosest(),t._updateScaleDomain=t._updateScaleDomain.bind(u(t)),t._initZoom=t._initZoom.bind(u(t)),t.zoomed=t.zoomed.bind(u(t)),t._applyZoomTranslation=t.applyZoomTranslation.bind(u(t)),t._resetEventHandler=t._resetEventHandler.bind(u(t));var o=!1;return t.applyZoomTranslation=function(){o||(o=!0,requestAnimationFrame(function(){o=!1,t._applyZoomTranslation()}))},t._onResize=t._onResize.bind(u(t)),t._listenForResize=t._listenForResize.bind(u(t)),t.trackHighlighter=new i.c({element:u(t),min:1}),t}var n,h,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,l(HTMLElement)),n=e,d=[{key:"_getClickCoords",value:function(){return r.e?[r.e.pageX,r.e.pageY]:null}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"observedAttributes",get:function(){return["displaystart","displayend","length","highlight"]}}],(h=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.width,this._height=this.getAttribute("height")?Number(this.getAttribute("height")):44,this._highlightEvent=this.getAttribute("highlight-event")?this.getAttribute("highlight-event"):"onclick",this.trackHighlighter.setAttributesInElement(this),this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",function(t){console.error(t)}),this.addEventListener("click",this._resetEventHandler)}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize),this.removeEventListener("click",this._resetEventHandler)}},{key:"getWidthWithMargins",value:function(){return this.width?this.width-this.margin.left-this.margin.right:0}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.i)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){this._zoom=Object(r.m)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).extent([[0,0],[this.getWidthWithMargins(),0]]).on("zoom",this.zoomed)}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"attributeChangedCallback",value:function(t,e,n){if("null"===n&&(n=null),e!==n){if(t.startsWith("highlight"))return void this.trackHighlighter.changedCallBack(t,n);this.setFloatAttribute(t,n),"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=s(this.xScale.domain(),2),e=t[0],n=t[1];this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,Math.max(n-1,e+1))},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.n.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new o.a(this._onResize),this._ro.observe(this)}},{key:"_resetEventHandler",value:function(t){t.target.closest(".feature")||this.dispatchEvent(this.createEvent("reset",null,!0))}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"createEvent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;n&&(n=n.feature?n.feature:n);var s={eventtype:t,coords:e._getClickCoords(),feature:n,target:a};return r&&(n&&n.fragments?s.highlight=n.fragments.map(function(t){return"".concat(t.start,":").concat(t.end)}).join(","):s.highlight=i&&o?"".concat(i,":").concat(o):null),new CustomEvent("change",{detail:s,bubbles:!0,cancelable:!0})}},{key:"bindEvents",value:function(t,e){t.on("mouseover",function(t,n,r){e.dispatchEvent(e.createEvent("mouseover",t,"onmouseover"===e._highlightEvent,t.start,t.end,r[n]))}).on("mouseout",function(){e.dispatchEvent(e.createEvent("mouseout",null,"onmouseover"===e._highlightEvent))}).on("click",function(t,n,r){e.dispatchEvent(e.createEvent("click",t,"onclick"===e._highlightEvent,t.start,t.end,r[n]))})}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"length",set:function(t){this._length=t,this.trackHighlighter.max=t},get:function(){return this._length}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()},get:function(){return this._svg}},{key:"margin",get:function(){return{top:10,right:10,bottom:10,left:10}}},{key:"fixedHighlight",set:function(t){this.trackHighlighter.setFixedHighlight(t)}}])&&c(n.prototype,h),d&&c(n,d),e}();e.a=d},581:function(t,e,n){"use strict";var r=n(559),i=n(572),o=n(587),a="Expected a function";function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(a);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(s.Cache||o.a),n}s.Cache=o.a;var c=s,u=500;var l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,f=function(t){var e=c(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(l,function(t,n,r,i){e.push(r?i.replace(h,"$1"):n||t)}),e}),p=n(569),d=n(568),y=n(560),g=1/0,v=p.a?p.a.prototype:void 0,m=v?v.toString:void 0;var b=function t(e){if("string"==typeof e)return e;if(Object(r.a)(e))return Object(d.a)(e,t)+"";if(Object(y.a)(e))return m?m.call(e):"";var n=e+"";return"0"==n&&1/e==-g?"-0":n};var _=function(t){return null==t?"":b(t)};e.a=function(t,e){return Object(r.a)(t)?t:Object(i.a)(t,e)?[t]:f(_(t))}},582:function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.min,r=void 0===n?-1/0:n,i=e.max,o=void 0===i?1/0:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.segments=[],this.max=o,this.min=r,this.regionString=null}var e,n,o;return e=t,(n=[{key:"encode",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.segments.map(function(n){var r=n.start,i=n.end;if(e)return"".concat(r,":").concat(i);var o=r===t.min?"":r,a=i===t.max?"":i;return"".concat(o,":").concat(a)}).join(",")}},{key:"decode",value:function(t){var e=this;void 0!==t&&(this.regionString=t),this.regionString?this.segments=this.regionString.split(",").map(function(t){var n=r(t.split(":"),3),i=n[0],o=n[1];if(void 0!==n[2])throw new Error("there should be at most 1 ':' per region. Region: ".concat(t));var a=i?Number(i):e.min,s=o?Number(o):e.max;if(a>s){var c=[s,a];a=c[0],s=c[1]}if(a<e.min&&(a=e.min),s>e.max&&(s=e.max),Number.isNaN(a))throw new Error("The parsed value of ".concat(i," is NaN. Region: ").concat(t));if(Number.isNaN(s))throw new Error("The parsed value of ".concat(o," is NaN. Region: ").concat(t));return{start:a,end:s}}):this.segments=[]}}])&&i(e.prototype,n),o&&i(e,o),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(t,e){return t?e?"".concat(t,",").concat(e):t:e},c=function(){function t(e){var n=e.element,r=e.min,i=e.max;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=n,this.region=new o({min:r,max:i}),this.fixedHighlight=null}var e,n,r;return e=t,(n=[{key:"setAttributesInElement",value:function(){this.region.decode(this.element.getAttribute("highlight")),0===this.region.segments.length&&(this.element._highlightstart=Number(this.element.getAttribute("highlightstart")),this.element._highlightend=Number(this.element.getAttribute("highlightend")),null!==this.element._highlightstart&&null!==this.element._highlightend&&"number"==typeof this.element._highlightstart&&"number"==typeof this.element._highlightend&&(this.element._highlight="".concat(this.element._highlightstart,":").concat(this.element._highlightend),this.region.decode(s(this.fixedHighlight,this.element._highlight))))}},{key:"setFloatAttribute",value:function(t,e){var n=parseFloat(e);this.element["_".concat(t)]=Number.isNaN(n)?e:n}},{key:"changedCallBack",value:function(t,e){switch(t){case"highlightstart":case"highlightend":this.setFloatAttribute(t,e),this.element._highlight=Number.isNaN(this.element._highlightstart)||Number.isNaN(this.element._highlightend)||void 0===this.element._highlightstart||void 0===this.element._highlightend||null===this.element._highlightstart||null===this.element._highlightend?"":"".concat(Math.max(this.region.min,this.element._highlightstart),":").concat(Math.min(this.region.max,this.element._highlightend));break;default:this.element._highlight=e}this.region.decode(s(this.fixedHighlight,this.element._highlight)),this.element.refresh()}},{key:"setFixedHighlight",value:function(t){this.fixedHighlight=t,this.region.decode(s(t,this.element._highlight)),this.element.refresh()}},{key:"appendHighlightTo",value:function(t){this.highlighted=t.append("g").attr("class","highlighted")}},{key:"updateHighlight",value:function(){var t=this,e=this.highlighted.selectAll("rect").data(this.region.segments);e.enter().append("rect").style("opacity",.5).attr("fill","rgba(255, 235, 59, 0.8)").style("pointer-events","none").merge(e).attr("height",this.element._height).attr("x",function(e){return t.element.getXFromSeqPosition(e.start)}).attr("width",function(e){return t.element.getSingleBaseWidth()*(e.end-e.start+1)}),e.exit().remove()}},{key:"max",set:function(t){this.region.max=t}}])&&a(e.prototype,n),r&&a(e,r),t}();function u(t){var e=document.createElement("div");return e.style.borderColor="",e.style.borderColor=t,""!==e.style.borderColor}var l=function(t){return t};n.d(e,"c",function(){return h}),n.d(e,"a",function(){return f}),n.d(e,"b",function(){return p});var h=c,f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=[];if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var r=t.split(",").map(function(t){return t.split(":")});if(r.length<2)throw new Error("There should be at least 2 points to create a scale");e=r.map(function(t){var e=t[0].trim().toUpperCase();if(!u(e))throw new Error("The color '".concat(e," is not valid'"));return e}),n=r.map(function(t,e){var n=parseFloat(t[1]);if(Number.isNaN(n))throw new Error("The second part of every point should be a number. Error in point ".concat(e,": ").concat(t));return n})}return{range:e,domain:n}},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keyFormatter,r=void 0===n?l:n,i=e.valueFormatter,o=void 0===i?l:i;if(null!==t&&"string"!=typeof t)throw new Error("The attribute text has to be of type string");if(t&&""!==t.trim()){var a=t.split(",").map(function(t){return t.split(":")}),s={};return a.forEach(function(t){if(2!==t.length)throw new Error("Bad block: ".concat(t.join(":"),"\n The blocks of the string should follow the format KEY:VALUE"));s[r(t[0])]=o(t[1])}),s}return{}}},583:function(t,e,n){"use strict";var r=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o},i=n(599),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i.a;e.a=s},584:function(t,e,n){"use strict";var r=n(598);e.a=function(t,e,n){"__proto__"==e&&r.a?Object(r.a)(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},585:function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},586:function(t,e,n){"use strict";e.a=function(t,e){return t.has(e)}},588:function(t,e,n){"use strict";var r=n(587),i="__lodash_hash_undefined__";var o=function(t){return this.__data__.set(t,i),this};var a=function(t){return this.__data__.has(t)};function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r.a;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=o,s.prototype.has=a;e.a=s},589:function(t,e,n){"use strict";var r=n(592);var i=function(){this.__data__=new r.a,this.size=0};var o=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var a=function(t){return this.__data__.get(t)};var s=function(t){return this.__data__.has(t)},c=n(607),u=n(587),l=200;var h=function(t,e){var n=this.__data__;if(n instanceof r.a){var i=n.__data__;if(!c.a||i.length<l-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new u.a(i)}return n.set(t,e),this.size=n.size,this};function f(t){var e=this.__data__=new r.a(t);this.size=e.size}f.prototype.clear=i,f.prototype.delete=o,f.prototype.get=a,f.prototype.has=s,f.prototype.set=h;e.a=f},593:function(t,e,n){"use strict";var r=[{name:"ECO:0000269",description:"Manual assertion based on experiment",shortDescription:"Publication",acronym:"EXP",isManual:!0},{name:"ECO:0000303",description:"Manual assertion based on opinion",shortDescription:"Publication",acronym:"NAS",isManual:!0},{name:"ECO:0000305",description:"Manual assertion inferred by curator",shortDescription:"Curated",acronym:"IC",isManual:!0},{name:"ECO:0000250",description:"Manual assertion inferred from sequence similarity",shortDescription:"By similarity",acronym:"ISS",isManual:!0},{name:"ECO:0000255",description:"Manual assertion according to rules",shortDescription:"Sequence Analysis",acronym:"ISM",isManual:!0},{name:"ECO:0000244",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000312",description:"Manual assertion inferred from database entries",shortDescription:"Imported",acronym:"MI",isManual:!0},{name:"ECO:0000256",description:"Automatic assertion according to rules",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000259",description:"Automatic assertion inferred from signature match",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000213",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000313",description:"Automatic assertion inferred from database entries",shortDescription:"Imported",acronym:"AI"}];function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,s;return e=t,s=[{key:"renameProperties",value:function(t){return t.map(function(t){var e={};return t.begin&&(e.start=t.begin),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{},e)})}},{key:"formatSource",value:function(t){return t.name.toLowerCase()==="PubMed".toLowerCase()?"".concat(t.id,"&nbsp;(<a href='").concat(t.url,"' style=\"color:#FFF\" target='_blank'>").concat(t.name,"</a>&nbsp;<a href='").concat(t.alternativeUrl,"' style=\"color:#FFF\" target='_blank'>EuropePMC</a>)"):"&nbsp;<a href='".concat(t.url,"' style=\"color:#FFF\" target='_blank'>").concat(t.id,"</a>&nbsp;(").concat(t.name,")")}},{key:"getEvidenceFromCodes",value:function(e){return e?"\n      <ul>".concat(e.map(function(e){var n=r.find(function(t){return t.name===e.code});return n?"<li title='".concat(n.description,'\' style="padding: .25rem 0">').concat(n.shortDescription,":&nbsp;").concat(e.source?t.formatSource(e.source):"","</li>"):""}).join(""),"</ul>\n    "):""}},{key:"formatXrefs",value:function(t){return"<ul>".concat(t.map(function(t){return'<li style="padding: .25rem 0">'.concat(t.name," ").concat(t.url?'<a href="'.concat(t.url,'" style="color:#FFF" target="_blank">').concat(t.id,"</a>"):"".concat(t.name," ").concat(t.id),"</li>")}).join(""),"</ul>")}},{key:"formatTooltip",value:function(e){var n=t.getEvidenceFromCodes(e.evidences);return"\n      ".concat(e.description?"<h5>Description</h5><p>".concat(e.description,"</p>"):"","\n      ").concat(e.matchScore?"<h5>Match score</h5><p>".concat(e.matchScore,"%</p>"):"","\n      ").concat(e.ftId?"<h5>Feature ID</h5><p>".concat(e.ftId,"</p>"):"","\n      ").concat(e.alternativeSequence?"<h5>Alternative sequence</h5><p>".concat(e.alternativeSequence,"</p>"):"","\n      ").concat(n?"<h5>Evidence</h5>".concat(n):"","\n      ").concat(e.xrefs?"<h5>Cross-references</h5>".concat(t.formatXrefs(e.xrefs)):"","\n        ")}}],(n=null)&&a(e.prototype,n),s&&a(e,s),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return d(t,arguments,g(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,t)})(t)}function d(t,e,n){return(d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&y(i,n.prototype),i}).apply(null,arguments)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=f(this,g(e).call(this)))._adaptedData=[],t._basicHelper=s,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,p(HTMLElement)),n=e,(r=[{key:"connectedCallback",value:function(){this._filters=this.getAttribute("filters")?this.getAttribute("filters").split(","):[],this._addLoaderListeners()}},{key:"parseEntry",value:function(t){var e=this,n=t.features;return n&&n.length>0&&(this._adaptedData=n.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(n,!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{tooltipContent:e._basicHelper.formatTooltip(t)})}),this._adaptedData=this._basicHelper.renameProperties(this._adaptedData)),this._adaptedData}},{key:"filterData",value:function(){var t=this;Array.isArray(this._adaptedData)&&this._filters.length>0&&(this._adaptedData=this._adaptedData.filter(function(e){return t._filters.includes(e.type)}))}},{key:"_emitEvent",value:function(t){this.parseEntry(t),this.filterData(),this.dispatchEvent(new CustomEvent("load",{detail:{payload:this._adaptedData},bubbles:!0,cancelable:!0}))}},{key:"_addLoaderListeners",value:function(){var t=this;this.addEventListener("load",function(e){if(e.target!==t){e.stopPropagation();try{if(e.detail.payload.errorMessage)throw e.detail.payload.errorMessage;t._emitEvent(e.detail.payload)}catch(e){t.dispatchEvent(new CustomEvent("error",{detail:e,bubbles:!0,cancelable:!0}))}}})}},{key:"data",set:function(t){this._emitEvent(t)}},{key:"adaptedData",get:function(){return this._adaptedData}},{key:"basicHelper",get:function(){return this._basicHelper}}])&&h(n.prototype,r),i&&h(n,i),e}();e.a=v},595:function(t,e,n){"use strict";var r=n(589),i=n(588);var o=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},a=n(586),s=1,c=2;var u=function(t,e,n,r,u,l){var h=n&s,f=t.length,p=e.length;if(f!=p&&!(h&&p>f))return!1;var d=l.get(t);if(d&&l.get(e))return d==e;var y=-1,g=!0,v=n&c?new i.a:void 0;for(l.set(t,e),l.set(e,t);++y<f;){var m=t[y],b=e[y];if(r)var _=h?r(b,m,y,e,t,l):r(m,b,y,t,e,l);if(void 0!==_){if(_)continue;g=!1;break}if(v){if(!o(e,function(t,e){if(!Object(a.a)(v,e)&&(m===t||u(m,t,n,r,l)))return v.push(e)})){g=!1;break}}else if(m!==b&&!u(m,b,n,r,l)){g=!1;break}}return l.delete(t),l.delete(e),g},l=n(569),h=n(603),f=n(613);var p=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},d=n(585),y=1,g=2,v="[object Boolean]",m="[object Date]",b="[object Error]",_="[object Map]",w="[object Number]",O="[object RegExp]",S="[object Set]",E="[object String]",j="[object Symbol]",x="[object ArrayBuffer]",k="[object DataView]",A=l.a?l.a.prototype:void 0,P=A?A.valueOf:void 0;var C=function(t,e,n,r,i,o,a){switch(n){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!o(new h.a(t),new h.a(e)));case v:case m:case w:return Object(f.a)(+t,+e);case b:return t.name==e.name&&t.message==e.message;case O:case E:return t==e+"";case _:var s=p;case S:var c=r&y;if(s||(s=d.a),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=g,a.set(t,e);var A=u(s(t),s(e),r,i,o,a);return a.delete(t),A;case j:if(P)return P.call(t)==P.call(e)}return!1},T=n(604),L=1,R=Object.prototype.hasOwnProperty;var N=function(t,e,n,r,i,o){var a=n&L,s=Object(T.a)(t),c=s.length;if(c!=Object(T.a)(e).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in e:R.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<c;){var d=t[l=s[u]],y=e[l];if(r)var g=a?r(y,d,l,e,t,o):r(d,y,l,t,e,o);if(!(void 0===g?d===y||i(d,y,n,r,o):g)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var v=t.constructor,m=e.constructor;v!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(t),o.delete(e),f},F=n(573),M=n(559),D=n(612),H=n(638),V=1,I="[object Arguments]",q="[object Array]",W="[object Object]",U=Object.prototype.hasOwnProperty;var G=function(t,e,n,i,o,a){var s=Object(M.a)(t),c=Object(M.a)(e),l=s?q:Object(F.a)(t),h=c?q:Object(F.a)(e),f=(l=l==I?W:l)==W,p=(h=h==I?W:h)==W,d=l==h;if(d&&Object(D.a)(t)){if(!Object(D.a)(e))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new r.a),s||Object(H.a)(t)?u(t,e,n,i,o,a):C(t,e,l,n,i,o,a);if(!(n&V)){var y=f&&U.call(t,"__wrapped__"),g=p&&U.call(e,"__wrapped__");if(y||g){var v=y?t.value():t,m=g?e.value():e;return a||(a=new r.a),o(v,m,n,i,a)}}return!!d&&(a||(a=new r.a),N(t,e,n,i,o,a))},K=n(561);var Y=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Object(K.a)(e)&&!Object(K.a)(n)?e!=e&&n!=n:G(e,n,r,i,t,o))},z=1,B=2;var Q=function(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=Object(t);o--;){var c=n[o];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<a;){var u=(c=n[o])[0],l=t[u],h=c[1];if(s&&c[2]){if(void 0===l&&!(u in t))return!1}else{var f=new r.a;if(i)var p=i(l,h,u,t,e,f);if(!(void 0===p?Y(h,l,z|B,i,f):p))return!1}}return!0},X=n(565);var Z=function(t){return t==t&&!Object(X.a)(t)},$=n(564);var J=function(t){for(var e=Object($.a)(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Z(i)]}return e};var tt=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var et=function(t){var e=J(t);return 1==e.length&&e[0][2]?tt(e[0][0],e[0][1]):function(n){return n===t||Q(n,t,e)}},nt=n(577);var rt=function(t,e){return null!=t&&e in Object(t)},it=n(581),ot=n(616),at=n(634),st=n(632),ct=n(566);var ut=function(t,e,n){for(var r=-1,i=(e=Object(it.a)(e,t)).length,o=!1;++r<i;){var a=Object(ct.a)(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Object(st.a)(i)&&Object(at.a)(a,i)&&(Object(M.a)(t)||Object(ot.a)(t))};var lt=function(t,e){return null!=t&&ut(t,e,rt)},ht=n(572),ft=1,pt=2;var dt=function(t,e){return Object(ht.a)(t)&&Z(e)?tt(Object(ct.a)(t),e):function(n){var r=Object(nt.a)(n,t);return void 0===r&&r===e?lt(n,t):Y(e,r,ft|pt)}},yt=n(574);var gt=function(t){return function(e){return null==e?void 0:e[t]}},vt=n(578);var mt=function(t){return function(e){return Object(vt.a)(e,t)}};var bt=function(t){return Object(ht.a)(t)?gt(Object(ct.a)(t)):mt(t)};function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"function"==typeof t?t:null==t?yt.a:"object"==_t(t)?Object(M.a)(t)?dt(t[0],t[1]):et(t):bt(t)}},596:function(t,e,n){"use strict";var r=n(577);function i(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function s(t){i(a,r,o,s,c,"next",t)}function c(t){i(a,r,o,s,c,"throw",t)}s(void 0)})}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,i;return e=t,n=null,r=[{key:"initStore",value:function(){window[t.storeSymbol]=new Map}},{key:"loadFromCache",value:function(e){return t.storeRef.get(e)}},{key:"storeInCache",value:function(e,n){var r=n.then(function(){var t=o(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(200===n.status){t.next=2;break}throw Error("Request Failed: Status = ".concat(n.status,"; URI = ").concat(e,"; Time = ").concat(new Date));case 2:return t.next=4,n.json();case 4:return t.t0=t.sent,t.t1=n.headers,t.abrupt("return",{payload:t.t0,headers:t.t1});case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());return t.storeRef.set(e,r),t.loadFromCache(e)}},{key:"fetch",value:(i=o(regeneratorRuntime.mark(function e(n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.storeRef&&t.initStore(),void 0===(r=t.loadFromCache(n.src))){e.next=4;break}return e.abrupt("return",r);case 4:if(!n.src){e.next=8;break}return i=new Headers({accept:"application/json"}),o=window.fetch(n.src,{headers:i}),e.abrupt("return",t.storeInCache(n.src,o));case 8:return e.abrupt("return",{payload:JSON.parse(n.textContent)});case 9:case"end":return e.stop()}},e)})),function(t){return i.apply(this,arguments)})},{key:"storeSymbol",get:function(){return Symbol.for("protvista-request-manager-store")}},{key:"storeRef",get:function(){return window[t.storeSymbol]}}],n&&a(e.prototype,n),r&&a(e,r),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return y(t,arguments,v(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,t)})(t)}function y(t,e,n){return(y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&g(i,n.prototype),i}).apply(null,arguments)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(t){return t.matches('source[src], script[type="application/json"]')})},b=function(t){var e,n;function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=h(this,v(i).call(this)))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(i,d(HTMLElement)),p(i,[{key:"fetch",value:(e=regeneratorRuntime.mark(function t(){var e,n,i,o,a,c,l,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=m.apply(void 0,u(this.children))).length){t.next=3;break}return t.abrupt("return");case 3:n=[],o=!0,a=!1,c=void 0,t.prev=7,l=e[Symbol.iterator]();case 9:if(o=(h=l.next()).done){t.next=26;break}return f=h.value,t.prev=11,t.next=14,s.fetch(f);case 14:return(i=t.sent).srcElement=f,i.src=f.src,t.abrupt("break",26);case 20:t.prev=20,t.t0=t.catch(11),n.push(t.t0);case 23:o=!0,t.next=9;break;case 26:t.next=32;break;case 28:t.prev=28,t.t1=t.catch(7),a=!0,c=t.t1;case 32:t.prev=32,t.prev=33,o||null==l.return||l.return();case 35:if(t.prev=35,!a){t.next=38;break}throw c;case 38:return t.finish(35);case 39:return t.finish(32);case 40:if(i){t.next=44;break}this._errors=n;try{this.dispatchEvent(new CustomEvent("error",{detail:n,bubbles:!0,cancelable:!0}))}catch(t){console.error(t)}return t.abrupt("return");case 44:"string"==typeof this.selector?this._data=Object(r.a)(i.payload,this.selector):this._data=this.selector(i.payload),i.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:i,bubbles:!0,cancelable:!0}));case 47:case"end":return t.stop()}},t,this,[[7,28,32,40],[11,20],[33,,35,39]])}),n=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(t){l(o,r,i,a,s,"next",t)}function s(t){l(o,r,i,a,s,"throw",t)}a(void 0)})},function(){return n.apply(this,arguments)})},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}}],[{key:"is",get:function(){return"data-loader"}}]),p(i,[{key:"connectedCallback",value:function(){this.fetch()}}]),i}();b.fetch=window.fetch.bind(window);e.a=b},597:function(t,e,n){"use strict";var r=n(567),i=n(562),o=Object(r.a)(i.a,"Set");e.a=o},598:function(t,e,n){"use strict";var r=n(567),i=function(){try{var t=Object(r.a)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.a=i},599:function(t,e,n){"use strict";e.a=function(){return[]}},600:function(t,e,n){"use strict";var r=n(576),i=n(559);e.a=function(t,e,n){var o=e(t);return Object(i.a)(t)?o:Object(r.a)(o,n(t))}},601:function(t,e,n){"use strict";var r=n(605);e.a=function(t,e){return!(null==t||!t.length)&&Object(r.a)(t,e,0)>-1}},602:function(t,e,n){"use strict";e.a=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},603:function(t,e,n){"use strict";var r=n(562).a.Uint8Array;e.a=r},604:function(t,e,n){"use strict";var r=n(600),i=n(583),o=n(564);e.a=function(t){return Object(r.a)(t,o.a,i.a)}},610:function(t,e,n){"use strict";function r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}n.d(e,"a",function(){return r})},611:function(t,e,n){"use strict";var r=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}(),i=n(564);e.a=function(t,e){return t&&r(t,e,i.a)}},614:function(t,e,n){"use strict";var r=n(571),i=n(561);e.a=function(t){return Object(i.a)(t)&&Object(r.a)(t)}},615:function(t,e,n){"use strict";var r=n(574);var i=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},o=Math.max;var a=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),c=Array(s);++a<s;)c[a]=r[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=r[a];return u[e]=n(c),i(t,this,u)}};var s=function(t){return function(){return t}},c=n(598),u=c.a?function(t,e){return Object(c.a)(t,"toString",{configurable:!0,enumerable:!1,value:s(e),writable:!0})}:r.a,l=800,h=16,f=Date.now;var p=function(t){var e=0,n=0;return function(){var r=f(),i=h-(r-n);if(n=r,i>0){if(++e>=l)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(u);e.a=function(t,e){return p(a(t,e,r.a),t+"")}},617:function(t,e,n){"use strict";(function(t){var r=n(562);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="object"==("undefined"==typeof exports?"undefined":i(exports))&&exports&&!exports.nodeType&&exports,a=o&&"object"==i(t)&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.a.Buffer:void 0,c=s?s.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(626)(t))},618:function(t,e,n){"use strict";var r=n(614);e.a=function(t){return Object(r.a)(t)?t:[]}},619:function(t,e,n){"use strict";var r=n(588),i=n(601),o=n(602),a=n(568),s=n(590),c=n(586),u=Math.min;e.a=function(t,e,n){for(var l=n?o.a:i.a,h=t[0].length,f=t.length,p=f,d=Array(f),y=1/0,g=[];p--;){var v=t[p];p&&e&&(v=Object(a.a)(v,Object(s.a)(e))),y=u(v.length,y),d[p]=!n&&(e||h>=120&&v.length>=120)?new r.a(p&&v):void 0}v=t[0];var m=-1,b=d[0];t:for(;++m<h&&g.length<y;){var _=v[m],w=e?e(_):_;if(_=n||0!==_?_:0,!(b?Object(c.a)(b,w):l(g,w,n))){for(p=f;--p;){var O=d[p];if(!(O?Object(c.a)(O,w):l(t[p],w,n)))continue t}b&&b.push(w),g.push(_)}}return g}},621:function(t,e,n){"use strict";var r=n(589);var i=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},o=n(584),a=n(613),s=Object.prototype.hasOwnProperty;var c=function(t,e,n){var r=t[e];s.call(t,e)&&Object(a.a)(r,n)&&(void 0!==n||e in t)||Object(o.a)(t,e,n)};var u=function(t,e,n,r){var i=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),i?Object(o.a)(n,u,l):c(n,u,l)}return n},l=n(564);var h=function(t,e){return t&&u(e,Object(l.a)(e),t)},f=n(633),p=n(565),d=n(608);var y=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},g=Object.prototype.hasOwnProperty;var v=function(t){if(!Object(p.a)(t))return y(t);var e=Object(d.a)(t),n=[];for(var r in t)("constructor"!=r||!e&&g.call(t,r))&&n.push(r);return n},m=n(571);var b=function(t){return Object(m.a)(t)?Object(f.a)(t,!0):v(t)};var _=function(t,e){return t&&u(e,b(e),t)},w=n(617);var O=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},S=n(583);var E=function(t,e){return u(t,Object(S.a)(t),e)},j=n(576),x=n(631),k=Object(x.a)(Object.getPrototypeOf,Object),A=n(599),P=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Object(j.a)(e,Object(S.a)(t)),t=k(t);return e}:A.a;var C=function(t,e){return u(t,P(t),e)},T=n(604),L=n(600);var R=function(t){return Object(L.a)(t,b,P)},N=n(573),F=Object.prototype.hasOwnProperty;var M=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&F.call(t,"index")&&(n.index=t.index,n.input=t.input),n},D=n(603);var H=function(t){var e=new t.constructor(t.byteLength);return new D.a(e).set(new D.a(t)),e};var V=function(t,e){var n=e?H(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},I=/\w*$/;var q=function(t){var e=new t.constructor(t.source,I.exec(t));return e.lastIndex=t.lastIndex,e},W=n(569),U=W.a?W.a.prototype:void 0,G=U?U.valueOf:void 0;var K=function(t){return G?Object(G.call(t)):{}};var Y=function(t,e){var n=e?H(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},z="[object Boolean]",B="[object Date]",Q="[object Map]",X="[object Number]",Z="[object RegExp]",$="[object Set]",J="[object String]",tt="[object Symbol]",et="[object ArrayBuffer]",nt="[object DataView]",rt="[object Float32Array]",it="[object Float64Array]",ot="[object Int8Array]",at="[object Int16Array]",st="[object Int32Array]",ct="[object Uint8Array]",ut="[object Uint8ClampedArray]",lt="[object Uint16Array]",ht="[object Uint32Array]";var ft=function(t,e,n){var r=t.constructor;switch(e){case et:return H(t);case z:case B:return new r(+t);case nt:return V(t,n);case rt:case it:case ot:case at:case st:case ct:case ut:case lt:case ht:return Y(t,n);case Q:return new r;case X:case J:return new r(t);case Z:return q(t);case $:return new r;case tt:return K(t)}},pt=Object.create,dt=function(){function t(){}return function(e){if(!Object(p.a)(e))return{};if(pt)return pt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var yt=function(t){return"function"!=typeof t.constructor||Object(d.a)(t)?{}:dt(k(t))},gt=n(559),vt=n(612),mt=n(561),bt="[object Map]";var _t=function(t){return Object(mt.a)(t)&&Object(N.a)(t)==bt},wt=n(590),Ot=n(609),St=Ot.a&&Ot.a.isMap,Et=St?Object(wt.a)(St):_t,jt="[object Set]";var xt=function(t){return Object(mt.a)(t)&&Object(N.a)(t)==jt},kt=Ot.a&&Ot.a.isSet,At=kt?Object(wt.a)(kt):xt,Pt=1,Ct=2,Tt=4,Lt="[object Arguments]",Rt="[object Function]",Nt="[object GeneratorFunction]",Ft="[object Object]",Mt={};Mt[Lt]=Mt["[object Array]"]=Mt["[object ArrayBuffer]"]=Mt["[object DataView]"]=Mt["[object Boolean]"]=Mt["[object Date]"]=Mt["[object Float32Array]"]=Mt["[object Float64Array]"]=Mt["[object Int8Array]"]=Mt["[object Int16Array]"]=Mt["[object Int32Array]"]=Mt["[object Map]"]=Mt["[object Number]"]=Mt[Ft]=Mt["[object RegExp]"]=Mt["[object Set]"]=Mt["[object String]"]=Mt["[object Symbol]"]=Mt["[object Uint8Array]"]=Mt["[object Uint8ClampedArray]"]=Mt["[object Uint16Array]"]=Mt["[object Uint32Array]"]=!0,Mt["[object Error]"]=Mt[Rt]=Mt["[object WeakMap]"]=!1;e.a=function t(e,n,o,a,s,u){var f,d=n&Pt,y=n&Ct,g=n&Tt;if(o&&(f=s?o(e,a,s,u):o(e)),void 0!==f)return f;if(!Object(p.a)(e))return e;var v=Object(gt.a)(e);if(v){if(f=M(e),!d)return O(e,f)}else{var m=Object(N.a)(e),b=m==Rt||m==Nt;if(Object(vt.a)(e))return Object(w.a)(e,d);if(m==Ft||m==Lt||b&&!s){if(f=y||b?{}:yt(e),!d)return y?C(e,_(f,e)):E(e,h(f,e))}else{if(!Mt[m])return s?e:{};f=ft(e,m,d)}}u||(u=new r.a);var S=u.get(e);if(S)return S;u.set(e,f),At(e)?e.forEach(function(r){f.add(t(r,n,o,r,e,u))}):Et(e)&&e.forEach(function(r,i){f.set(i,t(r,n,o,i,e,u))});var j=g?y?R:T.a:y?keysIn:l.a,x=v?void 0:j(e);return i(x||e,function(r,i){x&&(r=e[i=r]),c(f,i,t(r,n,o,i,e,u))}),f}},623:function(t,e,n){"use strict";var r=n(588),i=n(601),o=n(602),a=n(586),s=n(597);var c=function(){},u=n(585),l=s.a&&1/Object(u.a)(new s.a([,-0]))[1]==1/0?function(t){return new s.a(t)}:c,h=200;e.a=function(t,e,n){var s=-1,c=i.a,f=t.length,p=!0,d=[],y=d;if(n)p=!1,c=o.a;else if(f>=h){var g=e?null:l(t);if(g)return Object(u.a)(g);p=!1,c=a.a,y=new r.a}else y=e?[]:d;t:for(;++s<f;){var v=t[s],m=e?e(v):v;if(v=n||0!==v?v:0,p&&m==m){for(var b=y.length;b--;)if(y[b]===m)continue t;e&&y.push(m),d.push(v)}else c(y,m,n)||(y!==d&&y.push(m),d.push(v))}return d}},624:function(t,e,n){"use strict";var r=n(576),i=n(569),o=n(616),a=n(559),s=i.a?i.a.isConcatSpreadable:void 0;var c=function(t){return Object(a.a)(t)||Object(o.a)(t)||!!(s&&t&&t[s])};e.a=function t(e,n,i,o,a){var s=-1,u=e.length;for(i||(i=c),a||(a=[]);++s<u;){var l=e[s];n>0&&i(l)?n>1?t(l,n-1,i,o,a):Object(r.a)(a,l):o||(a[a.length]=l)}return a}},625:function(t,e,n){"use strict";var r=n(584);var i=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r},o=n(611),a=n(571);var s=function(t,e){return function(n,r){if(null==n)return n;if(!Object(a.a)(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}(o.a);var c=function(t,e,n,r){return s(t,function(t,i,o){e(r,t,n(t),o)}),r},u=n(595),l=n(559);var h=function(t,e){return function(n,r){var o=Object(l.a)(n)?i:c,a=e?e():{};return o(n,t,Object(u.a)(r,2),a)}},f=Object.prototype.hasOwnProperty,p=h(function(t,e,n){f.call(t,n)?t[n].push(e):Object(r.a)(t,n,[e])});e.a=p},627:function(t,e,n){"use strict";var r=n(563),i=n(579);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n,r){return(c="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=l(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=l(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,h(e).apply(this,arguments))}var n,o,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,i["a"]),n=e,l=[{key:"observedAttributes",get:function(){return i.a.observedAttributes.concat("highlightstart","highlightend")}}],(o=[{key:"connectedCallback",value:function(){u(h(e.prototype),"connectedCallback",this).call(this),this.sequence=this.getAttribute("sequence"),this.sequence&&this._createSequence()}},{key:"_getCharWidth",value:function(){this.seq_g.append("text").attr("class","base").text("T"),this.chWidth=.8*this.seq_g.select("text.base").node().getBBox().width,this.seq_g.select("text.base").remove()}},{key:"_createSequence",value:function(){!function(t,e,n,r,i){if(!c(t,e,n,r||t)&&i)throw new Error("failed to set property")}(h(e.prototype),"svg",Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",this._height),this,!0),this.seq_bg=u(h(e.prototype),"svg",this).append("g").attr("class","background"),this.axis=u(h(e.prototype),"svg",this).append("g").attr("class","x axis"),this.seq_g=u(h(e.prototype),"svg",this).append("g").attr("class","sequence").attr("transform","translate(0,".concat(.75*this._height,")")),this._getCharWidth(),this.trackHighlighter.appendHighlightTo(this.svg),this.refresh()}},{key:"refresh",value:function(){var t=this;if(this.axis){var e=this.getSingleBaseWidth(),n=e-this.chWidth,i=e/2,o=Math.round(Math.max(0,this._displaystart-2)),a=Math.round(Math.min(this.sequence.length,this._displayend+1)),s=n<0?[]:this.sequence.slice(o,a).split("").map(function(t,e){return{start:1+o+e,end:1+o+e,aa:t}});this.xAxis=Object(r.a)(this.xScale).tickFormat(function(t){return Number.isInteger(t)?t:""}).ticks(3,"s"),this.axis.call(this.xAxis),this.axis.attr("transform","translate(".concat(this.margin.left+i,",0)")),this.axis.select(".domain").remove(),this.axis.selectAll(".tick line").remove(),this.bases=this.seq_g.selectAll("text.base").data(s,function(t){return t.start}),this.bases.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",function(e){return t.getXFromSeqPosition(e.start)+i}).text(function(t){return t.aa}).style("pointer-events","none").style("font-family","monospace"),this.bases.exit().remove(),this.bases.attr("x",function(e){return t.getXFromSeqPosition(e.start)+i}),this.background=this.seq_bg.selectAll("rect.base_bg").data(s,function(t){return t.start}),this.background.enter().append("rect").attr("class","base_bg feature").attr("height",this._height).merge(this.background).attr("width",e).attr("fill",function(t){return Math.round(t.start)%2?"#ccc":"#eee"}).attr("x",function(e){return t.getXFromSeqPosition(e.start)}).call(this.bindEvents,this),this.background.exit().remove(),this.seq_g.style("opacity",Math.min(1,n)),this.background.style("opacity",Math.min(1,n)),this._updateHighlight()}}},{key:"_updateHighlight",value:function(){this.trackHighlighter.updateHighlight()}},{key:"data",get:function(){return this.sequence},set:function(t){"string"==typeof t?this.sequence=t:"sequence"in t&&(this.sequence=t.sequence),this.sequence&&!u(h(e.prototype),"svg",this)?this._createSequence():this.refresh()}}])&&a(n.prototype,o),l&&a(n,l),e}();e.a=p},628:function(t,e,n){"use strict";var r=n(563);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function c(t,e,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=10,f=10,p=10,d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,l(e).call(this)))._x=null,t.dontDispatch=!1,t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,s(HTMLElement)),n=e,c=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightStart","highlightEnd","width"]}}],(i=[{key:"_refreshWidth",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth}},{key:"connectedCallback",value:function(){this._refreshWidth(),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this),this._ro&&this._ro.unobserve(this),window.removeEventListener("resize",this._onResize)}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&(this["_".concat(t)]=parseFloat(n),this._updateNavRuler())}},{key:"_createNavRuler",value:function(){var t=this;this._x=Object(r.i)().range([p,this.width-h]),this._x.domain([1,this._length]),this._svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(r.a)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-f),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-f).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.d)().extent([[p,0],[this.width-h,20.4]]).on("brush",function(){r.e.selection&&(t._displaystart=Object(r.f)("d")(t._x.invert(r.e.selection[0])),t._displayend=Object(r.f)("d")(t._x.invert(r.e.selection[1])),t.dontDispatch||t.dispatchEvent(new CustomEvent("change",{detail:{displayend:t._displayend,displaystart:t._displaystart,extra:{transform:r.e.transform}},bubbles:!0,cancelable:!0})),t._updateLabels(),t._updatePolygon())}),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},{key:"_onResize",value:function(){this._refreshWidth(),this._x=this._x.range([p,this.width-h]),this._svg.attr("width",this.width),this._viewport.extent([[p,0],[this.width-h,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}},{key:"_updateNavRuler",value:function(){this._x&&(this._x.domain([1,this._length]),this._axis.call(this._xAxis),this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}},{key:"_updateLabels",value:function(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}},{key:"_updatePolygon",value:function(){this.polygon&&this.polygon.attr("points","".concat(this._x(this._displaystart),",").concat(20,"\n        ").concat(this._x(this._displayend),",").concat(20,"\n        ").concat(this.width,",").concat(40,"\n        0,").concat(40))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}}])&&o(n.prototype,i),c&&o(n,c),e}();e.a=d},629:function(t,e,n){"use strict";var r=n(593),i=n(625),o=n(624);var a=function(t){return null!=t&&t.length?Object(o.a)(t,1):[]},s=n(595),c=n(623);var u=function(t,e){return t&&t.length?Object(c.a)(t,Object(s.a)(e,2)):[]},l=n(611),h=n(574);var f=function(t){return"function"==typeof t?t:h.a};var p=function(t,e){return t&&Object(l.a)(t,f(e))},d=n(568),y=n(619),g=n(615),v=n(618);var m=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},b=Object(g.a)(function(t){var e=m(t),n=Object(d.a)(t,v.a);return e===m(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?Object(y.a)(n,Object(s.a)(e,2)):[]}),_=n(641),w=n(621),O=1,S=4;var E=function(t){return Object(w.a)(t,O|S)},j="#990000",x="#99cc00",k="#002594",A="#8FE3FF",P="#009e73",C=[/disease/i,/pathogenic\b/i,/risk factor/i],T=[/benign/i],L=[/uncertain/i,/conflicting/i,/unclassified/i],R=function(t,e){return e.some(function(e){return e.test(t)})},N=[{name:"disease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely disease"],colors:[j]}},{name:"predicted",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Predicted deleterious","Predicted benign"],colors:[k,A]}},{name:"nonDisease",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Likely benign"],colors:[x]}},{name:"uncertain",type:{name:"consequence",text:"Filter Consequence"},options:{labels:["Uncertain"],colors:[P]}},{name:"UniProt",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["UniProt reviewed"],colors:["#9f9f9f"]}},{name:"ClinVar",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["ClinVar reviewed"],colors:["#9f9f9f"]}},{name:"LSS",type:{name:"provenance",text:"Filter Provenance"},options:{labels:["Large scale studies"],colors:["#9f9f9f"]}}],F={disease:{applyFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=E(t);return e.filter(function(t){return R(t.clinicalSignificances,C)})}},predicted:{applyFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=E(t);return e.filter(function(t){return void 0!==t.polyphenScore||void 0!==t.siftScore})}},nonDisease:{applyFilter:function(t){return(E(t)||[]).filter(function(t){return R(t.clinicalSignificances,T)})}},uncertain:{applyFilter:function(t){return(E(t)||[]).filter(function(t){return void 0===t.clinicalSignificances&&void 0===t.polyphenScore&&void 0===t.siftScore||R(t.clinicalSignificances,L)})}},UniProt:{applyFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=E(t);return e.filter(function(t){return t.xrefNames&&(t.xrefNames.includes("uniprot")||t.xrefNames.includes("UniProt"))})}},ClinVar:{applyFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=E(t);return e.filter(function(t){return t.xrefNames&&(t.xrefNames.includes("ClinVar")||t.xrefNames.includes("clinvar"))})}},LSS:{applyFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=E(t)||[];return e.filter(function(t){return"large_scale_study"===t.sourceType||"mixed"===t.sourceType})}}},M=Object(_.a)().domain([0,1]).range([k,A]),D=function(t){return F.disease.applyFilter([t]).length>0?j:F.nonDisease.applyFilter([t]).length>0?x:F.uncertain.applyFilter([t]).length>0?P:F.predicted.applyFilter([t]).length>0?(e=t.polyphenScore,n=t.siftScore,M((n||0+(1-e?e:1))/(e&&n?2:1))):P;var e,n},H=function(t){return t},V=N;function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function G(t,e,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return B});var z=function(t,e){return(n=t,r=F[n],r||console.error("No filter found for: ".concat(n)),r||{applyFilter:H}).applyFilter(e);var n,r},B=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,K(e).apply(this,arguments))}var n,o,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(e,r["a"]),n=e,s=[{key:"getSourceType",value:function(t,e){var n=t.map(function(t){return t.name});return"uniprot"!==e&&"mixed"!==e||n.push("uniprot"),n}},{key:"getDescriptionsAsArray",value:function(t){var e=t.split(/\[LSS_|\[SWP]: /g);return(e=Object(i.a)(e,function(t){return 0===t.length?"NOTHING":-1!==t.indexOf("]: ")?"LSS":"UP"})).LSS=e.LSS?e.LSS.join("; ").replace(/]: /g,": "):void 0,e}},{key:"observedAttributes",get:function(){return["activefilters"]}}],(o=[{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){if("activefilters"!==t)return;var r=this._adaptedData,o=r.sequence,s=r.variants;if(!(n=n.trim()))return void this._fireEvent("load",{payload:{sequence:o,variants:s}});var c=n.split(","),l=Object(i.a)(c,function(t){return t.split(":")[0]}),h=[];p(l,function(t){var e=function(t,e,n){return u(a(e.map(function(t){return t.split(":")[1]}).map(function(e){return z(e,t)})),function(t){return t[n]})}(s,t,"accession");h.push(e)}),h=a(b.apply(void 0,q(h).concat([function(t){return t.accession}]))),h=u(h,"accession"),this._fireEvent("load",{payload:{sequence:o,variants:h}})}}},{key:"connectedCallback",value:function(){G(K(e.prototype),"connectedCallback",this).call(this),this.closest("protvista-manager")&&(this.manager=this.closest("protvista-manager"),this.manager.register(this)),this._fireEvent("change",{type:"filters",value:JSON.stringify(V)})}},{key:"disconnectedCallback",value:function(){this.manager&&this.manager.unregister(this)}},{key:"parseEntry",value:function(t){var n=this,r=t.sequence,i=t.features;if(r){var o=i.map(function(t){return{type:"Variant",accession:t.genomicLocation,variant:t.alternativeSequence,start:t.begin,end:t.end,tooltipContent:n.formatTooltip(t),color:D(t),association:t.association,sourceType:t.sourceType,xrefNames:e.getSourceType(t.xrefs,t.sourceType),clinicalSignificances:t.clinicalSignificances,polyphenScore:t.polyphenScore,siftScore:t.siftScore}});this._adaptedData={sequence:r,variants:o}}}},{key:"formatTooltip",value:function(t){return t.description&&(t.descriptionArray=e.getDescriptionsAsArray(t.description)),"\n                <h5>Variant</h5><p>".concat(t.wildType," > ").concat(t.alternativeSequence,"</p>\n                ").concat(t.frequency?"<h5>Frequency (MAF)</h5><p>".concat(t.frequency,"</p>"):"","\n                ").concat(t.siftScore?"<h5>SIFT</h5><p>".concat(t.siftPrediction," ").concat(t.siftScore,"</p>"):"","\n                ").concat(t.polyphenScore?"<h5>Polyphen</h5><p>".concat(t.polyphenPrediction," ").concat(t.polyphenScore,"</p>"):"","\n                ").concat(t.consequenceType?"<h5>Consequence</h5><p>".concat(t.consequenceType,"</p>"):"","\n                ").concat(t.somaticStatus?"<h5>Somatic</h5><p>".concat(0===t.somaticStatus?"No":"Yes","</p>"):"","\n                ").concat(t.genomicLocation?"<h5>Location</h5><p>".concat(t.genomicLocation,"</p>"):"","\n                ").concat("UniProt"===t.sourceType||"mixed"===t.sourceType?"<hr/>".concat(this.getUniProtHTML(t)):"","\n                ").concat("large_scale_study"===t.sourceType||"mixed"===t.sourceType?"<hr/>".concat(this.getLSSHTML(t)):"","\n        ")}},{key:"getUniProtHTML",value:function(t){return"<h4>UniProt</h4>\n        ".concat(t.descriptionArray&&t.descriptionArray.UP?"<h5>Description</h5><p>".concat(t.descriptionArray.UP.join("; "),"</p>"):"","\n        ").concat(t.ftId?"<h5>Feature ID</h5><p>".concat(t.ftId,"</p>"):"","\n        ").concat(t.association?this.getDiseaseAssociations(t.association):"","\n        ")}},{key:"getLSSHTML",value:function(t){return"<h4>Large scale studies</h4>\n        ".concat(t.descriptionArray&&t.descriptionArray.LSS?"<h5>Description</h5><p>".concat(t.descriptionArray.LSS,"</p>"):"","\n        ").concat(t.frequency?"<h5>Frequency (MAF)</h5><p>".concat(t.frequency,"</p>"):"","\n        <h5>Cross-references</h5>").concat(this._basicHelper.formatXrefs(t.xrefs),"\n        ")}},{key:"getDiseaseAssociations",value:function(t){var e=this;return t.map(function(t){return"\n            <h4>Disease association</h4><p>".concat(t.name,"</p>\n            ").concat(t.xrefs?"<h5>Cross-references</h5>".concat(e._basicHelper.formatXrefs(t.xrefs)):"","\n            ").concat(e._basicHelper.getEvidenceFromCodes(t.evidences),"\n        ")}).join("")}},{key:"_fireEvent",value:function(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}))}}])&&W(n.prototype,o),s&&W(n,s),e}()},636:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,u(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,t)})(t)}function s(t,e,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=o(this,u(e).call(this))).protvistaElements=new Set,t.attributeValues=new Map,t}var n,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,a(HTMLElement)),n=e,s=[{key:"observedAttributes",get:function(){return["attributes"]}}],(r=[{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n&&"attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute")}}},{key:"register",value:function(t){this.protvistaElements.add(t)}},{key:"unregister",value:function(t){this.protvistaElements.delete(t)}},{key:"_polyfillElementClosest",value:function(){var t=this;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var n=t;do{if(n.matches(e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null})}},{key:"applyAttributes",value:function(){var t=this;this.protvistaElements.forEach(function(e){t.attributeValues.forEach(function(t,n){!1===t?e.removeAttribute(n):e.setAttribute(n,"boolean"==typeof t?"":t)})})}},{key:"_changeListener",value:function(t){var e=this;-1!==this._attributes.indexOf(t.detail.type)&&this.attributeValues.set(t.detail.type,t.detail.value),Object.keys(t.detail).forEach(function(n){-1!==e._attributes.indexOf(n)&&e.attributeValues.set(n,t.detail[n])}),this.applyAttributes()}},{key:"connectedCallback",value:function(){this.addEventListener("change",this._changeListener)}}])&&i(n.prototype,r),s&&i(n,s),e}();e.a=l},637:function(t,e,n){"use strict";var r=n(575),i=n(563);var o=function(t){var e=t.variants,n=t.sequence;if(!n||!e)return null;var r=n.split("").map(function(t,e){return{type:"VARIANT",normal:t,pos:e+1,variants:[]}});return e.forEach(function(t){r[t.start-1]&&r[t.start-1].variants.push(t)}),r};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._frequency=Object(i.k)().exponent(.001).domain([0,1]).range([5,10]),this.drawVariationPlot=this.drawVariationPlot.bind(this)}var e,n,r;return e=t,(n=[{key:"drawVariationPlot",value:function(t,e){var n=e.getSingleBaseWidth()/2;t.each(function(t,r,o){var a=Object(i.l)(o[r]),s=t.filter(function(t){return 0!==t.variants.length}),c=a.selectAll("g").data(s,function(t){return t.pos});c.exit().remove();var u=c.enter().append("g").merge(c).selectAll("circle").data(function(t){return t.variants});u.exit().remove(),u.enter().append("circle").merge(u).attr("class","feature").attr("title",function(t){return t.start}).attr("r",function(t){return t.size?t.size:5}).attr("cx",function(t){return e.getXFromSeqPosition(t.start)+n}).attr("cy",function(t){return e._yScale(t.variant.charAt(0))}).attr("name",function(t){var e="*"===t.alternativeSequence?"STOP":t.alternativeSequence;return t.internalId="var_".concat(t.wildType).concat(t.start).concat(e),t.internalId}).attr("fill",function(t){return t.color}).call(e.bindEvents,e)})}}])&&a(e.prototype,n),r&&a(e,r),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","d","*"],y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,f(e).apply(this,arguments))}var n,a,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,r["b"]),n=e,c=[{key:"css",get:function(){return"\n    <style>\n    protvista-variation {\n      display: flex;\n      width: 100%;\n    }\n    \n    protvista-variation svg {\n      background-color: #fff;\n    }\n    \n    protvista-variation circle {\n      opacity: 0.6;\n    }\n    protvista-variation circle:hover {\n      opacity: 0.9;\n    }\n    protvista-variation .tick line,\n    protvista-variation .axis path {\n      opacity: 0.1;\n    }\n    \n    .protvista-highlight {\n      fill: #ffe999;\n    }\n    \n    protvista-variation .variation-y-right line,\n    protvista-variation .axis path {\n      fill: none;\n      stroke: none;\n    }\n    \n    </style>\n    "}}],(a=[{key:"connectedCallback",value:function(){h(f(e.prototype),"connectedCallback",this).call(this);var t=document.createElement("style");t.innerHTML=e.css,this.appendChild(t),this._height=Number(this.getAttribute("height"))?Number(this.getAttribute("height")):430,this._width=this._width?this._width:0,this._yScale=Object(i.i)(),this._yScale=Object(i.j)().domain(d).range([0,this._height-this.margin.top-this.margin.bottom])}},{key:"attributeChangedCallback",value:function(t,n,r){h(f(e.prototype),"attributeChangedCallback",this).call(this,t,n,r)}},{key:"_createFeatures",value:function(){this._variationPlot=new s;var t=h(f(e.prototype),"svg",this).select("g.sequence-features"),n=t.attr("transform","translate(0, ".concat(this.margin.top,")")).append("g").attr("clip-path","url(#plotAreaClip)");this._clipPath=t.append("clipPath").attr("id","plotAreaClip").append("rect").attr("width",this.getWidthWithMargins()).attr("height",this._height).attr("transform","translate(0, -".concat(this.margin.top,")")),this._series=n.datum(this._data),this._axisLeft=t.append("g"),this._axisRight=t.append("g"),this.updateScale()}},{key:"refresh",value:function(){this._series&&(this._clipPath.attr("width",this.getWidthWithMargins()),this.updateScale(),this._series.call(this._variationPlot.drawVariationPlot,this),this._updateHighlight())}},{key:"updateScale",value:function(){this._yAxisLScale=Object(i.b)().scale(this._yScale).tickSize(-this.getWidthWithMargins()),this._yAxisRScale=Object(i.c)().scale(this._yScale),this._axisLeft.attr("class","variation-y-left axis").attr("transform","translate(".concat(this.margin.left,",0)")).call(this._yAxisLScale),this._axisRight.attr("transform","translate(".concat(this.getWidthWithMargins()-this.margin.right+2,", 0)")).attr("class","variation-y-right axis").call(this._yAxisRScale)}},{key:"updateData",value:function(t){this._series&&this._series.datum(t)}},{key:"data",set:function(t){this._data=o(t),this._createTrack()}}])&&u(n.prototype,a),c&&u(n,c),e}();e.a=y},640:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(656);e.getDocumentBaseUrl=function(t){return"about:blank"!==t.baseURI?t.baseURI:null},e.clone=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},e.cloneArray=function(t){return Array.prototype.slice.apply(t,[0])},e.joinUrl=function(t,e){return t?i.resolve(t,e):e},e.isDataUri=function(t){return/^data:/.test(t)},e.collectAndReportErrors=function(t){var e=[];return Promise.all(t.map(function(t){return t.catch(function(t){e.push(t)})})).then(function(){return e})};var o=null;e.ajax=function(t,n){return new Promise(function(r,i){var a,s=new window.XMLHttpRequest,c=e.joinUrl(n.baseUrl,t),u=function(){i({msg:"Unable to load url",url:c})};a=function(t,e){return!1===e||"none"===e||"repeated"===e?(null!==o&&"repeated"===e||(o=Date.now()),t+"?_="+o):t}(c,n.cache),s.addEventListener("load",function(){200===s.status||0===s.status?r(s.response):u()},!1),s.addEventListener("error",u,!1);try{s.open("GET",a,!0),s.overrideMimeType(n.mimeType),s.send(null)}catch(t){u()}})},e.binaryAjax=function(t,n){var r=e.clone(n);return r.mimeType="text/plain; charset=x-user-defined",e.ajax(t,r).then(function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e})};e.getDataURIForImageURL=function(t,n){return e.binaryAjax(t,n).then(function(t){var e=btoa(t);return"data:"+function(t){var e=function(t,e){return t.substring(0,e.length)===e};return e(t,"<?xml")||e(t,"<svg")?"image/svg+xml":"image/png"}(t)+";base64,"+e})};var a=[],s=function(t){return a.indexOf(t)<0&&a.push(t),a.indexOf(t)};e.memoize=function(t,e,n){if("object"!==r(n))throw new Error("cacheBucket is not an object");return function(){var r,i=Array.prototype.slice.call(arguments),o=e(i),a=s(t);return n[a]&&n[a][o]?n[a][o]:(r=t.apply(null,i),n[a]=n[a]||{},n[a][o]=r,r)}}},641:function(t,e,n){"use strict";var r=Math.sqrt(50),i=Math.sqrt(10),o=Math.sqrt(2),a=function(t,e,n){var r,i,o,a,c=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=s(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++c<i;)o[c]=(t+c)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++c<i;)o[c]=(t-c)/a;return r&&o.reverse(),o};function s(t,e,n){var a=(e-t)/Math.max(0,n),s=Math.floor(Math.log(a)/Math.LN10),c=a/Math.pow(10,s);return s>=0?(c>=r?10:c>=i?5:c>=o?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(c>=r?10:c>=i?5:c>=o?2:1)}var c=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};var u,l,h=(1===(u=c).length&&(l=u,u=function(t,e){return c(l(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;u(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;u(t[i],e)>0?r=i:n=i+1}return n}}),f=h.right,p=n(591),d=function(t){return function(){return t}},y=function(t){return+t},g=[0,1];function v(t){return t}function m(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:d(isNaN(e)?NaN:.5)}function b(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=m(i,r),o=n(a,o)):(r=m(r,i),o=n(o,a)),function(t){return o(r(t))}}function _(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=m(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=f(t,e,1,r)-1;return o[n](i[n](e))}}function w(){var t,e,n,r,i,o,a=g,s=g,c=p.a,u=v;function l(){var t,e,n,c=Math.min(a.length,s.length);return u!==v&&(t=a[0],e=a[c-1],t>e&&(n=t,t=e,e=n),u=function(n){return Math.max(t,Math.min(e,n))}),r=c>2?_:b,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,c)))(t(u(e)))}return h.invert=function(n){return u(e((o||(o=r(s,a.map(t),p.c)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,y),l()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),c=p.f,l()},h.clamp=function(t){return arguments.length?(u=!!t||v,l()):u!==v},h.interpolate=function(t){return arguments.length?(c=t,l()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}var O=n(610),S=n(622),E=function(t,e,n,a){var s,c=function(t,e,n){var a=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),c=a/s;return c>=r?s*=10:c>=i?s*=5:c>=o&&(s*=2),e<t?-s:s}(t,e,n);switch((a=Object(S.c)(null==a?",f":a)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(e));return null!=a.precision||isNaN(s=Object(S.e)(c,u))||(a.precision=s),Object(S.b)(a,u);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(s=Object(S.f)(c,Math.max(Math.abs(t),Math.abs(e))))||(a.precision=s-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(s=Object(S.d)(c))||(a.precision=s-2*("%"===a.type))}return Object(S.a)(a)};function j(){var t=w()(v,v);return t.copy=function(){return e=t,j().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},O.a.apply(t,arguments),function(t){var e=t.domain;return t.ticks=function(t){var n=e();return a(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return E(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,c=i[o],u=i[a];return u<c&&(r=c,c=u,u=r,r=o,o=a,a=r),(r=s(c,u,n))>0?r=s(c=Math.floor(c/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=s(c=Math.ceil(c*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(c/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(c*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}(t)}n.d(e,"a",function(){return j})},642:function(t,e,n){"use strict";var r=n(563),i=n(627),o=n(582),a=n(643),s=n(644),c=n(645),u=n(646);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=["hydrophobicity-interface-scale","hydrophobicity-octanol-scale","hydrophobicity-scale","isoelectric-point-scale"],g={domain:[-2,2],range:["#ffdd00","#0000FF"]},v=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,p(e).apply(this,arguments))}var n,l,v;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,i["a"]),n=e,v=[{key:"observedAttributes",get:function(){return i.a.observedAttributes.concat("scale","color_range")}}],(l=[{key:"_createSequence",value:function(){this.svg=Object(r.l)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",this._height),this.uniqueID=Math.random().toString(36).substring(7),this.gradient=this.svg.append("defs").append("linearGradient").attr("id","scale-gradient-".concat(this.uniqueID)),this.seq_g=this.svg.append("g").attr("class","background"),this.seq_greadient=this.svg.append("rect").attr("class","seq-gradient").style("pointer-events","none"),this._getCharWidth(),this.trackHighlighter.appendHighlightTo(this.svg),this.refresh()}},{key:"getScaleFromAttribute",value:function(){var t=null;if(y.indexOf(this._scale)>=0)switch(this._scale){case"hydrophobicity-scale":return c;case"hydrophobicity-interface-scale":return a;case"isoelectric-point-scale":return u;case"hydrophobicity-octanol-scale":return s;default:return null}if(/([ILFVMPWHTEQCYASNDRGK]:-?\d+\.?\d*)(,[ILFVMPWHTEQCYASNDRGK]:-?\d+\.?\d*)*/.test(this._scale))try{t=Object(o.b)(this._scale,{keyFormatter:function(t){return t.toUpperCase()},valueFormatter:function(t){return parseFloat(t)}})}catch(t){console.error("Couldn't parse the given scale ".concat(this._scale),t)}return t}},{key:"refresh",value:function(){var t=this;if(this.seq_g){var e=this.getScaleFromAttribute();if(null===e)return void console.error("The attribute scale is not valid.");var n=Object(r.i)();this.colorScale=g,this._color_range&&(this.colorScale=Object(o.a)(this._color_range)),n.domain(this.colorScale.domain).range(this.colorScale.range);var i=this.getSingleBaseWidth(),a=Math.round(Math.max(0,this._displaystart-2)),s=Math.round(Math.min(this.sequence.length,this._displayend+1)),c=this.sequence.slice(a,s).split("").map(function(t,r){var i=t.toUpperCase()in e?e[t.toUpperCase()]:0;return{start:1+a+r,end:1+a+r,aa:t,value:i,colour:n(i)}});this.residues=this.seq_g.selectAll("rect.base_bg").data(i<8?[]:c,function(t){return t.start}),this.residues.enter().append("rect").attr("class","base_bg feature").attr("data-base",function(t){return t.aa}).attr("data-pos",function(t){return t.start}).attr("height",this._height).merge(this.residues).attr("width",i).attr("fill",function(t){return t.colour}).attr("x",function(e){var n=e.start;return t.getXFromSeqPosition(n)}).call(this.bindEvents,this),this.residues.exit().remove();var u=this.gradient.selectAll("stop").data(this.sequence.split(""));u.enter().append("stop").merge(u).attr("offset",function(e,n){return(n+.5)/t.sequence.length}).attr("stop-color",function(t){return n(t.toUpperCase()in e?e[t.toUpperCase()]:0)}),this.gradient.exit().remove(),this.seq_greadient.attr("x",this.getXFromSeqPosition(1)).attr("y",0).attr("height",this._height).attr("width",this.getXFromSeqPosition(this.sequence.length)-this.getXFromSeqPosition(0)).style("opacity",i<8?1:8/i).attr("fill","url(#scale-gradient-".concat(this.uniqueID,")")),this._updateHighlight()}}}])&&h(n.prototype,l),v&&h(n,v),e}();e.a=v},643:function(t){t.exports=JSON.parse('{"I":-0.31,"L":-0.56,"F":-1.13,"V":0.07,"M":-0.23,"P":0.45,"W":-1.85,"H":0.17,"T":0.14,"E":-0.01,"Q":0.58,"C":-0.24,"Y":-0.94,"A":0.17,"S":0.13,"N":0.42,"D":-0.07,"R":0.81,"G":0.01,"K":0.99}')},644:function(t){t.exports=JSON.parse('{"I":-1.12,"L":-1.25,"F":-1.71,"V":-0.46,"M":-0.67,"P":0.14,"W":-2.09,"H":0.11,"T":0.25,"E":0.11,"Q":0.77,"C":-0.02,"Y":-0.71,"A":0.5,"S":0.46,"N":0.85,"D":0.43,"R":1.15,"G":3.63,"K":3.64}')},645:function(t){t.exports=JSON.parse('{"I":-0.81,"L":-0.69,"F":-0.58,"V":-0.53,"M":-0.44,"P":-0.31,"W":-0.24,"H":-0.06,"T":0.11,"E":0.12,"Q":0.19,"C":0.22,"Y":0.23,"A":0.33,"S":0.33,"N":0.43,"D":0.5,"R":1.14,"G":1.61,"K":2.41}')},646:function(t){t.exports=JSON.parse('{"I":6.04,"L":6.04,"F":5.91,"V":6.02,"M":5.74,"P":6.3,"W":5.88,"H":7.64,"T":5.6,"E":3.08,"Q":5.65,"C":5.02,"Y":5.63,"A":6.11,"S":5.68,"N":5.41,"D":2.87,"R":10.76,"G":6.06,"K":9.47}')},647:function(t,e,n){"use strict";var r=n(575),i=n(563);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=s(this,u(e).call(this)))._line=Object(i.g)().x(function(e){return t.getXFromSeqPosition(e.x)-t.getSingleBaseWidth()/2}).y(function(e){return t._yScale(e.y)}),t}var n,o,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,r["b"]),n=e,(o=[{key:"init",value:function(){this._totalsArray=null}},{key:"connectedCallback",value:function(){c(u(e.prototype),"connectedCallback",this).call(this),this._data=void 0,this._height=Number(this.getAttribute("height"))||40,this._yScale=Object(i.i)(),this.init()}},{key:"_createTrack",value:function(){Object(i.l)(this).selectAll("svg").remove(),this.svg=Object(i.l)(this).append("svg").attr("width",this.width).attr("height",this._height),this.trackHighlighter.appendHighlightTo(this.svg),this._initYScale(),this.refresh()}},{key:"_initYScale",value:function(){this._yScale.domain([0,Object(i.h)(this._totalsArray.map(function(t){return t.total}))]).range([this._height,0])}},{key:"refresh",value:function(){this.svg&&(this.svg.selectAll("path").remove(),this.svg.append("path").attr("d",this._line(this._totalsArray.map(function(t,e){return{x:e+1,y:t.diseaseTotal}}))).attr("fill","none").attr("stroke","red").attr("stroke-width","1.5px").attr("stroke-dasharray","0").attr("transform","translate(0,0)"),this.svg.append("path").attr("d",this._line(this._totalsArray.map(function(t,e){return{x:e+1,y:t.total}}))).attr("fill","none").attr("stroke","darkgrey").attr("stroke-width","1px").attr("stroke-dasharray",".5").attr("transform","translate(0,0)"),this._updateHighlight())}},{key:"data",set:function(t){var e=this;this.init(),!t.sequence||t.variants.length<=0||(this._totalsArray=Array(t.sequence.length).fill().map(function(){return{total:0,diseaseTotal:0}}),t.variants.forEach(function(t){(e._totalsArray[t.start].total++,void 0!==t.association)&&(t.association.find(function(t){return!0===t.disease})&&e._totalsArray[t.start].diseaseTotal++)}),this._createTrack())}}])&&a(n.prototype,o),h&&a(n,h),e}();e.a=h},648:function(t){t.exports=JSON.parse('{"sequence":"MLPGLALLLLAAWTARALEVPTDGNAGLLAEPQIAMFCGRLNMHMNVQNGKWDSDPSGTKTCIDTKEGILQYCQEVYPELQITNVVEANQPVTIQNWCKRGRKQCKTHPHFVIPYRCLVGEFVSDALLVPDKCKFLHQERMDVCETHLHWHTVAKETCSEKSTNLHDYGMLLPCGIDKFRGVEFVCCPLAEESDNVDSADAEEDDSDVWWGGADTDYADGSEDKVVEVAEEEEVAEVEEEEADDDEDDEDGDEVEEEAEEPYEEATERTTSIATTTTTTTESVEEVVREVCSEQAETGPCRAMISRWYFDVTEGKCAPFFYGGCGGNRNNFDTEEYCMAVCGSAMSQSLLKTTQEPLARDPVKLPTTAASTPDAVDKYLETPGDENEHAHFQKAKERLEAKHRERMSQVMREWEEAERQAKNLPKADKKAVIQHFQEKVESLEQEAANERQQLVETHMARVEAMLNDRRRLALENYITALQAVPPRPRHVFNMLKKYVRAEQKDRQHTLKHFEHVRMVDPKKAAQIRSQVMTHLRVIYERMNQSLSLLYNVPAVAEEIQDEVDELLQKEQNYSDDVLANMISEPRISYGNDALMPSLTETKTTVELLPVNGEFSLDDLQPWHSFGADSVPANTENEVEPVDARPAADRGLTTRPGSGLTNIKTEEISEVKMDAEFRHDSGYEVHHQKLVFFAEDVGSNKGAIIGLMVGGVVIATVIVITLVMLKKKQYTSIHHGVVEVDAAVTPEERHLSKMQQNGYENPTYKFFEQMQN","variants":[{"accession":"feature1","variant":"V","start":1,"end":1,"color":"orange"},{"accession":"feature2","variant":"C","start":2,"end":2,"color":"#33d"},{"accession":"feature3","variant":"T","start":3,"end":3,"color":"#336"},{"accession":"feature4","variant":"D","start":1,"end":1,"color":"#73d"},{"accession":"feature5","variant":"A","start":25,"end":25,"size":20,"color":"#63e"},{"accession":"feature6","variant":"R","start":770,"color":"#35d"}]}')},649:function(t){t.exports=JSON.parse('[{"accession":"chain_A","locations":[{"fragments":[{"start":45,"end":100,"shape":"helix","fill":"transparent","color":"#f06"},{"start":110,"end":200,"shape":"helix","fill":"transparent","color":"#f06"},{"start":5,"end":15,"shape":"strand","color":"#fc0"},{"start":40,"end":43,"shape":"strand","color":"#fc0"}]}]},{"accession":"chain_D","locations":[{"fragments":[{"start":45,"end":51,"shape":"helix","fill":"transparent","color":"#f06"},{"start":55,"end":77,"shape":"helix","fill":"transparent","color":"#f06"},{"start":5,"end":15,"shape":"strand","color":"#fc0"},{"start":19,"end":26,"shape":"strand","color":"#fc0"}]}]}]')},650:function(t,e,n){"use strict";e.unquoteString=function(t){var e=/^"(.*)"$/,n=/^'(.*)'$/;return e.test(t)?t.replace(e,"$1"):n.test(t)?t.replace(n,"$1"):t},e.rulesForCssText=function(t){var e,n=document.implementation.createHTMLDocument(""),r=document.createElement("style");return r.textContent=t,n.body.appendChild(r),e=r.sheet.cssRules,Array.prototype.slice.call(e)},e.cssRulesToText=function(t){return t.reduce(function(t,e){return t+e.cssText},"")},e.exchangeRule=function(t,n,r){var i=t.indexOf(n);t[i]=e.rulesForCssText(r)[0]},e.changeFontFaceRuleSrc=function(t,n,r){var i="@font-face { font-family: "+n.style.getPropertyValue("font-family")+"; ";n.style.getPropertyValue("font-style")&&(i+="font-style: "+n.style.getPropertyValue("font-style")+"; "),n.style.getPropertyValue("font-weight")&&(i+="font-weight: "+n.style.getPropertyValue("font-weight")+"; "),i+="src: "+r+"}",e.exchangeRule(t,n,i)}},651:function(t,e,n){"use strict";var r=n(575);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).apply(this,arguments))}var n,i,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,r["a"]),n=e,u=[{key:"_filterOutResidueFragmentsOutOfLocation",value:function(t,e){t.locations.forEach(function(t){return t.fragments=t.fragments.filter(function(t){return e.some(function(e){return e.fragments.some(function(e){return t.start>=e.start&&t.end<=e.end})})})}),t.locations=t.locations.filter(function(t){return t.fragments.length})}},{key:"_getAccFromFeature",value:function(t){var e="";return"string"==typeof t?e=t:t.accession&&(e=t.accession),e}}],(i=[{key:"init",value:function(t,e){var n=0;if(this.height={},this.yPos={},this.maxYPos=0,t){this.innerPadding=3;for(var r={},i=0;i<t.length;i++){var o=t[i];this.height[o.accession]=this.expanded?14:16,this.yPos[o.accession]=this._padding,n=this.height[o.accession]+2*this._padding,this.maxYPos=Math.max(this.maxYPos,n),o.accession in r||(r[o.accession]={}),o.residues&&(n=this._initResidues(o.residues,o.accession,o.locations,this.expanded?n:this.yPos[o.accession],i,r,this.expanded))}if(e)for(var a=0;a<e.length;a++){var s=e[a];s.accession in this.height||(this.height[s.accession]=10,this.yPos[s.accession]=(this.expanded?this.maxYPos:this.innerPadding)+this._padding,n+=2*this._padding+(this.expanded?this.height[s.accession]:0),this.maxYPos=Math.max(this.maxYPos,n)),s.accession in r||(r[s.accession]={}),s.residues&&(n=this._initResidues(s.residues,s.accession,s.locations,s.expanded?n:this.yPos[s.accession],a,r,s.expanded))}this.maxYPos+=this._padding}}},{key:"_initResidues",value:function(t,n,r,i,o){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=0;c<t.length;c++){var u=t[c];e._filterOutResidueFragmentsOutOfLocation(u,r),u.accession in a[n]||(a[n][u.accession]={});for(var l=0;l<u.locations.length;l++){var h=u.locations[l].description;h in a[n][u.accession]||(a[n][u.accession][h]={height:s?10:this.height[n]-2*this.innerPadding,yPos:s?this.maxYPos+this._padding:i+this.innerPadding},i=s?this.maxYPos+2*this._padding+10:i),this.height["".concat(u.accession,"_").concat(o,"_").concat(c,"_").concat(l)]=a[n][u.accession][h].height,this.yPos["".concat(u.accession,"_").concat(o,"_").concat(c,"_").concat(l)]=a[n][u.accession][h].yPos,this.maxYPos=Math.max(this.maxYPos,i)}}return s?i:this.maxYPos+2*this._padding}},{key:"getFeatureYPos",value:function(t){var n=e._getAccFromFeature(t);return n in this.yPos?this.yPos[n]:0}},{key:"getFeatureHeight",value:function(t){var n=e._getAccFromFeature(t);return n in this.height?this.height[n]:0}}])&&o(n.prototype,i),u&&o(n,u),e}();function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({value:1},t),r=[],i=!0,o=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;n?n.end<u.start?(r.push(n),n=null,r.push(u)):n.start<u.start&&n.end>=u.end?(r.push({start:n.start,end:u.start-1,value:n.value}),r.push({start:u.start,end:u.end,value:u.value+n.value}),n=u.end===n.end?null:{start:u.end+1,end:n.end,value:n.value}):u.start<n.start&&u.end>n.end?(r.push({start:u.start,end:n.start-1,value:u.value}),r.push({start:n.start,end:n.end,value:u.value+n.value}),r.push({start:n.end+1,end:u.end,value:u.value}),n=null):u.end>=n.start&&u.end<=n.end?(u.start<n.start&&r.push({start:u.start,end:n.start-1,value:u.value}),r.push({start:n.start,end:u.end,value:u.value+n.value}),n=u.end<n.end?{start:u.end+1,end:n.end,value:n.value}:null):n.end>=u.start&&n.end<u.end?(r.push({start:n.start,end:u.start-1,value:n.value}),r.push({start:u.start,end:n.end,value:u.value+n.value}),r.push({start:n.end+1,end:u.end,value:u.value}),n=null):r.push(u):r.push(u)}}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n&&r.push(n),r};function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){g(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=2,S=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,_(e).apply(this,arguments))}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,r["b"]),n=e,o=[{key:"_createResidueGroup",value:function(t){return t.selectAll("g.residues-group").data(function(t){return t.residues?t.residues.map(function(e,n){return y({},e,{feature:t,i:n})}):[]}).enter().append("g").attr("class","residues-group").selectAll("g.residues-locations").data(function(t){return t.locations.map(function(e,n){return y({},e,{accession:t.accession,feature:t.feature,location:e,i:t.i,j:n})})}).enter().append("g").attr("class","residues-locations")}},{key:"observedAttributes",get:function(){return r.b.observedAttributes.concat(["expanded","color"])}},{key:"margin",get:function(){return{top:0,right:10,bottom:0,left:10}}}],(i=[{key:"_createTrack",value:function(){this._layoutObj.expanded=this._expanded,b(_(e.prototype),"_createTrack",this).call(this),this.children_g=null}},{key:"connectedCallback",value:function(){b(_(e.prototype),"connectedCallback",this).call(this),this._expanded=this.hasAttribute("expanded"),this._haveCreatedFeatures=!1}},{key:"attributeChangedCallback",value:function(t,n,r){if("expanded"===t&&n!==r&&this._contributors){var i=!0,o=!1,a=void 0;try{for(var s,c=this._contributors[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){s.value.expanded=!n}}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}b(_(e.prototype),"attributeChangedCallback",this).call(this,t,n,r)}},{key:"getLayout",value:function(){return new u({layoutHeight:this._height,expanded:this._expanded,padding:2})}},{key:"_createResiduePaths",value:function(t){var e=this;return t.selectAll("g.residue").data(function(t){return t.fragments.map(function(e){return y({},e,{accession:t.accession,feature:y({},t.feature,{currentResidue:y({},e,{description:t.location.description})}),location:t.location,k:t.feature.k,i:t.i,j:t.j})})}).enter().append("path").attr("class","feature rectangle residue").attr("d",function(t){return e._featureShape.getFeatureShape(e.getSingleBaseWidth(),e._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle")}).attr("transform",function(t){return"translate(".concat(e.getXFromSeqPosition(t.start),",").concat(O+e._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),")")}).attr("fill",function(t){return e._getFeatureColor(t)}).attr("stroke","transparent").call(this.bindEvents,this)}},{key:"_refreshResiduePaths",value:function(t,e){var n=this,r=new Set(t.data().map(function(t){return"".concat(t.feature.accession,"-").concat(t.location.description)})).size;t.attr("d",function(t){return n._featureShape.getFeatureShape(n.getSingleBaseWidth(),n._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle")}).attr("transform",function(t){return"translate(".concat(n.getXFromSeqPosition(t.start),",").concat(O+n._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),")")}).style("pointer-events",function(t){return e||t.feature&&t.feature.expanded?"auto":"none"}).style("stroke",function(){return e?null:"none"}).style("opacity",function(){return e?null:.8/r}).attr("fill",function(t){return e||t.feature&&t.feature.expanded?n._getFeatureColor(t):"white"})}},{key:"_createFeatures",value:function(){var t=this;if(this._layoutObj.init(this._data,this._contributors),this._data.forEach(function(t,e){return t.k=e}),this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data).enter().append("g").attr("class","feature-group").attr("id",function(t){return"g_".concat(t.accession)}),this.locations=this.featuresG.selectAll("g.location-group").data(function(t){return t.locations.map(function(e){return y({},e,{feature:t})})}).enter().append("g").attr("class","location-group"),this.coverLines=this.locations.selectAll("line.cover").data(function(t){return[t.fragments.reduce(function(e,n){return{start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}},{start:1/0,end:-1/0})]}).enter().append("line").attr("class","cover"),this.features=this.locations.selectAll("path.feature").data(function(t){return t.fragments.map(function(e){return y({},e,{feature:t.feature,fragments:t.fragments})})}).enter().append("path").attr("class",function(e){return"".concat(t._getShape(e)," feature")}).on("click.expanded",function(){t._expanded?t.removeAttribute("expanded"):t.setAttribute("expanded","expanded")}).call(this.bindEvents,this),this.residues_g=e._createResidueGroup(this.featuresG),this.residues_loc=this._createResiduePaths(this.residues_g),this._contributors){this._contributors.forEach(function(t,e){return t.k=e}),this.children_g||(this.children_g=this.svg.append("g").attr("class","children-features")),this.childrenGroup=this.children_g.append("g").attr("class","children-group"),this.childGroup=this.childrenGroup.selectAll("g.child-group").data(this._contributors).enter().append("g").attr("class","child-group");var n=this.childGroup.selectAll("g.child-location-group").data(function(e){return e.expanded=t._expanded,e.locations.map(function(t){return y({},t,{feature:e})})}).enter().append("g").attr("class",function(t,e){return"child-location-group clg-".concat(e)});this.coverLinesChildren=n.selectAll("line.cover").data(function(t){return[t.fragments.reduce(function(e,n){return{start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}},{start:1/0,end:-1/0})]}).enter().append("line").attr("class","cover"),this.featureChildren=n.selectAll("path.child-fragment").data(function(t){return t.fragments.map(function(e){return y({},e,{feature:t.feature,fragments:t.fragments})})}).enter().append("path").attr("class",function(e){return"".concat(t._getShape(e)," child-fragment feature")}).call(this.bindEvents,this).on("click.expanded",function(e){e.feature.expanded=!e.feature.expanded,t.refresh()}),this.child_residues_g=e._createResidueGroup(this.childGroup),this.child_residues_loc=this._createResiduePaths(this.child_residues_g),this._coverage&&this._coverage.length&&this._createCoverage()}this.svg.attr("height",this._layoutObj.maxYPos),this._haveCreatedFeatures=!0}},{key:"_createCoverage",value:function(){this._accession=this._data&&this._data[0]&&this._data[0].accession||"_",this.coverage_mask=this.svg.append("defs").append("mask").attr("id","mask-".concat(this._accession)),this.coverageMaskFragment=this.coverage_mask.selectAll("rect").data(this._coverage).enter().append("rect").attr("y",0).attr("height",this._height)}},{key:"_refreshCoverage",value:function(){var t=this;this.featuresG.attr("mask",this._expanded?null:"url(#mask-".concat(this._accession,")")),this.coverageMaskFragment.attr("x",function(e){return t.getXFromSeqPosition(e.start)}).attr("width",function(e){return t.getSingleBaseWidth()*(e.end-e.start+1)}).attr("fill","white").attr("opacity",function(e){return(e.value/t._contributors.length+.3)/1.3})}},{key:"_refreshFeatures",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new Set(t.data().map(function(t){return t.feature.accession})).size;t.attr("d",function(t){return e._featureShape.getFeatureShape(e.getSingleBaseWidth(),e._layoutObj.getFeatureHeight(t.feature),t.end?t.end-t.start+1:1,n?e._getShape(t.shape?t:t.feature):"rectangle")}).attr("fill",function(t){return n?e._getFeatureColor(t.feature):"white"}).attr("opacity",n?1:.8/r).style("stroke",function(t){return n?e._getFeatureColor(t.feature):"none"}).attr("transform",function(t){return"translate(".concat(e.getXFromSeqPosition(t.start),",").concat(O+e._layoutObj.getFeatureYPos(t.feature),")")}).style("pointer-events",n?"auto":"none")}},{key:"_refreshCoverLine",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.attr("x1",function(t){return e.getXFromSeqPosition(t.start)}).attr("x2",function(t){return e.getXFromSeqPosition(t.end+1)}).attr("y1",function(t){return O+e._layoutObj.getFeatureYPos(t.feature)+e._layoutObj.getFeatureHeight(t.feature)/2}).attr("y2",function(t){return O+e._layoutObj.getFeatureYPos(t.feature)+e._layoutObj.getFeatureHeight(t.feature)/2}).attr("stroke",function(t){return e._getFeatureColor(t.feature)}).attr("visibility",n?"visible":"hidden")}},{key:"refresh",value:function(){var t=this;this._haveCreatedFeatures&&(this._layoutObj.expanded=this._expanded,this._layoutObj.init(this._data,this._contributors),this.height=this._layoutObj.maxYPos,this._refreshCoverLine(this.coverLines),this._refreshFeatures(this.features),this._refreshResiduePaths(this.residues_loc,this._expanded),this._contributors&&(this.childrenGroup.attr("visibility",this._expanded?"visible":"hidden"),this._refreshCoverLine(this.coverLinesChildren,this._expanded),this._refreshFeatures(this.featureChildren,this._expanded),this.child_residues_g.attr("visibility",function(){return t._expanded?"visible":"hidden"}),this._refreshResiduePaths(this.child_residues_loc),this._coverage&&this._coverage.length&&this._refreshCoverage()),this._updateHighlight(),this.svg.attr("height",this._layoutObj.maxYPos))}},{key:"contributors",set:function(t){this._contributors=e.normalizeLocations(t),this._coverage=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];return n&&(r=f({start:1,end:e,value:0},r)),t.forEach(function(t){return t.locations.forEach(function(t){return t.fragments.forEach(function(t){r=f(t,r)})})}),r}(this._contributors,this._length),this._data&&this._createTrack()}},{key:"color",set:function(t){this._color!==t&&(this._color=t,this.refresh())}}])&&v(n.prototype,i),o&&v(n,o),e}();e.a=S},656:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(676),o=n(677);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){o.isString(t)&&(t=_(t));return t instanceof a?t.format():a.prototype.format.call(t)},e.Url=a;var s=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(l),f=["%","/","?",";","#"].concat(h),p=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(678);function _(t,e,n){if(t&&o.isObject(t)&&t instanceof a)return t;var r=new a;return r.parse(t,e,n),r}a.prototype.parse=function(t,e,n){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+r(t));var a=t.indexOf("?"),c=-1!==a&&a<t.indexOf("#")?"?":"#",l=t.split(c);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(c);if(_=_.trim(),!n&&1===t.split("#").length){var w=u.exec(_);if(w)return this.path=_,this.href=_,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var O=s.exec(_);if(O){var S=(O=O[0]).toLowerCase();this.protocol=S,_=_.substr(O.length)}if(n||O||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||O&&v[O]||(_=_.substr(2),this.slashes=!0)}if(!v[O]&&(E||O&&!m[O])){for(var j,x,k=-1,A=0;A<p.length;A++){-1!==(P=_.indexOf(p[A]))&&(-1===k||P<k)&&(k=P)}-1!==(x=-1===k?_.lastIndexOf("@"):_.lastIndexOf("@",k))&&(j=_.slice(0,x),_=_.slice(x+1),this.auth=decodeURIComponent(j)),k=-1;for(A=0;A<f.length;A++){var P;-1!==(P=_.indexOf(f[A]))&&(-1===k||P<k)&&(k=P)}-1===k&&(k=_.length),this.host=_.slice(0,k),_=_.slice(k),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var T=this.hostname.split(/\./),L=(A=0,T.length);A<L;A++){var R=T[A];if(R&&!R.match(d)){for(var N="",F=0,M=R.length;F<M;F++)R.charCodeAt(F)>127?N+="x":N+=R[F];if(!N.match(d)){var D=T.slice(0,A),H=T.slice(A+1),V=R.match(y);V&&(D.push(V[1]),H.unshift(V[2])),H.length&&(_="/"+H.join(".")+_),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=i.toASCII(this.hostname));var I=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+I,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[S])for(A=0,L=h.length;A<L;A++){var W=h[A];if(-1!==_.indexOf(W)){var U=encodeURIComponent(W);U===W&&(U=escape(W)),_=_.split(W).join(U)}}var G=_.indexOf("#");-1!==G&&(this.hash=_.substr(G),_=_.slice(0,G));var K=_.indexOf("?");if(-1!==K?(this.search=_.substr(K),this.query=_.substr(K+1),e&&(this.query=b.parse(this.query)),_=_.slice(0,K)):e&&(this.search="",this.query={}),_&&(this.pathname=_),m[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){I=this.pathname||"";var Y=this.search||"";this.path=I+Y}return this.href=this.format(),this},a.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},a.prototype.resolveObject=function(t){if(o.isString(t)){var e=new a;e.parse(t,!1,!0),t=e}for(var n=new a,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=t[l])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||v[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",g=n.search||"";n.path=y+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||b||n.host&&t.pathname,O=w,S=n.pathname&&n.pathname.split("/")||[],E=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===S[0])),_)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=d;else if(d.length)S||(S=[]),S.pop(),S=S.concat(d),n.search=t.search,n.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(E)n.hostname=n.host=S.shift(),(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift());return n.search=t.search,n.query=t.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var j=S.slice(-1)[0],x=(n.host||t.host||S.length>1)&&("."===j||".."===j)||""===j,k=0,A=S.length;A>=0;A--)"."===(j=S[A])?S.splice(A,1):".."===j?(S.splice(A,1),k++):k&&(S.splice(A,1),k--);if(!w&&!O)for(;k--;k)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),x&&"/"!==S.join("/").substr(-1)&&S.push("");var P,C=""===S[0]||S[0]&&"/"===S[0].charAt(0);E&&(n.hostname=n.host=C?"":S.length?S.shift():"",(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift()));return(w=w||n.host&&S.length)&&!C&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},657:function(t,e){(function(e){t.exports=e}).call(this,{})},674:function(t){t.exports=JSON.parse('{"sequence":"MLPGLALLLLAAWTARALEVPTDGNAGLLAEPQIAMFCGRLNMHMNVQNGKWDSDPSGTKTCIDTKEGILQYCQEVYPELQITNVVEANQPVTIQNWCKRGRKQCKTHPHFVIPYRCLVGEFVSDALLVPDKCKFLHQERMDVCETHLHWHTVAKETCSEKSTNLHDYGMLLPCGIDKFRGVEFVCCPLAEESDNVDSADAEEDDSDVWWGGADTDYADGSEDKVVEVAEEEEVAEVEEEEADDDEDDEDGDEVEEEAEEPYEEATERTTSIATTTTTTTESVEEVVREVCSEQAETGPCRAMISRWYFDVTEGKCAPFFYGGCGGNRNNFDTEEYCMAVCGSAMSQSLLKTTQEPLARDPVKLPTTAASTPDAVDKYLETPGDENEHAHFQKAKERLEAKHRERMSQVMREWEEAERQAKNLPKADKKAVIQHFQEKVESLEQEAANERQQLVETHMARVEAMLNDRRRLALENYITALQAVPPRPRHVFNMLKKYVRAEQKDRQHTLKHFEHVRMVDPKKAAQIRSQVMTHLRVIYERMNQSLSLLYNVPAVAEEIQDEVDELLQKEQNYSDDVLANMISEPRISYGNDALMPSLTETKTTVELLPVNGEFSLDDLQPWHSFGADSVPANTENEVEPVDARPAADRGLTTRPGSGLTNIKTEEISEVKMDAEFRHDSGYEVHHQKLVFFAEDVGSNKGAIIGLMVGGVVIATVIVITLVMLKKKQYTSIHHGVVEVDAAVTPEERHLSKMQQNGYENPTYKFFEQMQN"}')},675:function(t,e,n){var r,i,o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! rasterizeHTML.js - v1.3.0 - 2018-03-18
* http://www.github.com/cburgmer/rasterizeHTML.js
* Copyright (c) 2018 Christoph Burgmer; Licensed MIT */void 0===(
/*! rasterizeHTML.js - v1.3.0 - 2018-03-18
* http://www.github.com/cburgmer/rasterizeHTML.js
* Copyright (c) 2018 Christoph Burgmer; Licensed MIT */
o=this)&&void 0!==window&&(o=window),r=[n(656),n(681),n(682),n(683)],void 0===(i=function(t,e,n,r){return o.rasterizeHTML=(i=e,s=n,c=r,u=function(t){"use strict";var e={},n=[];e.joinUrl=function(e,n){return e?t.resolve(e,n):n},e.getConstantUniqueIdFor=function(t){return n.indexOf(t)<0&&n.push(t),n.indexOf(t)},e.clone=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n};var r=function(t){return function(t){return"object"===a(t)&&null!==t}(t)&&Object.prototype.toString.apply(t).match(/\[object (Canvas|HTMLCanvasElement)\]/i)};return e.parseOptionalParameters=function(t){var n={canvas:null,options:{}};return null==t[0]||r(t[0])?(n.canvas=t[0]||null,n.options=e.clone(t[1])):n.options=e.clone(t[0]),n},e}(t),l=function(t){"use strict";var e={},n=function(t,e,n){var r=t[e];return t[e]=function(){var t=Array.prototype.slice.call(arguments);return n.apply(this,[t,r])},r};return e.baseUrlRespectingXhr=function(e,r){return function(){var i=new e;return n(i,"open",function(e,n){var i=e.shift(),o=e.shift(),a=t.joinUrl(r,o);return n.apply(this,[i,a].concat(e))}),i}},e.finishNotifyingXhr=function(t){var e,r=0,i=0,o=!1,a=new Promise(function(t){e=function(){var e=r-i;e<=0&&o&&t({totalCount:r})}}),s=function(){var o=new t;return n(o,"send",function(t,e){return r+=1,e.apply(this,arguments)}),o.addEventListener("load",function(){i+=1,e()}),o};return s.waitForRequestsToFinish=function(){return o=!0,e(),a},s},e}(u),h=function(t){"use strict";var e={},n=function(t){return Array.prototype.slice.call(t)},r={active:!0,hover:!0,focus:!1,target:!1};return e.fakeUserAction=function(e,n,i){var o=e.querySelector(n),a=":"+i,s="rasterizehtml"+i;o&&(r[i]?t.addClassNameRecursively(o,s):t.addClassName(o,s),t.rewriteCssSelectorWith(e,a,"."+s))},e.persistInputValues=function(t){var e=t.querySelectorAll("input"),r=t.querySelectorAll("textarea"),i=function(t){return"checkbox"===t.type||"radio"===t.type};n(e).filter(i).forEach(function(t){t.checked?t.setAttribute("checked",""):t.removeAttribute("checked")}),n(e).filter(function(t){return!i(t)}).forEach(function(t){t.setAttribute("value",t.value)}),n(r).forEach(function(t){t.textContent=t.value})},e.rewriteTagNameSelectorsToLowerCase=function(e){t.lowercaseCssTypeSelectors(e,t.findHtmlOnlyNodeNames(e))},e}(function(){"use strict";var t={},e=function(t){return Array.prototype.slice.call(t)};t.addClassName=function(t,e){t.className+=" "+e},t.addClassNameRecursively=function(e,n){t.addClassName(e,n),e.parentNode!==e.ownerDocument&&t.addClassNameRecursively(e.parentNode,n)};var n=function(t,n){var r=t.cssText.replace(/^[^\{]+/,""),i=n+" "+r;!function(t,n){var r=t.parentStyleSheet,i=e(r.cssRules).indexOf(t);r.insertRule(n,i+1),r.deleteRule(i)}(t,i)},r=function(t){var n;t.textContent=(n=t.sheet.cssRules,e(n).reduce(function(t,e){return t+e.cssText},""))},i=function(t,i,o){var a=function(t){return"((?:^|[^.#:\\w])|(?=\\W))("+t.join("|")+")(?=\\W|$)"}(i);e(t.querySelectorAll("style")).forEach(function(t){var i,s,c;void 0===t.sheet&&(i=t,s=document.implementation.createHTMLDocument(""),(c=document.createElement("style")).textContent=i.textContent,s.body.appendChild(c),i.sheet=c.sheet);var u=e(t.sheet.cssRules).filter(function(t){return t.selectorText&&new RegExp(a,"i").test(t.selectorText)});u.length&&(u.forEach(function(t){var e=t.selectorText.replace(new RegExp(a,"gi"),function(t,e,n){return e+o(n)});e!==t.selectorText&&n(t,e)}),r(t))})};return t.rewriteCssSelectorWith=function(t,e,n){i(t,[e],function(){return n})},t.lowercaseCssTypeSelectors=function(t,e){i(t,e,function(t){return t.toLowerCase()})},t.findHtmlOnlyNodeNames=function(t){var e,n=t.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r={},i={};do{e=n.currentNode.tagName.toLowerCase(),"http://www.w3.org/1999/xhtml"===n.currentNode.namespaceURI?r[e]=!0:i[e]=!0}while(n.nextNode());return Object.keys(r).filter(function(t){return!i[t]})},t}()),f=function(t,e,n,r){"use strict";var i={executeJavascript:function(t,n){return new Promise(function(i){var o=function(t,e,n,r){var i=t.createElement(e);return i.style.visibility="hidden",i.style.width=n+"px",i.style.height=r+"px",i.style.position="absolute",i.style.top=-1e4-r+"px",i.style.left=-1e4-n+"px",t.getElementsByTagName("body")[0].appendChild(i),i}(r.document,"iframe",n.width,n.height),a=t.outerHTML,s=[],c=n.executeJsTimeout||0,u=function(){var t=o.contentDocument;r.document.getElementsByTagName("body")[0].removeChild(o),i({document:t,errors:s})},l=o.contentWindow.XMLHttpRequest,h=e.finishNotifyingXhr(l),f=e.baseUrlRespectingXhr(h,n.baseUrl);o.onload=function(){var t;(t=c,t>0?new Promise(function(e){setTimeout(e,t)}):Promise.resolve()).then(h.waitForRequestsToFinish).then(u)},o.contentDocument.open(),o.contentWindow.XMLHttpRequest=f,o.contentWindow.onerror=function(t){s.push({resourceType:"scriptExecution",msg:t})},o.contentDocument.write("<!DOCTYPE html>"),o.contentDocument.write(a),o.contentDocument.close()})}},o=function(t,e,n,i,o){var a,s,c,u,l,h,f,p,d=Math.max(t.scrollWidth,t.clientWidth),y=Math.max(t.scrollHeight,t.clientHeight);return e?(h=function(t,e){var n=t.querySelector(e);if(n)return n;if(t.ownerDocument.querySelector(e)===t)return t;throw{message:"Clipping selector not found"}}(t,e),f=h.getBoundingClientRect(),a=f.top,s=f.left,c=f.width,u=f.height):(a=0,s=0,c=d,u=y),p=function(t,e,n,r){return{width:Math.max(t.width*r,e),height:Math.max(t.height*r,n)}}({width:c,height:u},n,i,o),l=r.getComputedStyle(t.ownerDocument.documentElement).fontSize,{left:s,top:a,width:p.width,height:p.height,viewportWidth:d,viewportHeight:y,rootFontSize:l}};i.calculateDocumentContentSize=function(t,e){return new Promise(function(n,i){var a,s=e.zoom||1;a=function(t,e,n){var i=Math.floor(t/n),o=Math.floor(e/n);return function(t,e,n){var r=t.createElement("iframe");return r.style.width=e+"px",r.style.height=n+"px",r.style.visibility="hidden",r.style.position="absolute",r.style.top=-1e4-n+"px",r.style.left=-1e4-e+"px",r.style.borderWidth=0,r.sandbox="allow-same-origin",r.scrolling="no",r}(r.document,i,o)}(e.width,e.height,s),r.document.getElementsByTagName("body")[0].appendChild(a),a.onload=function(){var c,u=a.contentDocument;try{c=o(function(t,e){var n=t.tagName;return e.querySelector(n)}(t,u),e.clip,e.width,e.height,s),n(c)}catch(t){i(t)}finally{r.document.getElementsByTagName("body")[0].removeChild(a)}},a.contentDocument.open(),a.contentDocument.write("<!DOCTYPE html>"),a.contentDocument.write(function(t){var e=t.tagName.toLowerCase();return"html"===e||"body"===e?t.outerHTML:'<body style="margin: 0;">'+t.outerHTML+"</body>"}(t)),a.contentDocument.close()})},i.parseHtmlFragment=function(t){var e=r.document.implementation.createHTMLDocument("");e.documentElement.innerHTML=t;var n=e.querySelector("body").firstChild;if(!n)throw"Invalid source";return n},i.parseHTML=function(t){var e=r.document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t,function(t,e){var n,i,o,a,s=/<html((?:\s+[^>]*)?)>/im.exec(e),c=r.document.implementation.createHTMLDocument("");if(s)for(n="<div"+s[1]+"></div>",c.documentElement.innerHTML=n,o=c.querySelector("div"),i=0;i<o.attributes.length;i++)a=o.attributes[i],t.documentElement.setAttribute(a.name,a.value)}(e,t),e};var a=function(t){try{return n.failOnParseError(t)}catch(t){throw{message:"Invalid source",originalError:t}}};i.validateXHTML=function(t){var e=new DOMParser,n=e.parseFromString(t,"application/xml");a(n)};var s=null,c=function(e,n){return new Promise(function(r,i){var o=new window.XMLHttpRequest,a=t.joinUrl(n.baseUrl,e),c=function(t,e){return"none"===e||"repeated"===e?(null!==s&&"repeated"===e||(s=Date.now()),t+"?_="+s):t}(a,n.cache),u=function(t){i({message:"Unable to load page",originalError:t})};o.addEventListener("load",function(){200===o.status||0===o.status?r(o.responseXML):u(o.statusText)},!1),o.addEventListener("error",function(t){u(t)},!1);try{o.open("GET",c,!0),o.responseType="document",o.send(null)}catch(t){u(t)}})};return i.loadDocument=function(t,e){return c(t,e).then(function(t){return a(t)})},i}(u,l,s,window),p=function(t){"use strict";var e,n={},r=function(t,e){return e?URL.createObjectURL(new Blob([t],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t)},i=function(t){t instanceof Blob&&URL.revokeObjectURL(t)},o='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>',a=function(t){return new Promise(function(e,n){var r=document.createElement("canvas"),i=new Image;i.onload=function(){var t=r.getContext("2d");try{t.drawImage(i,0,0),r.toDataURL("image/png"),e(!0)}catch(t){e(!1)}},i.onerror=n,i.src=t})},s=function(){return new Promise(function(e,n){var s;(function(){if(t.Blob)try{return new Blob(["<b></b>"],{type:"text/xml"}),!0}catch(t){}return!1})()&&t.URL?(s=r(o,!0),a(s).then(function(t){return i(s),!t&&a(r(o,!1)).then(function(t){return t})},function(){return!1})).then(function(t){e(!t)},function(){n()}):e(!1)})},c=function(t){return(void 0===e&&(e=s()),e).then(function(e){return r(t,e)})};return n.renderSvg=function(t){return new Promise(function(e,n){var r,o,a=function(){r&&i(r)};(o=new Image).onload=function(){o.onload=null,o.onerror=null,a(),e(o)},o.onerror=function(){a(),n()},c(t).then(function(t){r=t,o.src=r},n)})},n}(window),d=function(t,e,n,r){"use strict";var i={},o=function(t){var e=Object.keys(t);return e.length?" "+e.map(function(e){return e+'="'+t[e]+'"'}).join(" "):""},a=function(t,n,i){var a=r.serializeToString(t);e.validateXHTML(a);var s,c,u=function(t){var e,n,r,i;return e=Math.round(t.viewportWidth),n=Math.round(t.viewportHeight),r=-t.left,i=-t.top,{x:r,y:i,width:e,height:n}}(n);return c=(s=u).style||"",s.style=c+"float: left;",function(t){t.externalResourcesRequired=!0}(u),'<svg xmlns="http://www.w3.org/2000/svg"'+o(function(t,e){var n=e||1,r={width:t.width,height:t.height,"font-size":t.rootFontSize};return 1!==n&&(r.style="transform:scale("+n+"); transform-origin: 0 0;"),r}(n,i))+'><style scoped="">html::-webkit-scrollbar { display: none; }</style><foreignObject'+o(u)+">"+a+"</foreignObject></svg>"};return i.getSvgForDocument=function(t,e,r){return n.rewriteTagNameSelectorsToLowerCase(t),a(t,e,r)},i.drawDocumentAsSvg=function(t,r){return["hover","active","focus","target"].forEach(function(e){r[e]&&n.fakeUserAction(t,r[e],e)}),e.calculateDocumentContentSize(t,r).then(function(e){return i.getSvgForDocument(t,e,r.zoom)})},i}(0,f,h,i),y=function(t,e,n,r,i,o){"use strict";var a={},s=function(t){return{message:"Error rendering page",originalError:t}},c=function(t){return i.renderSvg(t).then(function(e){return{image:e,svg:t}},function(t){throw s(t)})},u=function(t,e,n){return r.drawDocumentAsSvg(t,n).then(c).then(function(t){return e&&function(t,e){try{e.getContext("2d").drawImage(t,0,0)}catch(t){throw s(t)}}(t.image,e),t})};return a.rasterize=function(r,i,a){var s;return(s=t.clone(a)).inlineScripts=!0===a.executeJs,o.inlineReferences(r,s).then(function(t){return a.executeJs?function(t,r){return e.executeJavascript(t,r).then(function(t){var e=t.document;return n.persistInputValues(e),{document:e,errors:t.errors}})}(r,a).then(function(e){return{element:e.document.documentElement,errors:t.concat(e.errors)}}):{element:r,errors:t}}).then(function(t){return u(t.element,i,a).then(function(e){return{image:e.image,svg:e.svg,errors:t.errors}})})},a}(u,f,h,d,p,c),function(t,e,n){"use strict";var r={},i=function(e){var n,r=function(t,e){var n=t?t.width:300,r=t?t.height:200,i=void 0!==e.width?e.width:n,o=void 0!==e.height?e.height:r;return{width:i,height:o}}(e.canvas,e.options);return(n=t.clone(e.options)).width=r.width,n.height=r.height,n};r.drawDocument=function(){var e=arguments[0],r=Array.prototype.slice.call(arguments,1),o=t.parseOptionalParameters(r),a=e.documentElement?e.documentElement:e;return n.rasterize(a,o.canvas,i(o))};var o=function(t,n,i){var o=e.parseHTML(t);return r.drawDocument(o,n,i)};r.drawHTML=function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1),r=t.parseOptionalParameters(n);return o(e,r.canvas,r.options)};var a=function(n,i,o){return e.loadDocument(n,o).then(function(e){var a=function(e,n,r){var i=document.implementation.createHTMLDocument("");i.replaceChild(e.documentElement,i.documentElement);var o=r?t.clone(r):{};return r.baseUrl||(o.baseUrl=n),{document:i,options:o}}(e,n,o);return r.drawDocument(a.document,i,a.options)})};return r.drawURL=function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1),r=t.parseOptionalParameters(n);return a(e,r.canvas,r.options)},r}(u,f,y));var i,s,c,u,l,h,f,p,d,y}.apply(e,r))||(t.exports=i)},676:function(t,e,n){(function(t,r){var i;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! https://mths.be/punycode v1.4.1 by @mathias */!function(a){var s="object"==o(e)&&e&&!e.nodeType&&e,c="object"==o(t)&&t&&!t.nodeType&&t,u="object"==(void 0===r?"undefined":o(r))&&r;u.global!==u&&u.window!==u&&u.self!==u||(a=u);var l,h,f=2147483647,p=36,d=1,y=26,g=38,v=700,m=72,b=128,_="-",w=/^xn--/,O=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=p-d,x=Math.floor,k=String.fromCharCode;function A(t){throw new RangeError(E[t])}function P(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function C(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+P((t=t.replace(S,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function L(t){return P(t,function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)}).join("")}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function N(t,e,n){var r=0;for(t=n?x(t/v):t>>1,t+=x(t/e);t>j*y>>1;r+=p)t=x(t/j);return x(r+(j+1)*t/(t+g))}function F(t){var e,n,r,i,o,a,s,c,u,l,h,g=[],v=t.length,w=0,O=b,S=m;for((n=t.lastIndexOf(_))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&A("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=w,a=1,s=p;i>=v&&A("invalid-input"),((c=(h=t.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:p)>=p||c>x((f-w)/a))&&A("overflow"),w+=c*a,!(c<(u=s<=S?d:s>=S+y?y:s-S));s+=p)a>x(f/(l=p-u))&&A("overflow"),a*=l;S=N(w-o,e=g.length+1,0==o),x(w/e)>f-O&&A("overflow"),O+=x(w/e),w%=e,g.splice(w++,0,O)}return L(g)}function M(t){var e,n,r,i,o,a,s,c,u,l,h,g,v,w,O,S=[];for(g=(t=T(t)).length,e=b,n=0,o=m,a=0;a<g;++a)(h=t[a])<128&&S.push(k(h));for(r=i=S.length,i&&S.push(_);r<g;){for(s=f,a=0;a<g;++a)(h=t[a])>=e&&h<s&&(s=h);for(s-e>x((f-n)/(v=r+1))&&A("overflow"),n+=(s-e)*v,e=s,a=0;a<g;++a)if((h=t[a])<e&&++n>f&&A("overflow"),h==e){for(c=n,u=p;!(c<(l=u<=o?d:u>=o+y?y:u-o));u+=p)O=c-l,w=p-l,S.push(k(R(l+O%w,0))),c=x(O/w);S.push(k(R(c,0))),o=N(n,v,r==i),n=0,++r}++n,++e}return S.join("")}if(l={version:"1.4.1",ucs2:{decode:T,encode:L},decode:F,encode:M,toASCII:function(t){return C(t,function(t){return O.test(t)?"xn--"+M(t):t})},toUnicode:function(t){return C(t,function(t){return w.test(t)?F(t.slice(4).toLowerCase()):t})}},"object"==o(n(657))&&n(657))void 0===(i=function(){return l}.call(e,n,e,t))||(t.exports=i);else if(s&&c)if(t.exports==s)c.exports=l;else for(h in l)l.hasOwnProperty(h)&&(s[h]=l[h]);else a.punycode=l}(this)}).call(this,n(152)(t),n(110))},677:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===r(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},678:function(t,e,n){"use strict";e.decode=e.parse=n(679),e.encode=e.stringify=n(680)},679:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var h,f,p,d,y=t[l].replace(s,"%20"),g=y.indexOf(n);g>=0?(h=y.substr(0,g),f=y.substr(g+1)):(h=y,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},680:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t){switch(r(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,c){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===r(t)?a(s(t),function(r){var s=encodeURIComponent(i(r))+n;return o(t[r])?a(t[r],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[r]))}).join(e):c?encodeURIComponent(i(c))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},681:function(t,e,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){var t=function(t){var e=t.tagName;return"http://www.w3.org/1999/xhtml"===t.namespaceURI&&(e=e.toLowerCase()),e},e=function(t){return Array.prototype.map.call(t.childNodes,function(t){return r(t)}).join("")},n=function(n,r){var i="<"+t(n);return i+=function(t,e){return Array.prototype.map.call(t.attributes||t.attrs,function(t){return t.name}).indexOf("xmlns")>=0||!e&&t.namespaceURI===t.parentNode.namespaceURI?"":' xmlns="'+t.namespaceURI+'"'}(n,r),Array.prototype.forEach.call(n.attributes||n.attrs,function(t){i+=function(t){var e=t.value;return" "+t.name+'="'+function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}(e)+'"'}(t)}),n.childNodes.length>0?(i+=">",i+=e(n),i+="</"+t(n)+">"):i+="/>",i},r=function(t,r){var i=r&&r.rootNode;return"#document"===t.nodeName||"#document-fragment"===t.nodeName?e(t):t.tagName?n(t,i):"#text"===t.nodeName?function(t){var e=t.nodeValue||t.value||"";return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(t):"#comment"===t.nodeName?function(t){return"\x3c!--"+t.data.replace(/-/g,"&#45;")+"--\x3e"}(t):"#cdata-section"===t.nodeName?function(t){return"<![CDATA["+t.nodeValue+"]]>"}(t):void 0};return{serializeToString:function(t){return r(t,{rootNode:!0}).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}}})?r.apply(e,i):r)||(t.exports=o)},682:function(t,e,n){"use strict";var r=[new RegExp("^<h3[^>]*>This page contains the following errors:</h3><div[^>]*>(.+?)\n?</div>"),new RegExp("^(.+)\n")],i=function(t){var e,n,i,o,a=(e=t,n=new XMLSerializer,Array.prototype.map.call(e.childNodes,function(t){return n.serializeToString(t)}).join(""));for(i=0;i<r.length;i++)if(o=r[i].exec(a))return o[1]};e.failOnParseError=function(t){return function(t){var e;if(null===t)throw new Error("Parse error");var n=function(t){return"parsererror"===t.documentElement.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===t.documentElement.namespaceURI?t.documentElement:("xml"===t.documentElement.tagName||"html"===t.documentElement.tagName)&&t.documentElement.childNodes&&t.documentElement.childNodes.length>0&&"parsererror"===t.documentElement.childNodes[0].nodeName?t.documentElement.childNodes[0]:"html"===t.documentElement.tagName&&t.documentElement.childNodes&&t.documentElement.childNodes.length>0&&"body"===t.documentElement.childNodes[0].nodeName&&t.documentElement.childNodes[0].childNodes&&t.documentElement.childNodes[0].childNodes.length&&"parsererror"===t.documentElement.childNodes[0].childNodes[0].nodeName?t.documentElement.childNodes[0].childNodes[0]:void 0}(t);if(void 0!==n)throw e=i(n)||"Parse error",new Error(e)}(t),t}},683:function(t,e,n){"use strict";var r=n(640),i=n(684),o=n(685),a=n(686),s=n(650),c=function(t){return t.map(function(e,n){var i;return n===t.length-1&&(e={baseUrl:(i=e.baseUrl,r.joinUrl(i,"."))}),JSON.stringify(e)})},u=function(t,e){return!1!==e.cache&&"none"!==e.cache&&e.cacheBucket?r.memoize(t,c,e.cacheBucket):t},l=function(t,e,n){var r=s.rulesForCssText(t);return a.loadCSSImportsForRules(r,e,n).then(function(e){return a.loadAndInlineCSSResourcesForRules(r,n).then(function(n){var i=e.errors.concat(n.errors),o=e.hasChanges||n.hasChanges;return o&&(t=s.cssRulesToText(r)),{hasChanges:o,content:t,errors:i}})})};e.loadAndInlineStyles=function(t,e){var n,i=function(t){var e=t.getElementsByTagName("style");return Array.prototype.filter.call(e,function(t){return!t.attributes.type||"text/css"===t.attributes.type.value})}(t),o=[],a=[];return(n=r.clone(e)).baseUrl=n.baseUrl||r.getDocumentBaseUrl(t),Promise.all(i.map(function(t){return function(t,e,n){var i=t.textContent;return u(l,e)(i,n,e).then(function(e){return e.hasChanges&&(t.childNodes[0].nodeValue=e.content),r.cloneArray(e.errors)})}(t,n,a).then(function(t){o=o.concat(t)})})).then(function(){return o})};var h=function(t,e){return r.ajax(t,e).then(function(t){return{content:t,cssRules:s.rulesForCssText(t)}}).then(function(e){var n=a.adjustPathsOfCssResources(t,e.cssRules);return{content:e.content,cssRules:e.cssRules,hasChanges:n}}).then(function(t){return a.loadCSSImportsForRules(t.cssRules,[],e).then(function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:e.errors}})}).then(function(t){return a.loadAndInlineCSSResourcesForRules(t.cssRules,e).then(function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:t.errors.concat(e.errors)}})}).then(function(t){var e=t.content;return t.hasChanges&&(e=s.cssRulesToText(t.cssRules)),{content:e,errors:t.errors}})};e.loadAndInlineCssLinks=function(t,e){var n=function(t){var e=t.getElementsByTagName("link");return Array.prototype.filter.call(e,function(t){return t.attributes.rel&&"stylesheet"===t.attributes.rel.value&&(!t.attributes.type||"text/css"===t.attributes.type.value)})}(t),i=[];return Promise.all(n.map(function(t){return function(t,e){var n=t.attributes.href.value,i=r.getDocumentBaseUrl(t.ownerDocument),o=r.clone(e);return!o.baseUrl&&i&&(o.baseUrl=i),u(h,e)(n,o).then(function(t){return{content:t.content,errors:r.cloneArray(t.errors)}})}(t,e).then(function(e){var n,r,o,a;n=t,r=e.content+"\n",a=n.parentNode,(r=r.trim())&&((o=n.ownerDocument.createElement("style")).type="text/css",o.appendChild(n.ownerDocument.createTextNode(r)),a.insertBefore(o,n)),a.removeChild(n),i=i.concat(e.errors)},function(t){i.push({resourceType:"stylesheet",url:t.url,msg:"Unable to load stylesheet "+t.url})})})).then(function(){return i})},e.loadAndInlineImages=i.inline,e.loadAndInlineScript=o.inline,e.inlineReferences=function(t,n){var r=[],i=[e.loadAndInlineImages,e.loadAndInlineStyles,e.loadAndInlineCssLinks];return!1!==n.inlineScripts&&i.push(e.loadAndInlineScript),Promise.all(i.map(function(e){return e(t,n).then(function(t){r=r.concat(t)})})).then(function(){return r})}},684:function(t,e,n){"use strict";var r=n(640),i=function(t){return Array.prototype.slice.call(t)};e.inline=function(t,e){var n,o=i(t.getElementsByTagName("img")),a=i(t.getElementsByTagName("image")),s=(n=t.getElementsByTagName("input"),Array.prototype.filter.call(n,function(t){return"image"===t.type})),c=function(t){return t.filter(function(t){var e=null;return t.hasAttribute("src")?e=t.getAttribute("src"):t.hasAttributeNS("http://www.w3.org/1999/xlink","href")?e=t.getAttributeNS("http://www.w3.org/1999/xlink","href"):t.hasAttribute("href")&&(e=t.getAttribute("href")),null!==e&&!r.isDataUri(e)})}(o=(o=o.concat(a)).concat(s));return r.collectAndReportErrors(c.map(function(t){return function(t,e){var n=null;t.hasAttribute("src")?n=t.getAttribute("src"):t.hasAttributeNS("http://www.w3.org/1999/xlink","href")?n=t.getAttributeNS("http://www.w3.org/1999/xlink","href"):t.hasAttribute("href")&&(n=t.getAttribute("href"));var i=r.getDocumentBaseUrl(t.ownerDocument),o=r.clone(e);return!o.baseUrl&&i&&(o.baseUrl=i),r.getDataURIForImageURL(n,o).then(function(t){return t},function(t){throw{resourceType:"image",url:t.url,msg:"Unable to load image "+t.url}})}(t,e).then(function(e){t.attributes.src?t.attributes.src.value=e:t.attributes["xlink:href"]?t.attributes["xlink:href"].value=e:t.attributes.href&&(t.attributes.href.value=e)})}))}},685:function(t,e,n){"use strict";var r=n(640);e.inline=function(t,e){var n=function(t){var e=t.getElementsByTagName("script");return Array.prototype.filter.call(e,function(t){return!!t.attributes.src})}(t);return r.collectAndReportErrors(n.map(function(t){return function(t,e){var n=t.attributes.src.value,i=r.getDocumentBaseUrl(t.ownerDocument),o=r.clone(e);return!o.baseUrl&&i&&(o.baseUrl=i),r.ajax(n,o).catch(function(t){throw{resourceType:"script",url:t.url,msg:"Unable to load script "+t.url}})}(t,e).then(function(e){!function(t,e){t.attributes.removeNamedItem("src"),t.textContent=e.replace(/<\//g,"<\\/")}(t,e)})}))}},686:function(t,e,n){"use strict";var r=n(640),i=n(650),o=n(687),a=n(688),s=function(t,e,n){t.style.setProperty(e,n,t.style.getPropertyPriority(e))},c=function(t){return t.filter(function(t){return t.type===window.CSSRule.STYLE_RULE&&(t.style.getPropertyValue("background-image")||t.style.getPropertyValue("background"))})},u=function(t){var e=[];return t.forEach(function(t){t.style.getPropertyValue("background-image")?e.push({property:"background-image",value:t.style.getPropertyValue("background-image"),rule:t}):t.style.getPropertyValue("background")&&e.push({property:"background",value:t.style.getPropertyValue("background"),rule:t})}),e},l=function(t){return t.filter(function(t){return t.type===window.CSSRule.FONT_FACE_RULE&&t.style.getPropertyValue("src")})},h=function(t){return t.filter(function(t){return t.type===window.CSSRule.IMPORT_RULE&&t.href})},f=function(t){var e=[];return t.forEach(function(t,n){t.url&&!r.isDataUri(t.url)&&e.push(n)}),e},p=function(t){var e=[];return t.forEach(function(t,n){t.url&&!r.isDataUri(t.url)&&e.push(n)}),e};e.adjustPathsOfCssResources=function(t,e){var n=c(e),d=u(n),y=!1;return d.forEach(function(e){var n,i=o.parse(e.value),a=f(i);a.length>0&&(a.forEach(function(e){var n=i[e].url,o=r.joinUrl(t,n);i[e].url=o}),n=o.serialize(i),s(e.rule,e.property,n),y=!0)}),l(e).forEach(function(n){var o,s,c=n.style.getPropertyValue("src");try{o=a.parse(c)}catch(t){return}(s=p(o)).length>0&&(s.forEach(function(e){var n=o[e].url,i=r.joinUrl(t,n);o[e].url=i}),i.changeFontFaceRuleSrc(e,n,a.serialize(o)),y=!0)}),h(e).forEach(function(n){var o=n.href,a=r.joinUrl(t,o);i.exchangeRule(e,n,"@import url("+a+");"),y=!0}),y};var d=function(t,e,n){var r=t.indexOf(e);t.splice(r,1),n.forEach(function(e,n){t.splice(r+n,0,e)})};e.loadCSSImportsForRules=function(t,n,o){var a=h(t),s=[],c=!1;return Promise.all(a.map(function(a){return function(t,n,o,a){var s,c=n.href;return c=i.unquoteString(c),s=r.joinUrl(a.baseUrl,c),o.indexOf(s)>=0?(d(t,n,[]),Promise.resolve([])):(o.push(s),r.ajax(c,a).then(function(r){var s=i.rulesForCssText(r);return e.loadCSSImportsForRules(s,o,a).then(function(r){return e.adjustPathsOfCssResources(c,s),d(t,n,s),r.errors})},function(t){throw{resourceType:"stylesheet",url:t.url,msg:"Unable to load stylesheet "+t.url}}))}(t,a,n,o).then(function(t){s=s.concat(t),c=!0},function(t){s.push(t)})})).then(function(){return{hasChanges:c,errors:s}})};var y=function(t,e){var n=c(t),i=u(n),a=[],l=!1;return Promise.all(i.map(function(t){return function(t,e){var n=o.parse(t),i=f(n),a=!1;return r.collectAndReportErrors(i.map(function(t){var i=n[t].url;return r.getDataURIForImageURL(i,e).then(function(e){n[t].url=e,a=!0},function(t){throw{resourceType:"backgroundImage",url:t.url,msg:"Unable to load background-image "+t.url}})})).then(function(t){return{backgroundValue:o.serialize(n),hasChanges:a,errors:t}})}(t.value,e).then(function(e){e.hasChanges&&(s(t.rule,t.property,e.backgroundValue),l=!0),a=a.concat(e.errors)})})).then(function(){return{hasChanges:l,errors:a}})},g=function(t,e){var n=l(t),o=[],s=!1;return Promise.all(n.map(function(n){return function(t,e){var n,i,o=!1;try{n=a.parse(t)}catch(t){n=[]}return i=p(n),r.collectAndReportErrors(i.map(function(t){var i=n[t],a=i.format||"woff";return r.binaryAjax(i.url,e).then(function(t){var e=btoa(t);i.url="data:font/"+a+";base64,"+e,o=!0},function(t){throw{resourceType:"fontFace",url:t.url,msg:"Unable to load font-face "+t.url}})})).then(function(t){return{srcDeclarationValue:a.serialize(n),hasChanges:o,errors:t}})}(n.style.getPropertyValue("src"),e).then(function(e){e.hasChanges&&(i.changeFontFaceRuleSrc(t,n,e.srcDeclarationValue),s=!0),o=o.concat(e.errors)})})).then(function(){return{hasChanges:s,errors:o}})};e.loadAndInlineCSSResourcesForRules=function(t,e){var n=!1,r=[];return Promise.all([y,g].map(function(i){return i(t,e).then(function(t){n=n||t.hasChanges,r=r.concat(t.errors)})})).then(function(){return{hasChanges:n,errors:r}})}},687:function(t,e,n){"use strict";var r=n(650);e.extractCssUrl=function(t){var e,n=/^url\(("[^"]+"|'[^']+'|[^\)]+)\)/;if(!n.test(t))throw new Error("Invalid url");return e=n.exec(t)[1],r.unquoteString(e.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"))};e.parse=function(t){return function(t){var e,n="(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+)",r="(?:\\s*"+n+")+",i=new RegExp(r,"g"),o=[],a=function(t){var e,r=new RegExp(n,"g"),i=[];for(e=r.exec(t);e;)i.push(e[1]),e=r.exec(t);return i};if(t.match(new RegExp("^\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+)(?:\\s*,\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+))*\\s*$"))){for(e=i.exec(t);e;)o.push(a(e[0])),e=i.exec(t);return o}return[]}(t).map(function(t){var n=function(t){var n;for(n=0;n<t.length;n++)try{return{url:e.extractCssUrl(t[n]),idx:n}}catch(t){}}(t);return n?{preUrl:t.slice(0,n.idx),url:n.url,postUrl:t.slice(n.idx+1)}:{preUrl:t}})},e.serialize=function(t){return t.map(function(t){var e=[].concat(t.preUrl);return t.url&&e.push('url("'+t.url+'")'),t.postUrl&&(e=e.concat(t.postUrl)),e.join(" ")}).join(", ")}},688:function(t,e,n){var r,i,o,a,s;function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s=function(){return function t(e,n,r){function i(s,c){if(!n[s]){if(!e[s]){if(!c&&("function"==typeof a&&a))return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof a&&a,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";function r(t,e,n,i){this.message=t,this.expected=e,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(r,Error),r.buildMessage=function(t,e){var n={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}return"Expected "+function(t){var e,r,i,o=new Array(t.length);for(e=0;e<t.length;e++)o[e]=(i=t[e],n[i.type](i));if(o.sort(),o.length>0){for(e=1,r=1;e<o.length;e++)o[e-1]!==o[e]&&(o[r]=o[e],r++);o.length=r}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(e)+" found."},e.exports={SyntaxError:r,parse:function(e,n){n=void 0!==n?n:{};var i,o={},a={start:W},s=W,c="",u=function(){return[]},l=",",h=M(",",!1),f=function(t,e){return[t].concat(e)},p=function(t){return[t]},d=function(t,e){return{url:t,format:e}},y=function(t){return{url:t}},g="url(",v=M("url(",!1),m=")",b=M(")",!1),_=function(t){return t},w="format(",O=M("format(",!1),S="local(",E=M("local(",!1),j=function(t){return{local:t}},x=/^[^)]/,k=D([")"],!0,!1),A=function(t){return z.extractValue(t.join(""))},P=/^[ \t\r\n\f]/,C=D([" ","\t","\r","\n","\f"],!1,!1),T=0,L=[{line:1,column:1}],R=0,N=[],F=0;if("startRule"in n){if(!(n.startRule in a))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=a[n.startRule]}function M(t,e){return{type:"literal",text:t,ignoreCase:e}}function D(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function H(t){var n,r=L[t];if(r)return r;for(n=t-1;!L[n];)n--;for(r={line:(r=L[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return L[t]=r,r}function V(t,e){var n=H(t),r=H(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function I(t){T<R||(T>R&&(R=T,N=[]),N.push(t))}function q(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function W(){var t,n;return(t=function t(){var n,r,i,a,s,c;if(n=T,(r=U())!==o){for(i=[],a=Y();a!==o;)i.push(a),a=Y();if(i!==o)if(44===e.charCodeAt(T)?(a=l,T++):(a=o,0===F&&I(h)),a!==o){for(s=[],c=Y();c!==o;)s.push(c),c=Y();s!==o&&(c=t())!==o?(r=f(r,c),n=r):(T=n,n=o)}else T=n,n=o;else T=n,n=o}else T=n,n=o;return n===o&&(n=T,(r=U())!==o&&(r=p(r)),n=r),n}())===o&&(t=T,(n=c)!==o&&(n=u()),t=n),t}function U(){var t;return(t=function(){var t,n,r,i;if(t=T,(n=G())!==o){if(r=[],(i=Y())!==o)for(;i!==o;)r.push(i),i=Y();else r=o;r!==o&&(i=function(){var t,n,r,i;return t=T,e.substr(T,7)===w?(n=w,T+=7):(n=o,0===F&&I(O)),n!==o&&(r=K())!==o?(41===e.charCodeAt(T)?(i=m,T++):(i=o,0===F&&I(b)),i!==o?(n=_(r),t=n):(T=t,t=o)):(T=t,t=o),t}())!==o?(n=d(n,i),t=n):(T=t,t=o)}else T=t,t=o;return t===o&&(t=T,(n=G())!==o&&(n=y(n)),t=n),t}())===o&&(t=function(){var t,n,r,i;return t=T,e.substr(T,6)===S?(n=S,T+=6):(n=o,0===F&&I(E)),n!==o&&(r=K())!==o?(41===e.charCodeAt(T)?(i=m,T++):(i=o,0===F&&I(b)),i!==o?(n=j(r),t=n):(T=t,t=o)):(T=t,t=o),t}()),t}function G(){var t,n,r,i;return t=T,e.substr(T,4)===g?(n=g,T+=4):(n=o,0===F&&I(v)),n!==o&&(r=K())!==o?(41===e.charCodeAt(T)?(i=m,T++):(i=o,0===F&&I(b)),i!==o?t=n=_(r):(T=t,t=o)):(T=t,t=o),t}function K(){var t,n;if(T,t=[],x.test(e.charAt(T))?(n=e.charAt(T),T++):(n=o,0===F&&I(k)),n!==o)for(;n!==o;)t.push(n),x.test(e.charAt(T))?(n=e.charAt(T),T++):(n=o,0===F&&I(k));else t=o;return t!==o&&(t=A(t)),t}function Y(){var t;return P.test(e.charAt(T))?(t=e.charAt(T),T++):(t=o,0===F&&I(C)),t}var z=t("../util");if((i=s())!==o&&T===e.length)return i;throw i!==o&&T<e.length&&I({type:"end"}),q(N,R<e.length?e.charAt(R):null,R<e.length?V(R,R+1):V(R,R))}}},{"../util":3}],2:[function(t,e,n){var r=t("./grammar");n.SyntaxError=function(t,e){this.message=t,this.offset=e},n.parse=function(t){try{return r.parse(t)}catch(t){throw new n.SyntaxError(t.message,t.offset)}},n.serialize=function(t){return t.map(function(t){var e;return t.url?(e='url("'+t.url+'")',t.format&&(e+=' format("'+t.format+'")')):e='local("'+t.local+'")',e}).join(", ")}},{"./grammar":1}],3:[function(t,e,n){n.extractValue=function(t){return e=function(t){return t.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1")}(t),r=/^'(.*)'$/,(n=/^"(.*)"$/).test(e)?e.replace(n,"$1"):r.test(e)?e.replace(r,"$1"):e;var e,n,r}},{}]},{},[2])(2)},"object"===c(e)&&void 0!==t?t.exports=s():(i=[],void 0===(o="function"==typeof(r=s)?r.apply(e,i):r)||(t.exports=o))}}]);