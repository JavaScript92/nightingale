(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{310:function(t,e,n){"use strict";var r=n(324),i=n(314);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a="[object Symbol]";e.a=function(t){return"symbol"==o(t)||Object(i.a)(t)&&Object(r.a)(t)==a}},311:function(t,e,n){"use strict";var r=n(310),i=1/0;e.a=function(t){if("string"==typeof t||Object(r.a)(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},317:function(t,e,n){"use strict";var r=n(309),i=n(310);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.a=function(t,e){if(Object(r.a)(t))return!1;var n=o(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(i.a)(t))||s.test(t)||!a.test(t)||null!=e&&t in Object(e)}},319:function(t,e,n){"use strict";e.a=function(t,e){window.customElements.get(t)||window.customElements.define(t,e)}},323:function(t,e,n){"use strict";var r=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var c=a[t?s:++i];if(!1===n(o[c],c,o))break}return e}}(),i=n(320);var o=function(t,e){return t&&r(t,e,i.a)},a=n(318);var s=function(t,e){return function(n,r){if(null==n)return n;if(!Object(a.a)(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}(o);e.a=s},326:function(t,e,n){"use strict";var r=n(327);e.a=function(t,e,n){var i=null==t?void 0:Object(r.a)(t,e);return void 0===i?n:i}},327:function(t,e,n){"use strict";var r=n(330),i=n(311);e.a=function(t,e){for(var n=0,o=(e=Object(r.a)(e,t)).length;null!=t&&n<o;)t=t[Object(i.a)(e[n++])];return n&&n==o?t:void 0}},328:function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},330:function(t,e,n){"use strict";var r=n(309),i=n(317),o=n(349),a="Expected a function";function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(a);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(s.Cache||o.a),n}s.Cache=o.a;var c=s,u=500;var l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/\\(\\)?/g,f=function(t){var e=c(t,function(t){return n.size===u&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(l,function(t,n,r,i){e.push(r?i.replace(h,"$1"):n||t)}),e}),p=n(321),d=n(334),y=n(310),b=1/0,g=p.a?p.a.prototype:void 0,v=g?g.toString:void 0;var m=function t(e){if("string"==typeof e)return e;if(Object(r.a)(e))return Object(d.a)(e,t)+"";if(Object(y.a)(e))return v?v.call(e):"";var n=e+"";return"0"==n&&1/e==-b?"-0":n};var _=function(t){return null==t?"":m(t)};e.a=function(t,e){return Object(r.a)(t)?t:Object(i.a)(t,e)?[t]:f(_(t))}},331:function(t,e,n){"use strict";var r=n(312),i=n(356);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,f(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,t)})(t)}function l(t,e,n){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=f(e).call(this),(t=!r||"object"!==o(r)&&"function"!=typeof r?c(n):r)._updateScaleDomain=t._updateScaleDomain.bind(c(c(t))),t._initZoom=t._initZoom.bind(c(c(t))),t.zoomed=t.zoomed.bind(c(c(t))),t._applyZoomTranslation=t.applyZoomTranslation.bind(c(c(t)));var i=!1;return t.applyZoomTranslation=function(){i||(i=!0,requestAnimationFrame(function(){i=!1,t._applyZoomTranslation()}))},t._onResize=t._onResize.bind(c(c(t))),t._listenForResize=t._listenForResize.bind(c(c(t))),t}var n,l,p;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,u(HTMLElement)),n=e,p=[{key:"observedAttributes",get:function(){return["displaystart","displayend","length"]}}],(l=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._length=this.getAttribute("length")?parseFloat(this.getAttribute("length")):0,this._displaystart=this.getAttribute("displaystart")?parseFloat(this.getAttribute("displaystart")):1,this._displayend=this.getAttribute("displayend")?parseFloat(this.getAttribute("displayend")):this.width,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this._initZoom(),this._listenForResize(),this.addEventListener("error",function(t){throw t})}},{key:"disconnectedCallback",value:function(){this._ro?this._ro.unobserve(this):window.removeEventListener("resize",this._onResize)}},{key:"getWidthWithMargins",value:function(){return this.width-this.margin.left-this.margin.right}},{key:"_updateScaleDomain",value:function(){this.xScale=Object(r.g)().domain([1,this._length+1]).range([0,this.getWidthWithMargins()])}},{key:"_initZoom",value:function(){this._zoom=Object(r.k)().scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]).on("zoom",this.zoomed)}},{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n){var r=parseFloat(n);this["_".concat(t)]=isNaN(r)?n:r,"length"===t&&(this._updateScaleDomain(),this._originXScale=this.xScale.copy()),this.applyZoomTranslation()}}},{key:"zoomed",value:function(){if(this.xScale=r.e.transform.rescaleX(this._originXScale),!this.dontDispatch){var t=a(this.xScale.domain(),2),e=t[0],n=t[1];n--,this.dispatchEvent(new CustomEvent("change",{detail:{displaystart:Math.max(1,e),displayend:Math.min(this.length,n)},bubbles:!0,cancelable:!0}))}}},{key:"applyZoomTranslation",value:function(){if(this.svg&&this._originXScale){var t=Math.max(1,this.length/(1+this._displayend-this._displaystart)),e=-this._originXScale(this._displaystart);this.dontDispatch=!0,this.svg.call(this.zoom.transform,r.l.scale(t).translate(e,0)),this.dontDispatch=!1,this.refresh()}}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._updateScaleDomain(),this._originXScale=this.xScale.copy(),this.svg&&this.svg.attr("width",this.width),this._zoom.scaleExtent([1,1/0]).translateExtent([[0,0],[this.getWidthWithMargins(),0]]),this.applyZoomTranslation()}},{key:"_listenForResize",value:function(){this._ro=new i.a(this._onResize),this._ro.observe(this)}},{key:"getXFromSeqPosition",value:function(t){return this.margin.left+this.xScale(t)}},{key:"getSingleBaseWidth",value:function(){return this.xScale(2)-this.xScale(1)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"length",set:function(t){this._length=t},get:function(){return this._length}},{key:"xScale",get:function(){return this._xScale},set:function(t){this._xScale=t}},{key:"zoom",get:function(){return this._zoom}},{key:"svg",set:function(t){this._svg=t,t.call(this._zoom),this.applyZoomTranslation()},get:function(){return this._svg}},{key:"isManaged",get:function(){return!0}},{key:"margin",get:function(){return{top:10,right:10,bottom:10,left:10}}}])&&s(n.prototype,l),p&&s(n,p),e}(),d=function(){customElements.define("protvista-zoomable",p)};window.customElements?d():document.addEventListener("WebComponentsReady",function(){d()});e.a=p},336:function(t,e,n){"use strict";var r=n(312),i=n(338);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"isContinuous",value:function(t){return"bridge"!==type.toLowerCase()}}],(n=[{key:"getFeatureShape",value:function(t,e,n,r){return r=r||"rectangle",this._ftLength=n,this._ftHeight=e,this._ftWidth=t*n,"function"!=typeof this["_"+r]&&(r="rectangle"),this["_"+r]()}},{key:"_rectangle",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+"Z"}},{key:"_roundRectangle",value:function(){return"M6,0h"+(this._ftWidth-12)+",0a6,6 0 0 1 6,6v"+(this._ftHeight-12)+"a6,6 0 0 1 "+-6+",6h"+(12-this._ftWidth)+"a6,6 0 0 1 "+-6+","+-6+"v"+(12-this._ftHeight)+"a6,6 0 0 1 6,"+-6+"Z"}},{key:"_bridge",value:function(){return 1!==this._ftLength?"M0,"+this._ftHeight+"L0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L"+this._ftWidth+",2L0,2Z":"M0,"+this._ftHeight+"L0,"+this._ftHeight/2+"L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth/2+",0L"+this._ftWidth/2+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight/2+"L"+this._ftWidth+","+this._ftHeight+"Z"}},{key:"_getMiddleLine",value:function(t){return"M0,"+t+"L"+this._ftWidth+","+t+"Z"}},{key:"_diamond",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(t+5)+",5L"+t+",10L"+(t-5)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth):e+"Z"}},{key:"_chevron",value:function(){var t=this._ftWidth/2,e="M"+t+",5L"+(5+t)+",0L"+(5+t)+",5L"+t+",10L"+(-5+t)+",5L"+(-5+t)+",0";return 1!==this._ftLength?e+"L"+t+",5"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_catFace",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",0L"+(-5+t)+",6L"+(-2+t)+",10L"+(2+t)+",10L"+(5+t)+",6L"+(5+t)+",0L"+(2+t)+",4L"+(-2+t)+",4";return 1!==this._ftLength?e+"M"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_triangle",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(5+t)+",10L"+(-5+t)+",10";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_wave",value:function(){var t=this._ftWidth/2,e="M"+(-5+t)+",5A2.5,5 0 1,1 "+t+",5A2.5,5 0 1,0 "+(5+t)+",5";return 1!==this._ftLength?e+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getPolygon",value:function(t){for(var e="M ",n=this._ftWidth/2,r=0;r<t;r++)e+=5*Math.cos(2*Math.PI*r/t)+n+","+(5*Math.sin(2*Math.PI*r/t)+5)+" ";return 1!==this._ftLength?e+" "+(5*Math.cos(0)+n)+","+(5*Math.sin(0)+5)+" "+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_hexagon",value:function(){return this._getPolygon(6)}},{key:"_pentagon",value:function(){return this._getPolygon(5)}},{key:"_circle",value:function(){var t=this._ftWidth/2,e=Math.sqrt(10/Math.PI),n="M"+t+",0A"+e+","+e+" 0 1,1 "+t+",10A"+e+","+e+" 0 1,1 "+t+",0";return 1!==this._ftLength?n+this._getMiddleLine(5,this._ftWidth)+"Z":n+"Z"}},{key:"_arrow",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-1+t)+",0L"+(-5+t)+",4L"+(-1+t)+","+this._ftHeight+"L"+t+","+this._ftHeight+"L"+(4+t)+",4";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_doubleBar",value:function(){var t=this._ftWidth/2,e="M"+t+",0L"+(-5+t)+",10L"+t+",10L"+(5+t)+",0";return 1!==this._ftLength?e+"L"+t+",0"+this._getMiddleLine(5,this._ftWidth)+"Z":e+"Z"}},{key:"_getBrokenEnd",value:function(){var t=this._ftHeight/4;return"L"+(this._ftWidth-t)+","+t+"L"+this._ftWidth+","+2*t+"L"+(this._ftWidth-t)+","+3*t+"L"+this._ftWidth+","+this._ftHeight}},{key:"_getBrokenStart",value:function(){var t=this._ftHeight/4;return"L"+t+","+3*t+"L0,"+2*t+"L"+t+","+t}},{key:"_discontinuosStart",value:function(){return"M0,0L"+this._ftWidth+",0L"+this._ftWidth+","+this._ftHeight+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuos",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+this._getBrokenStart()+"Z"}},{key:"_discontinuosEnd",value:function(){return"M0,0L"+this._ftWidth+",0"+this._getBrokenEnd()+"L0,"+this._ftHeight+"Z"}}])&&o(e.prototype,n),r&&o(e,r),t}(),s=n(380),c=n(328),u=n(340),l=n(323);var h=function(t,e){var n;return Object(l.a)(t,function(t,r,i){return!(n=e(t,r,i))}),!!n},f=n(309),p=n(333),d=n(318),y=n(337),b=n(316);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var v=function(t,e,n){if(!Object(b.a)(n))return!1;var r=g(e);return!!("number"==r?Object(d.a)(n)&&Object(y.a)(e,n.length):"string"==r&&e in n)&&Object(p.a)(n[e],t)};var m=function(t,e,n){var r=Object(f.a)(t)?c.a:h;return n&&v(t,e,n)&&(e=void 0),r(t,Object(u.a)(e,3))};function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=function(){function t(e){e.features;var n=e.layoutHeight,r=e.padding,i=void 0===r?1:r,o=e.minHeight,a=void 0===o?17:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._padding=i,this._minHeight=a,this._layoutHeight=n}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._features=t}},{key:"getFeatureYPos",value:function(t){return Math.min(this._layoutHeight,this._minHeight)}},{key:"getFeatureHeight",value:function(t){return Math.min(this._layoutHeight,this._minHeight)}}])&&_(e.prototype,n),r&&_(e,r),t}();function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),t}var P=function(){function t(){k(this,t),this._rowFeatures=[]}return A(t,[{key:"_featureOverlap",value:function(t,e,n,r){var i=Number(t.start)>=Number(e.start)&&Number(t.start)<=Number(r),o=Number(n)>=Number(e.start)&&Number(n)<=Number(r);return i||o}},{key:"_dOverlap",value:function(t,e,n,r){var i=Number(e.start)>=Number(t.start)&&Number(e.start)<=Number(n),o=Number(r)>=Number(t.start)&&Number(r)<=Number(n);return i||o}},{key:"_addAbsoluteLimits",value:function(t){var e=t.locations.reduce(function(t,e){return t.concat(e.fragments)},[]).reduce(function(t,e){return{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)}},{start:Number.POSITIVE_INFINITY,end:Number.NEGATIVE_INFINITY});t.start=e.start,t.end=e.end}},{key:"containsOverlap",value:function(t){var e=this;return this._addAbsoluteLimits(Object.assign(t)),m(this._rowFeatures,function(n){e._addAbsoluteLimits(Object.assign(n));var r=t.end?t.end:t.start,i=n.end?n.end:n.start;return e._featureOverlap(t,n,r,i)||e._dOverlap(t,n,r,i)})}},{key:"addFeature",value:function(t){this._rowFeatures.push(t)}}]),t}(),x=function(t){function e(t){var n;return k(this,e),(n=O(this,S(e).call(this,t)))._rowHeight=0,n._rows=[],n._minHeight=15,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(e,w),A(e,[{key:"init",value:function(t){var e=this;this._features=t,Object(s.a)(this._features,function(t){if(!m(e._rows,function(e){if(!e.containsOverlap(t))return e.addFeature(t),!0})){var n=new P;n.addFeature(t),e._rows.push(n)}}),this._rowHeight=Math.min(this._layoutHeight/this._rows.length,this._minHeight)-2*this._padding}},{key:"getFeatureYPos",value:function(t){var e,n=this,r=this._layoutHeight/this._rows.length>this._minHeight?(this._layoutHeight-this._rows.length*this._minHeight)/2:0;return Object(s.a)(this._rows,function(i,o){Object(s.a)(i._rowFeatures,function(i){i===t&&(e=o*(n._rowHeight+2*n._padding)+r)})}),e}},{key:"getFeatureHeight",value:function(){return this._rowHeight}}]),e}(),C=n(331),T={chain:{label:"Chain",tooltip:"(aka mature region). This describes the extent of a polypeptide chain in the mature protein following processing",shape:"rectangle",color:"#CC9933"},transit:{label:"Transit peptide",tooltip:"This describes the extent of a transit peptide",shape:"rectangle",color:"#009966"},init_met:{label:"Initiator methionine",tooltip:"This indicates that the initiator methionine is cleaved from the mature protein",shape:"arrow",color:"#996633"},propep:{label:"Propeptide",tooltip:"Part of a protein that is cleaved during maturation or activation",shape:"rectangle",color:"#99CCCC"},peptide:{label:"Peptide",tooltip:"The position and length of an active peptide in the mature protein",shape:"rectangle",color:"#006699"},signal:{label:"Signal peptide",tooltip:"N-terminal signal peptide",shape:"rectangle",color:"#CC0033"},helix:{label:"Helix",tooltip:"The positions of experimentally determined helical regions",shape:"rectangle",color:"#FF0066"},strand:{label:"Beta strand",tooltip:"The positions of experimentally determined beta strands",shape:"rectangle",color:"#FFCC00"},turn:{label:"Turn",tooltip:"The positions of experimentally determined hydrogen-bonded turns",shape:"rectangle",color:"#0571AF"},disulfid:{label:"Disulfide bond",tooltip:"The positions of cysteine residues participating in disulphide bonds",shape:"bridge",color:"#23B14D"},crosslnk:{label:"Cross-link",tooltip:"Covalent linkages of various types formed between two proteins or between two parts of the same protein",shape:"bridge",color:"#FF6600"},region:{label:"Region",tooltip:"Regions in multifunctional enzymes or fusion proteins, or characteristics of a region, e.g., protein-protein interactions mediation",shape:"rectangle",color:"#B33E00"},coiled:{label:"Coiled coil",tooltip:"Coiled coils are built by two or more alpha-helices that wind around each other to form a supercoil",shape:"rectangle",color:"#006699"},motif:{label:"Motif",tooltip:"Short conserved sequence motif of biological significance",shape:"rectangle",color:"#402060"},repeat:{label:"Repeat",tooltip:"Repeated sequence motifs or repeated domains within the protein",shape:"rectangle",color:"#9900FF"},ca_bind:{label:"Calcium binding",tooltip:"Calcium-binding regions, such as the EF-hand motif",shape:"rectangle",color:"#FF3399"},dna_bind:{label:"DNA binding",tooltip:"DNA-binding domains such as AP2/ERF domain, the ETS domain, the Fork-Head domain, the HMG box and the Myb domain",shape:"rectangle",color:"#009933"},domain:{label:"Domain",tooltip:"Specific combination of secondary structures organized into a characteristic three-dimensional structure or fold",shape:"rectangle",color:"#9999FF"},zn_fing:{label:"Zinc finger",tooltip:"Small, functional, independently folded domain that coordinates one or more zinc ions",shape:"rectangle",color:"#990066"},np_bind:{label:"Nucleotide binding",tooltip:"(aka flavin-binding). Region in the protein which binds nucleotide phosphates",shape:"rectangle",color:"#FF9900"},metal:{label:"Metal binding",tooltip:"Binding site for a metal ion",shape:"diamond",color:"#009900"},site:{label:"Site",tooltip:"Any interesting single amino acid site on the sequence",shape:"chevron",color:"#660033"},binding:{label:"Binding site",tooltip:"Binding site for any chemical group (co-enzyme, prosthetic group, etc.)",shape:"rectangle",color:"#catFace"},act_site:{label:"Active site",tooltip:"Amino acid(s) directly involved in the activity of an enzyme",shape:"circle",color:"#FF6666"},mod_res:{label:"Modified residue",tooltip:"Modified residues such as phosphorylation, acetylation, acylation, methylation",shape:"triangle",color:"#000066"},lipid:{label:"Lipidation",tooltip:"Covalently attached lipid group(s)",shape:"wave",color:"#99CC33"},carbohyd:{label:"Glycosylation",tooltip:"Covalently attached glycan group(s)",shape:"hexagon",color:"#CC3366"},compbias:{label:"Compositional bias",tooltip:"Position of regions of compositional bias within the protein and the particular amino acids that are over-represented within those regions",shape:"rectangle",color:"#FF3366"},conflict:{label:"Sequence conflict",tooltip:"Sequence discrepancies of unknown origin",shape:"rectangle",color:"#6633CC"},non_cons:{label:"Non-adjacent residues",tooltip:"Indicates that two residues in a sequence are not consecutive and that there is an undetermined number of unsequenced residues between them",shape:"doubleBar",color:"#FF0033"},non_ter:{label:"Non-terminal residue",tooltip:"The sequence is incomplete. The residue is not the terminal residue of the complete protein",shape:"doubleBar",color:"#339933"},unsure:{label:"Sequence uncertainty",tooltip:"Regions of a sequence for which the authors are unsure about the sequence assignment",shape:"rectangle",color:"#33FF00"},non_std:{label:"Non-standard residue",tooltip:"Non-standard amino acids (selenocysteine and pyrrolysine)",shape:"pentagon",color:"#330066"},mutagen:{label:"Mutagenesis",tooltip:"Site which has been experimentally altered by mutagenesis",shape:"rectangle",color:"#FF9900"},topo_dom:{label:"Topological domain",tooltip:"Location of non-membrane regions of membrane-spanning proteins",shape:"rectangle",color:"#CC0000"},transmem:{label:"Transmembrane",tooltip:"Extent of a membrane-spanning region",shape:"rectangle",color:"#CC00CC"},intramem:{label:"Intramembrane",tooltip:"Extent of a region located in a membrane without crossing it",shape:"rectangle",color:"#0000CC"},variant:{label:"Natural variant",tooltip:"Natural variant of the protein, including polymorphisms, variations between strains, isolates or cultivars, disease-associated mutations and RNA editing events",shape:"circle",color:"black"},unique:{label:"Unique peptide",tooltip:"",shape:"rectangle",color:"#fc3133"},non_unique:{label:"Non-unique peptide",tooltip:"",shape:"rectangle",color:"#8585fc"},antigen:{label:"Antibody binding sequences",tooltip:"",shape:"rectangle",color:"#996699"},pdbe_cover:{label:"PDBe 3D structure coverage",tooltip:"",shape:"rectangle",color:"#669966"}};function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=e}var e,n,r;return e=t,(n=[{key:"getShapeByType",value:function(t){return this._config[t.toLowerCase()]?this._config[t.toLowerCase()].shape:"rectangle"}},{key:"getColorByType",value:function(t){return this._config[t.toLowerCase()]?this._config[t.toLowerCase()].color:"black"}}])&&R(e.prototype,n),r&&R(e,r),t}();function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function H(t,e,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,N(e).apply(this,arguments))}var n,o,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,C["a"]),n=e,s=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightstart","highlightend","color","shape","layout"]}}],(o=[{key:"getLayout",value:function(t){return"non-overlapping"===String(this.getAttribute("layout")).toLowerCase()?new x({layoutHeight:this._height}):new w({layoutHeight:this._height})}},{key:"connectedCallback",value:function(){var t=this;H(N(e.prototype),"connectedCallback",this).call(this),this._highlightstart=parseInt(this.getAttribute("highlightstart")),this._highlightend=parseInt(this.getAttribute("highlightend")),this._height=this.getAttribute("height")?parseInt(this.getAttribute("height")):44,this._tooltipEvent=this.getAttribute("tooltip-event")?this.getAttribute("tooltip-event"):"mouseover",this._color=this.getAttribute("color"),this._shape=this.getAttribute("shape"),this._featureShape=new a,this._layoutObj=this.getLayout(),this._config=new F(T),this.createTooltip=this.createTooltip.bind(this),this._data&&this._createTrack(),this.addEventListener("load",function(e){Object(i.a)(t.children,e.target)&&(t.data=e.detail.payload)})}},{key:"normalizeLocations",value:function(t){return t.map(function(t){var e=t.locations,n=t.start,r=t.end;return e?t:Object.assign(t,{locations:[{fragments:[{start:n,end:r}]}]})})}},{key:"_getFeatureColor",value:function(t){return t.color?t.color:this._color?this._color:t.type?this._config.getColorByType(t.type):"black"}},{key:"_getShape",value:function(t){return t.shape?t.shape:this._shape?this._shape:t.type?this._config.getShapeByType(t.type):"rectangle"}},{key:"_createTrack",value:function(){this._layoutObj.init(this._data),Object(r.j)(this).selectAll("*").remove(),Object(r.j)(this).html(""),this.svg=Object(r.j)(this).append("div").style("line-height",0).append("svg").attr("width",this.width).attr("height",this._height),this.highlighted=this.svg.append("rect").attr("class","highlighted").attr("fill","rgba(255, 235, 59, 0.8)").attr("height",this._height),this.seq_g=this.svg.append("g").attr("class","sequence-features").attr("transform","translate(0 ,"+this.margin.top+")"),this._createFeatures(),this.refresh()}},{key:"_createFeatures",value:function(){var t=this;this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data),this.locations=this.featuresG.enter().append("g").attr("class","feature-group").attr("id",function(t){return"g_".concat(t.accession)}).selectAll("g.location-group").data(function(t){return t.locations.map(function(e){return Object.assign({},e,{feature:t})})}).enter().append("g").attr("class","location-group"),this.features=this.locations.selectAll("g.fragment-group").data(function(t){return t.fragments.map(function(e){return Object.assign({},e,{feature:t.feature})})}).enter().append("path").attr("class","feature").attr("tooltip-trigger","true").attr("d",function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e.feature))}).attr("transform",function(e){return"translate("+t.getXFromSeqPosition(e.start)+","+(t.margin.top+t._layoutObj.getFeatureYPos(e.feature))+")"}).attr("fill",function(e){return t._getFeatureColor(e.feature)}).attr("stroke",function(e){return t._getFeatureColor(e.feature)}).on("mouseover",function(e){var n=t,i=r.e;"mouseover"===t._tooltipEvent&&window.setTimeout(function(){n.createTooltip(i,e)},50),t.dispatchEvent(new CustomEvent("change",{detail:{highlightend:e.end,highlightstart:e.start},bubbles:!0,cancelable:!0}))}).on("mouseout",function(){var e=t;"mouseover"===t._tooltipEvent&&window.setTimeout(function(){e.removeAllTooltips()},50),t.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null},bubbles:!0,cancelable:!0}))}).on("click",function(e){"click"===t._tooltipEvent&&t.createTooltip(r.e,e,!0)})}},{key:"createTooltip",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.feature&&e.feature.tooltipContent){this.removeAllTooltips();var i=document.createElement("protvista-tooltip");i.top=t.clientY+3,i.left=t.clientX+2,i.title="".concat(e.feature.type," ").concat(e.start,"-").concat(e.end),i.closeable=n,i.content=e.feature.tooltipContent,this.appendChild(i);var o=this.svg._groups[0][0].clientWidth,a=Object(r.j)(i).node().getBoundingClientRect();a.width+a.x>o&&(this.removeChild(i),i.left=o-a.width,i.mirror="H",this.appendChild(i))}}},{key:"removeAllTooltips",value:function(){document.querySelectorAll("protvista-tooltip").forEach(function(t){return t.remove()})}},{key:"refresh",value:function(){var t=this;this.xScale&&this.seq_g&&(this.features=this.seq_g.selectAll("path.feature").data(this._data.reduce(function(t,e){return t.concat(e.locations.reduce(function(t,n){return t.concat(n.fragments.map(function(t){return Object.assign({},t,{feature:e})}))},[]))},[])),this.features.attr("d",function(e){return t._featureShape.getFeatureShape(t.getSingleBaseWidth(),t._layoutObj.getFeatureHeight(e),e.end?e.end-e.start+1:1,t._getShape(e.feature))}).attr("transform",function(e){return"translate("+t.getXFromSeqPosition(e.start)+","+(t.margin.top+t._layoutObj.getFeatureYPos(e.feature))+")"}),this._updateHighlight())}},{key:"_updateHighlight",value:function(){Number.isInteger(this._highlightstart)&&Number.isInteger(this._highlightend)?this.highlighted.attr("x",this.getXFromSeqPosition(this._highlightstart)).style("opacity",.3).attr("width",this.getSingleBaseWidth()*(this._highlightend-this._highlightstart+1)):this.highlighted.style("opacity",0)}},{key:"height",set:function(t){this._height=t},get:function(){return this._height}},{key:"data",set:function(t){this._data=this.normalizeLocations(t),this._createTrack()}}])&&M(n.prototype,o),s&&M(n,s),e}();n.d(e,"a",function(){return w});var W=function(){customElements.define("protvista-track",I)};window.customElements?W():document.addEventListener("WebComponentsReady",function(){W()});e.b=I},338:function(t,e,n){"use strict";var r=n(359),i=n(318),o=n(324),a=n(309),s=n(314),c="[object String]";var u=function(t){return"string"==typeof t||!Object(a.a)(t)&&Object(s.a)(t)&&Object(o.a)(t)==c},l=n(316),h=n(310),f=NaN,p=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,b=/^0o[0-7]+$/i,g=parseInt;var v=function(t){if("number"==typeof t)return t;if(Object(h.a)(t))return f;if(Object(l.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(l.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(p,"");var n=y.test(t);return n||b.test(t)?g(t.slice(2),n?2:8):d.test(t)?f:+t},m=1/0,_=1.7976931348623157e308;var w=function(t){return t?(t=v(t))===m||t===-m?(t<0?-1:1)*_:t==t?t:0:0===t?t:0};var E=function(t){var e=w(t),n=e%1;return e==e?n?e-n:e:0},O=n(334);var S=function(t,e){return Object(O.a)(e,function(e){return t[e]})},j=n(320);var k=function(t){return null==t?[]:S(t,Object(j.a)(t))},L=Math.max;e.a=function(t,e,n,o){t=Object(i.a)(t)?t:k(t),n=n&&!o?E(n):0;var a=t.length;return n<0&&(n=L(a+n,0)),u(t)?n<=a&&t.indexOf(e,n)>-1:!!a&&Object(r.a)(t,e,n)>-1}},340:function(t,e,n){"use strict";var r=n(339),i=n(350),o=n(328),a=n(347),s=1,c=2;var u=function(t,e,n,r,u,l){var h=n&s,f=t.length,p=e.length;if(f!=p&&!(h&&p>f))return!1;var d=l.get(t);if(d&&l.get(e))return d==e;var y=-1,b=!0,g=n&c?new i.a:void 0;for(l.set(t,e),l.set(e,t);++y<f;){var v=t[y],m=e[y];if(r)var _=h?r(m,v,y,e,t,l):r(v,m,y,t,e,l);if(void 0!==_){if(_)continue;b=!1;break}if(g){if(!Object(o.a)(e,function(t,e){if(!Object(a.a)(g,e)&&(v===t||u(v,t,n,r,l)))return g.push(e)})){b=!1;break}}else if(v!==m&&!u(v,m,n,r,l)){b=!1;break}}return l.delete(t),l.delete(e),b},l=n(321),h=n(354),f=n(333);var p=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n},d=n(348),y=1,b=2,g="[object Boolean]",v="[object Date]",m="[object Error]",_="[object Map]",w="[object Number]",E="[object RegExp]",O="[object Set]",S="[object String]",j="[object Symbol]",k="[object ArrayBuffer]",L="[object DataView]",A=l.a?l.a.prototype:void 0,P=A?A.valueOf:void 0;var x=function(t,e,n,r,i,o,a){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!o(new h.a(t),new h.a(e)));case g:case v:case w:return Object(f.a)(+t,+e);case m:return t.name==e.name&&t.message==e.message;case E:case S:return t==e+"";case _:var s=p;case O:var c=r&y;if(s||(s=d.a),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=b,a.set(t,e);var A=u(s(t),s(e),r,i,o,a);return a.delete(t),A;case j:if(P)return P.call(t)==P.call(e)}return!1},C=n(355),T=1,R=Object.prototype.hasOwnProperty;var F=function(t,e,n,r,i,o){var a=n&T,s=Object(C.a)(t),c=s.length;if(c!=Object(C.a)(e).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in e:R.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<c;){var d=t[l=s[u]],y=e[l];if(r)var b=a?r(y,d,l,e,t,o):r(d,y,l,t,e,o);if(!(void 0===b?d===y||i(d,y,n,r,o):b)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var g=t.constructor,v=e.constructor;g!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v)&&(f=!1)}return o.delete(t),o.delete(e),f},D=n(343),M=n(309),V=n(346),H=n(361),N=1,G="[object Arguments]",I="[object Array]",W="[object Object]",K=Object.prototype.hasOwnProperty;var q=function(t,e,n,i,o,a){var s=Object(M.a)(t),c=Object(M.a)(e),l=s?I:Object(D.a)(t),h=c?I:Object(D.a)(e),f=(l=l==G?W:l)==W,p=(h=h==G?W:h)==W,d=l==h;if(d&&Object(V.a)(t)){if(!Object(V.a)(e))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new r.a),s||Object(H.a)(t)?u(t,e,n,i,o,a):x(t,e,l,n,i,o,a);if(!(n&N)){var y=f&&K.call(t,"__wrapped__"),b=p&&K.call(e,"__wrapped__");if(y||b){var g=y?t.value():t,v=b?e.value():e;return a||(a=new r.a),o(g,v,n,i,a)}}return!!d&&(a||(a=new r.a),F(t,e,n,i,o,a))},Q=n(314);var Y=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Object(Q.a)(e)&&!Object(Q.a)(n)?e!=e&&n!=n:q(e,n,r,i,t,o))},z=1,Z=2;var B=function(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=Object(t);o--;){var c=n[o];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<a;){var u=(c=n[o])[0],l=t[u],h=c[1];if(s&&c[2]){if(void 0===l&&!(u in t))return!1}else{var f=new r.a;if(i)var p=i(l,h,u,t,e,f);if(!(void 0===p?Y(h,l,z|Z,i,f):p))return!1}}return!0},X=n(316);var $=function(t){return t==t&&!Object(X.a)(t)},J=n(320);var U=function(t){for(var e=Object(J.a)(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$(i)]}return e};var tt=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var et=function(t){var e=U(t);return 1==e.length&&e[0][2]?tt(e[0][0],e[0][1]):function(n){return n===t||B(n,t,e)}},nt=n(326);var rt=function(t,e){return null!=t&&e in Object(t)},it=n(330),ot=n(351),at=n(337),st=n(345),ct=n(311);var ut=function(t,e,n){for(var r=-1,i=(e=Object(it.a)(e,t)).length,o=!1;++r<i;){var a=Object(ct.a)(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Object(st.a)(i)&&Object(at.a)(a,i)&&(Object(M.a)(t)||Object(ot.a)(t))};var lt=function(t,e){return null!=t&&ut(t,e,rt)},ht=n(317),ft=1,pt=2;var dt=function(t,e){return Object(ht.a)(t)&&$(e)?tt(Object(ct.a)(t),e):function(n){var r=Object(nt.a)(n,t);return void 0===r&&r===e?lt(n,t):Y(e,r,ft|pt)}},yt=n(335);var bt=function(t){return function(e){return null==e?void 0:e[t]}},gt=n(327);var vt=function(t){return function(e){return Object(gt.a)(e,t)}};var mt=function(t){return Object(ht.a)(t)?bt(Object(ct.a)(t)):vt(t)};function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return"function"==typeof t?t:null==t?yt.a:"object"==_t(t)?Object(M.a)(t)?dt(t[0],t[1]):et(t):mt(t)}},342:function(t,e,n){"use strict";var r=n(380),i=[{name:"ECO:0000269",description:"Manual assertion based on experiment",shortDescription:"Publication",acronym:"EXP",isManual:!0},{name:"ECO:0000303",description:"Manual assertion based on opinion",shortDescription:"Publication",acronym:"NAS",isManual:!0},{name:"ECO:0000305",description:"Manual assertion inferred by curator",shortDescription:"Curated",acronym:"IC",isManual:!0},{name:"ECO:0000250",description:"Manual assertion inferred from sequence similarity",shortDescription:"By similarity",acronym:"ISS",isManual:!0},{name:"ECO:0000255",description:"Manual assertion according to rules",shortDescription:"Sequence Analysis",acronym:"ISM",isManual:!0},{name:"ECO:0000244",description:"Manual assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXM",isManual:!0},{name:"ECO:0000312",description:"Manual assertion inferred from database entries",shortDescription:"Imported",acronym:"MI",isManual:!0},{name:"ECO:0000256",description:"Automatic assertion according to rules",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000259",description:"Automatic assertion inferred from signature match",shortDescription:"Automatic annotation",acronym:"AA"},{name:"ECO:0000213",description:"Automatic assertion inferred from combination of experimental and computational evidence",shortDescription:"Combined sources",acronym:"MIXA"},{name:"ECO:0000313",description:"Automatic assertion inferred from database entries",shortDescription:"Imported",acronym:"AI"}];function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"renameProperties",value:function(t){return Object(r.a)(t,function(t){t.begin&&(t.start=t.begin,delete t.begin)}),t}},{key:"getEvidenceFromCodes",value:function(t){if(t){var e="";return t.map(function(t){var n=i.find(function(e){return e.name===t.code});n&&(e="".concat(e,"<p title='").concat(n.description,"'>").concat(n.shortDescription),t.source&&(e="".concat(e," <a href='").concat(t.source.url,"' target='_blank'>").concat(t.source.id,"</a> (").concat(t.source.name,")")),e="".concat(e,"</p>"))}),e}}},{key:"formatTooltip",value:function(e){var n=t.getEvidenceFromCodes(e.evidences);return" \n            <table>                        \n                ".concat(e.description?"<tr><td>Description</td><td>".concat(e.description,"</td></tr>"):""," \n                ").concat(n?"<tr><td>Evidence</td><td>".concat(n,"</td></tr>"):"","\n            </table> \n        ")}}],(n=null)&&o(e.prototype,n),a&&o(e,a),t}();function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function h(t,e,n){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=u(this,p(e).call(this)))._adaptedData=[],t._basicHelper=a,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,l(HTMLElement)),n=e,(r=[{key:"connectedCallback",value:function(){this._filters=this.getAttribute("filters")?this.getAttribute("filters").split(","):[],this._initLoaders(),this._addLoaderListeners()}},{key:"parseEntry",value:function(t){return this._adaptedData=t,this._adaptedData}},{key:"filterData",value:function(){var t=this;this._filters.length>0&&(this._adaptedData=this._adaptedData.filter(function(e){return t._filters.includes(e.type)}))}},{key:"_initLoaders",value:function(){var t=this.children;1!==this.childElementCount&&(this.dispatchEvent(new CustomEvent("warning",{detail:"Only one loader OR adapter is allowed, the first one will be used, the others dismissed",bubbles:!0,cancelable:!0})),this._removeChildrenInList(this,t,1,this.childElementCount))}},{key:"_removeChildrenInList",value:function(t,e,n,r){for(var i=n;i<r&&i<e.length;i++)t.removeChild(e[i])}},{key:"_addLoaderListeners",value:function(){var t=this;this.addEventListener("load",function(e){if(e.target!==t){e.stopPropagation();try{if(e.detail.payload.errorMessage)throw e.detail.payload.errorMessage;t.parseEntry(e.detail.payload),t.filterData(),t.dispatchEvent(new CustomEvent("load",{detail:{payload:t._adaptedData},bubbles:!0,cancelable:!0}))}catch(e){t.dispatchEvent(new CustomEvent("error",{detail:e,bubbles:!0,cancelable:!0}))}}})}},{key:"adaptedData",get:function(){return this._adaptedData}},{key:"basicHelper",get:function(){return this._basicHelper}}])&&c(n.prototype,r),i&&c(n,i),e}();window.customElements&&customElements.define("protvista-uniprot-entry-adapter",d);e.a=d},344:function(t,e,n){"use strict";var r=n(326);function i(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function s(t){i(a,r,o,s,c,"next",t)}function c(t){i(a,r,o,s,c,"throw",t)}s(void 0)})}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,n=null,r=[{key:"initStore",value:function(){window[t.storeSymbol]=new Map}},{key:"loadFromCache",value:function(e){return t.storeRef.get(e)}},{key:"storeInCache",value:function(e,n){var r=n.then(function(){var t=o(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(200===n.status){t.next=2;break}throw Error("Request Failed: Status = ".concat(n.status,"; URI = ").concat(e,"; Time = ").concat(new Date));case 2:return t.next=4,n.json();case 4:return t.t0=t.sent,t.t1=n.headers,t.abrupt("return",{payload:t.t0,headers:t.t1});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());return t.storeRef.set(e,r),t.loadFromCache(e)}},{key:"fetch",value:function(){var e=o(regeneratorRuntime.mark(function e(n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.storeRef&&t.initStore(),void 0===(r=t.loadFromCache(n.src))){e.next=6;break}return e.abrupt("return",r);case 6:if(!n.src){e.next=12;break}return i=new Headers({accept:"application/json"}),o=window.fetch(n.src,{headers:i}),e.abrupt("return",t.storeInCache(n.src,o));case 12:return e.abrupt("return",{payload:JSON.parse(n.textContent)});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"storeSymbol",get:function(){return Symbol.for("protvista-request-manager-store")}},{key:"storeRef",get:function(){return window[t.storeSymbol]}}],n&&a(e.prototype,n),r&&a(e,r),t}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return y(t,arguments,g(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,t)})(t)}function y(t,e,n){return(y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&b(i,n.prototype),i}).apply(null,arguments)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(t){return t.matches('source[src], script[type="application/json"]')})},m=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=h(this,g(e).call(this)))._data=null,t.selector=(t.getAttribute("selector")||"").trim()||function(t){return t},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,d(HTMLElement)),p(e,[{key:"fetch",value:function(){var t,e=(t=regeneratorRuntime.mark(function t(){var e,n,i,o,a,c,l,h,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=v.apply(void 0,u(this.children))).length){t.next=3;break}return t.abrupt("return");case 3:n=[],o=!0,a=!1,c=void 0,t.prev=7,l=e[Symbol.iterator]();case 9:if(o=(h=l.next()).done){t.next=26;break}return f=h.value,t.prev=11,t.next=14,s.fetch(f);case 14:return(i=t.sent).srcElement=f,i.src=f.src,t.abrupt("break",26);case 20:t.prev=20,t.t0=t.catch(11),n.push(t.t0);case 23:o=!0,t.next=9;break;case 26:t.next=32;break;case 28:t.prev=28,t.t1=t.catch(7),a=!0,c=t.t1;case 32:t.prev=32,t.prev=33,o||null==l.return||l.return();case 35:if(t.prev=35,!a){t.next=38;break}throw c;case 38:return t.finish(35);case 39:return t.finish(32);case 40:if(i){t.next=44;break}return this._errors=n,this.dispatchEvent(new CustomEvent("error",{detail:n,bubbles:!0,cancelable:!0})),t.abrupt("return");case 44:return"string"==typeof this.selector?this._data=Object(r.a)(i.payload,this.selector):this._data=this.selector(i.payload),i.payload=this.data,this.dispatchEvent(new CustomEvent("load",{detail:i,bubbles:!0,cancelable:!0})),t.abrupt("return",i);case 48:case"end":return t.stop()}},t,this,[[7,28,32,40],[11,20],[33,,35,39]])}),function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){l(o,r,i,a,s,"next",t)}function s(t){l(o,r,i,a,s,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}()},{key:"data",get:function(){return this._data}},{key:"loaded",get:function(){return!!this.data}},{key:"errors",get:function(){return this._errors}},{key:"selector",get:function(){return this._selector},set:function(t){this._selector=t}}],[{key:"is",get:function(){return"data-loader"}}]),p(e,[{key:"connectedCallback",value:function(){this.fetch()}}]),e}();m.fetch=window.fetch.bind(window);e.a=m},352:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(342);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,s(e).call(this))}var n,i,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,r["a"]),n=e,(i=[{key:"parseEntry",value:function(t){var e=this;return this._adaptedData=t.features,this._adaptedData&&0!==this._adaptedData.length&&(this._adaptedData=this._basicHelper.renameProperties(this._adaptedData),this._adaptedData.map(function(t){return t.tooltipContent=e._basicHelper.formatTooltip(t)})),this._adaptedData}}])&&o(n.prototype,i),u&&o(n,u),e}()},360:function(t,e,n){"use strict";var r=n(312);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,l(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)})(t)}function c(t,e,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=10,f=10,p=10,d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,l(e).call(this)))._x=null,t.dontDispatch=!1,t}var n,i,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,s(HTMLElement)),n=e,c=[{key:"observedAttributes",get:function(){return["length","displaystart","displayend","highlightStart","highlightEnd","width"]}}],(i=[{key:"connectedCallback",value:function(){this.style.display="block",this.style.width="100%",this.width=this.offsetWidth,this._length=parseFloat(this.getAttribute("length")),this._displaystart=parseFloat(this.getAttribute("displaystart"))||1,this._displayend=parseFloat(this.getAttribute("displayend"))||this._length,this._highlightStart=parseFloat(this.getAttribute("highlightStart")),this._highlightEnd=parseFloat(this.getAttribute("highlightEnd")),this._onResize=this._onResize.bind(this),this._createNavRuler()}},{key:"disconnectedCallback",value:function(){this._ro?this._ro.unobserve(this):window.removeEventListener(this._onResize)}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&(this["_".concat(t)]=parseFloat(n),this._updateNavRuler())}},{key:"_createNavRuler",value:function(){var t=this;this._x=Object(r.g)().range([p,this.width-h]),this._x.domain([1,this._length]),this._svg=Object(r.j)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this._xAxis=Object(r.a)(this._x),this._displaystartLabel=this._svg.append("text").attr("class","start-label").attr("x",0).attr("y",40-f),this._displayendLabel=this._svg.append("text").attr("class","end-label").attr("x",this.width).attr("y",40-f).attr("text-anchor","end"),this._axis=this._svg.append("g").attr("class","x axis").call(this._xAxis),this._viewport=Object(r.d)().extent([[p,0],[this.width-h,20.4]]).on("brush",function(){r.e.selection&&(t._displaystart=Object(r.f)("d")(t._x.invert(r.e.selection[0])),t._displayend=Object(r.f)("d")(t._x.invert(r.e.selection[1])),t.dontDispatch||t.dispatchEvent(new CustomEvent("change",{detail:{displayend:t._displayend,displaystart:t._displaystart,extra:{transform:r.e.transform}},bubbles:!0,cancelable:!0})),t._updateLabels(),t._updatePolygon())}),this._brushG=this._svg.append("g").attr("class","brush").call(this._viewport),this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.polygon=this._svg.append("polygon").attr("class","zoom-polygon").attr("fill","#777").attr("fill-opacity","0.3"),this._updateNavRuler(),"ResizeObserver"in window&&(this._ro=new ResizeObserver(this._onResize),this._ro.observe(this)),window.addEventListener("resize",this._onResize)}},{key:"_onResize",value:function(){this.width=this.offsetWidth,this._x=this._x.range([p,this.width-h]),this._svg.attr("width",this.width),this._axis.call(this._xAxis),this._viewport.extent([[p,0],[this.width-h,20.4]]),this._brushG.call(this._viewport),this._updateNavRuler()}},{key:"_updateNavRuler",value:function(){this._x&&(this._updatePolygon(),this._updateLabels(),this._brushG&&(this.dontDispatch=!0,this._brushG.call(this._viewport.move,[this._x(this._displaystart),this._x(this._displayend)]),this.dontDispatch=!1))}},{key:"_updateLabels",value:function(){this._displaystartLabel&&this._displaystartLabel.text(this._displaystart),this._displayendLabel&&this._displayendLabel.attr("x",this.width).text(this._displayend)}},{key:"_updatePolygon",value:function(){this.polygon&&this.polygon.attr("points","".concat(this._x(this._displaystart),",").concat(20,"\n        ").concat(this._x(this._displayend),",").concat(20,"\n        ").concat(this.width,",").concat(40,"\n        0,").concat(40))}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"isManaged",get:function(){return!0}}])&&o(n.prototype,i),c&&o(n,c),e}(),y=function(){customElements.define("protvista-navigation",d)};window.customElements?y():document.addEventListener("WebComponentsReady",function(){y()});e.a=d},362:function(t,e,n){"use strict";var r=n(312),i=n(331);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e,n,r){return(u="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=h(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=h(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,f(e).apply(this,arguments))}var n,o,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,i["a"]),n=e,h=[{key:"observedAttributes",get:function(){return i.a.observedAttributes.concat("highlightstart","highlightend")}}],(o=[{key:"connectedCallback",value:function(){l(f(e.prototype),"connectedCallback",this).call(this),this._highlightstart=parseInt(this.getAttribute("highlightstart")),this._highlightend=parseInt(this.getAttribute("highlightend")),this.sequence=this.getAttribute("sequence"),this.sequence&&this._createSequence()}},{key:"_createSequence",value:function(){!function(t,e,n,r,i){if(!u(t,e,n,r||t)&&i)throw new Error("failed to set property")}(f(e.prototype),"svg",Object(r.j)(this).append("div").attr("class","").append("svg").attr("id","").attr("width",this.width).attr("height",40),this,!0),this.seq_bg=l(f(e.prototype),"svg",this).append("g").attr("class","background"),this.axis=l(f(e.prototype),"svg",this).append("g").attr("class","x axis"),this.seq_g=l(f(e.prototype),"svg",this).append("g").attr("class","sequence").attr("transform","translate(0,".concat(30,")")),this.seq_g.append("text").attr("class","base").text("T"),this.chWidth=.8*this.seq_g.select("text.base").node().getBBox().width,this.seq_g.select("text.base").remove(),this.highlighted=l(f(e.prototype),"svg",this).append("rect").attr("class","highlighted").attr("fill","yellow").attr("height",40),this.refresh()}},{key:"refresh",value:function(){var t=this;if(this.axis){var n=this.getSingleBaseWidth(),i=n-this.chWidth,o=n/2,s=Math.round(Math.max(0,this._displaystart-2)),c=Math.round(Math.min(this.sequence.length,this._displayend+1)),u=i<0?[]:this.sequence.slice(s,c).split("").map(function(t,e){return[1+s+e,t]});this.xAxis=Object(r.a)(this.xScale).tickFormat(function(t){return Number.isInteger(t)?t:""}).ticks(3,"s"),this.axis.call(this.xAxis),this.axis.attr("transform","translate(".concat(this.margin.left+o,",0)")),this.axis.select(".domain").remove(),this.axis.selectAll(".tick line").remove(),this.bases=this.seq_g.selectAll("text.base").data(u,function(t){return t[0]}),this.bases.enter().append("text").attr("class","base").attr("text-anchor","middle").attr("x",function(e){var n=a(e,1)[0];return t.getXFromSeqPosition(n)+o}).text(function(t){var e=a(t,2);e[0];return e[1]}).attr("style","font-family:monospace"),this.bases.exit().remove(),this.bases.attr("x",function(e){var n=a(e,1)[0];return t.getXFromSeqPosition(n)+o}),this.background=this.seq_bg.selectAll("rect.base_bg").data(u,function(t){return t[0]}),this.background.enter().append("rect").attr("class","base_bg").attr("height",40).merge(this.background).attr("width",n).attr("fill",function(t){var e=a(t,1)[0];return Math.round(e)%2?"#ccc":"#eee"}).attr("x",function(e){var n=a(e,1)[0];return t.getXFromSeqPosition(n)}),this.background.exit().remove(),this.seq_g.style("opacity",Math.min(1,i)),this.background.style("opacity",Math.min(1,i)),Number.isInteger(this._highlightstart)&&Number.isInteger(this._highlightend)?this.highlighted.attr("x",l(f(e.prototype),"getXFromSeqPosition",this).call(this,this._highlightstart)).style("opacity",.3).attr("width",n*(this._highlightend-this._highlightstart+1)):this.highlighted.style("opacity",0)}}},{key:"data",get:function(){return this.sequence},set:function(t){"string"==typeof t?this.sequence=t:"sequence"in t&&(this.sequence=t.sequence),this.sequence&&!l(f(e.prototype),"svg",this)?this._createSequence():this.refresh()}}])&&s(n.prototype,o),h&&s(n,h),e}(),y=function(){customElements.define("protvista-sequence",d)};window.customElements?y():document.addEventListener("WebComponentsReady",function(){y()});e.a=d},376:function(t,e,n){var r=n(377);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(92)(r,i);r.locals&&(t.exports=r.locals)},377:function(t,e,n){(t.exports=n(91)(!1)).push([t.i,"protvista-variation {\n  display: flex;\n  width: 100%;\n}\n\nsvg {\n  background-color: #fff;\n}\n\ncircle {\n  opacity: 0.6;\n}\ncircle:hover {\n  opacity: 0.9;\n}\n.tick line,\n.axis path {\n  opacity: 0.1;\n}\n\n.protvista-highlight {\n  fill: #ffe999;\n}\n\n.variation-y-right line,\n.axis path {\n  fill: none;\n  stroke: none;\n}\n",""])},378:function(t){t.exports={sequence:"MLPGLALLLLAAWTARALEVPTDGNAGLLAEPQIAMFCGRLNMHMNVQNGKWDSDPSGTKTCIDTKEGILQYCQEVYPELQITNVVEANQPVTIQNWCKRGRKQCKTHPHFVIPYRCLVGEFVSDALLVPDKCKFLHQERMDVCETHLHWHTVAKETCSEKSTNLHDYGMLLPCGIDKFRGVEFVCCPLAEESDNVDSADAEEDDSDVWWGGADTDYADGSEDKVVEVAEEEEVAEVEEEEADDDEDDEDGDEVEEEAEEPYEEATERTTSIATTTTTTTESVEEVVREVCSEQAETGPCRAMISRWYFDVTEGKCAPFFYGGCGGNRNNFDTEEYCMAVCGSAMSQSLLKTTQEPLARDPVKLPTTAASTPDAVDKYLETPGDENEHAHFQKAKERLEAKHRERMSQVMREWEEAERQAKNLPKADKKAVIQHFQEKVESLEQEAANERQQLVETHMARVEAMLNDRRRLALENYITALQAVPPRPRHVFNMLKKYVRAEQKDRQHTLKHFEHVRMVDPKKAAQIRSQVMTHLRVIYERMNQSLSLLYNVPAVAEEIQDEVDELLQKEQNYSDDVLANMISEPRISYGNDALMPSLTETKTTVELLPVNGEFSLDDLQPWHSFGADSVPANTENEVEPVDARPAADRGLTTRPGSGLTNIKTEEISEVKMDAEFRHDSGYEVHHQKLVFFAEDVGSNKGAIIGLMVGGVVIATVIVITLVMLKKKQYTSIHHGVVEVDAAVTPEERHLSKMQQNGYENPTYKFFEQMQN",variants:[{accession:"feature1",variant:"V",start:1,end:1,color:"orange"},{accession:"feature2",variant:"C",start:2,end:2,color:"#33d"},{accession:"feature3",variant:"T",start:3,end:3,color:"#336"},{accession:"feature4",variant:"D",start:1,end:1,color:"#73d"},{accession:"feature5",variant:"A",start:25,end:25,size:20,color:"#63e"},{accession:"feature6",variant:"R",start:770,color:"#35d"}]}},379:function(t,e,n){"use strict";var r=n(336),i=n(312),o=n(338);var a=function(t){var e=t.variants,n=t.sequence;if(n&&e){var r=[],i=n.split("");for(var o in i)r.push({type:"VARIANT",normal:i[o],pos:o+1,variants:[]});return e.forEach(function(t){r[t.start-1]&&r[t.start-1].variants.push(t)}),r}};function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._frequency=Object(i.i)().exponent(.001).domain([0,1]).range([5,10]),this.drawVariationPlot=this.drawVariationPlot.bind(this)}var e,n,r;return e=t,(n=[{key:"drawVariationPlot",value:function(t,e){var n=e.getSingleBaseWidth()/2;t.each(function(t,r,o){var a=Object(i.j)(o[r]),s=t.filter(function(t){return 0!==t.variants.length}),c=a.selectAll("g").data(s,function(t){return t.pos});c.exit().remove();var u=c.enter().append("g").merge(c).selectAll("circle").data(function(t){return t.variants});u.exit().remove(),u.enter().append("circle").merge(u).attr("class",function(t){}).attr("title",function(t){return t.start}).attr("r",function(t){return t.size?t.size:5}).attr("cx",function(t){return e.getXFromSeqPosition(t.start)+n}).attr("cy",function(t){return e._yScale(t.variant.charAt(0))}).attr("name",function(t){var e="*"===t.alternativeSequence?"STOP":t.alternativeSequence;return t.internalId="var_"+t.wildType+t.start+e,t.internalId}).attr("fill",function(t){return t.color}).attr("tooltip-trigger","true").on("mouseover",function(t){e.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start},bubbles:!0,cancelable:!0}))}).on("click",function(t){e.createTooltip(i.e,t,!0)})})}}])&&s(e.prototype,n),r&&s(e,r),t}();n(376);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=["G","A","V","L","I","S","T","C","M","D","N","E","Q","R","K","H","F","Y","W","P","d","*"],b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,p(e).apply(this,arguments))}var n,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,r["b"]),n=e,(s=[{key:"connectedCallback",value:function(){var t=this;f(p(e.prototype),"connectedCallback",this).call(this),this._accession=this.getAttribute("accession"),this._height=parseInt(this.getAttribute("height"))?parseInt(this.getAttribute("height")):430,this._width=this._width?this._width:0,this._yScale=Object(i.g)(),this._yScale=Object(i.h)().domain(y).range([0,this._height-this.margin.top-this.margin.bottom]),this.addEventListener("load",function(e){Object(o.a)(t.children,e.target)&&(t.data=e.detail.payload)})}},{key:"attributeChangedCallback",value:function(t,n,r){f(p(e.prototype),"attributeChangedCallback",this).call(this,t,n,r),f(p(e.prototype),"svg",this)}},{key:"_createFeatures",value:function(){this._variationPlot=new c;var t=f(p(e.prototype),"svg",this).select("g"),n=t.append("g").attr("clip-path","url(#plotAreaClip)");this._clipPath=t.append("clipPath").attr("id","plotAreaClip").append("rect").attr("width",this.getWidthWithMargins()).attr("height",this._height).attr("transform","translate(0, -".concat(this.margin.top,")")),this._series=n.datum(this._data),this._axisLeft=t.append("g"),this._axisRight=t.append("g"),this.updateScale()}},{key:"refresh",value:function(){this._series&&(this._clipPath.attr("width",this.getWidthWithMargins()),this.updateScale(),this._series.call(this._variationPlot.drawVariationPlot,this),this._updateHighlight())}},{key:"updateScale",value:function(){this._yAxisLScale=Object(i.b)().scale(this._yScale).tickSize(-this.getWidthWithMargins()),this._yAxisRScale=Object(i.c)().scale(this._yScale),this._axisLeft.attr("class","variation-y-left axis").attr("transform","translate(".concat(this.margin.left,",0)")).call(this._yAxisLScale),this._axisRight.attr("transform","translate(".concat(this.getWidthWithMargins()-this.margin.right+2,", 0)")).attr("class","variation-y-right axis").call(this._yAxisRScale)}},{key:"updateData",value:function(t){this._series&&(this._series.datum(t),this.refresh())}},{key:"reset",value:function(){}},{key:"data",set:function(t){this._data=a(t),this._createTrack()}}])&&l(n.prototype,s),u&&l(n,u),e}();e.a=b},380:function(t,e,n){"use strict";var r=n(353),i=n(323),o=n(335);var a=function(t){return"function"==typeof t?t:o.a},s=n(309);e.a=function(t,e){return(Object(s.a)(t)?r.a:i.a)(t,a(e))}},402:function(t){t.exports={sequence:"MLPGLALLLLAAWTARALEVPTDGNAGLLAEPQIAMFCGRLNMHMNVQNGKWDSDPSGTKTCIDTKEGILQYCQEVYPELQITNVVEANQPVTIQNWCKRGRKQCKTHPHFVIPYRCLVGEFVSDALLVPDKCKFLHQERMDVCETHLHWHTVAKETCSEKSTNLHDYGMLLPCGIDKFRGVEFVCCPLAEESDNVDSADAEEDDSDVWWGGADTDYADGSEDKVVEVAEEEEVAEVEEEEADDDEDDEDGDEVEEEAEEPYEEATERTTSIATTTTTTTESVEEVVREVCSEQAETGPCRAMISRWYFDVTEGKCAPFFYGGCGGNRNNFDTEEYCMAVCGSAMSQSLLKTTQEPLARDPVKLPTTAASTPDAVDKYLETPGDENEHAHFQKAKERLEAKHRERMSQVMREWEEAERQAKNLPKADKKAVIQHFQEKVESLEQEAANERQQLVETHMARVEAMLNDRRRLALENYITALQAVPPRPRHVFNMLKKYVRAEQKDRQHTLKHFEHVRMVDPKKAAQIRSQVMTHLRVIYERMNQSLSLLYNVPAVAEEIQDEVDELLQKEQNYSDDVLANMISEPRISYGNDALMPSLTETKTTVELLPVNGEFSLDDLQPWHSFGADSVPANTENEVEPVDARPAADRGLTTRPGSGLTNIKTEEISEVKMDAEFRHDSGYEVHHQKLVFFAEDVGSNKGAIIGLMVGGVVIATVIVITLVMLKKKQYTSIHHGVVEVDAAVTPEERHLSKMQQNGYENPTYKFFEQMQN"}},413:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function u(t,e,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=s(this,h(e).call(this))).protvistaElements=new Set,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,c(HTMLElement)),n=e,i=[{key:"observedAttributes",get:function(){return["attributes"]}}],(r=[{key:"attributeChangedCallback",value:function(t,e,n){if(e!==n&&"attributes"===t){if(this._attributes=n.split(" "),-1!==this._attributes.indexOf("type"))throw new Error("'type' can't be used as a protvista attribute");if(-1!==this._attributes.indexOf("value"))throw new Error("'value' can't be used as a protvista attribute")}}},{key:"_setAttributes",value:function(t,e,n){var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;!1===n?c.removeAttribute(e):c.setAttribute(e,"boolean"==typeof n?"":n)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"_registerProtvistaDescendents",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.isManaged&&this.protvistaElements.add(a),this._registerProtvistaDescendents(a)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"addListeners",value:function(){var t=this,e=!0,n=!1,r=void 0;try{for(var i,o=this.protvistaElements[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addEventListener("change",function(e){for(var n in-1!==t._attributes.indexOf(e.detail.type)&&t._setAttributes(t.protvistaElements,e.detail.type,e.detail.value),e.detail)-1!==t._attributes.indexOf(n)&&t._setAttributes(t.protvistaElements,n,e.detail[n])})}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"connectedCallback",value:function(){this._registerProtvistaDescendents(this),this.addListeners();var t=this;"MutationObserver"in window&&(this.mutationObserver=new MutationObserver(function(e){t._registerProtvistaDescendents(t),t.addListeners()}),this.mutationObserver.observe(this,{childList:!0}))}},{key:"disconnectedCallback",value:function(){this.mutationObserver&&this.mutationObserver.disconnect()}}])&&a(n.prototype,r),i&&a(n,i),e}(),p=n(344),d=n(352),y=n(336),b=n(360),g=n(362),v=n(379);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,E(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,y["a"]),n=e,(r=[{key:"init",value:function(t,e){var n=0;if(this.height={},this.yPos={},this.maxYPos=0,t){for(var r={},i=0;i<t.length;i++){var o=t[i];this.height[o.accession]=this.expanded?14:16,this.yPos[o.accession]=this._padding,n=this.height[o.accession]+2*this._padding,this.maxYPos=Math.max(this.maxYPos,n),o.accession in r||(r[o.accession]={}),o.residues&&(n=this._initResidues(o.residues,o.accession,o.locations,n,i,r))}if(e)for(var a=0;a<e.length;a++){var s=e[a];s.accession in this.height||(this.height[s.accession]=this.expanded?10:0,this.yPos[s.accession]=this.maxYPos+this._padding,n+=2*this._padding+this.height[s.accession],this.maxYPos=Math.max(this.maxYPos,n)),s.accession in r||(r[s.accession]={}),s.residues&&(n=this._initResidues(s.residues,s.accession,s.locations,n,a,r))}this.maxYPos+=this._padding}}},{key:"_initResidues",value:function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=0;a<t.length;a++){var s=t[a];this._filterOutResidueFragmentsOutOfLocation(s,n),s.accession in o[e]||(o[e][s.accession]={});for(var c=0;c<s.locations.length;c++){var u=s.locations[c].description;u in o[e][s.accession]||(o[e][s.accession][u]={height:this.expanded?10:0,yPos:this.maxYPos+this._padding},r=this.expanded?this.maxYPos+2*this._padding+10:r),this.height["".concat(s.accession,"_").concat(i,"_").concat(a,"_").concat(c)]=o[e][s.accession][u].height,this.yPos["".concat(s.accession,"_").concat(i,"_").concat(a,"_").concat(c)]=o[e][s.accession][u].yPos,this.maxYPos=Math.max(this.maxYPos,r)}}return r}},{key:"_filterOutResidueFragmentsOutOfLocation",value:function(t,e){t.locations.forEach(function(t){return t.fragments=t.fragments.filter(function(t){return e.some(function(e){return e.fragments.some(function(e){return t.start>=e.start&&t.end<=e.end})})})}),t.locations=t.locations.filter(function(t){return t.fragments.length})}},{key:"_getAccFromFeature",value:function(t){var e="";return"string"==typeof t?e=t:t.accession&&(e=t.accession),e}},{key:"getFeatureYPos",value:function(t){var e=this._getAccFromFeature(t);return e in this.yPos?this.yPos[e]:0}},{key:"getFeatureHeight",value:function(t){var e=this._getAccFromFeature(t);return e in this.height?this.height[e]:0}}])&&_(n.prototype,r),i&&_(n,i),e}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=2,T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,P(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,y["b"]),n=e,i=[{key:"observedAttributes",get:function(){return y.b.observedAttributes.concat(["expanded","color"])}}],(r=[{key:"_createTrack",value:function(){this._layoutObj.expanded=this._expanded,A(P(e.prototype),"_createTrack",this).call(this),this.children_g=null}},{key:"connectedCallback",value:function(){A(P(e.prototype),"connectedCallback",this).call(this),this._expanded=this.hasAttribute("expanded"),this._haveCreatedFeatures=!1}},{key:"attributeChangedCallback",value:function(t,n,r){if("expanded"===t&&n!==r&&this._contributors){var i=!0,o=!1,a=void 0;try{for(var s,c=this._contributors[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){s.value.expanded=!n}}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}A(P(e.prototype),"attributeChangedCallback",this).call(this,t,n,r)}},{key:"getLayout",value:function(t){return new S({layoutHeight:44,expanded:this._expanded,padding:2})}},{key:"_createResidueGroup",value:function(t){return t.selectAll("g.residues-group").data(function(t){return t.residues?t.residues.map(function(e,n){return Object.assign({},e,{feature:t,i:n})}):[]}).enter().append("g").attr("class","residues-group").selectAll("g.residues-locations").data(function(t){return t.locations.map(function(e,n){return Object.assign({},e,{accession:t.accession,feature:t.feature,location:e,i:t.i,j:n})})}).enter().append("g").attr("class","residues-locations")}},{key:"_createResiduePaths",value:function(t){var e=this;return t.selectAll("g.residue").data(function(t){return t.fragments.map(function(e){return Object.assign({},e,{accession:t.accession,feature:t.feature,location:t.location,k:t.feature.k,i:t.i,j:t.j})})}).enter().append("path").attr("class","feature").attr("d",function(t,n){return e._featureShape.getFeatureShape(e.getSingleBaseWidth(),e._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle")}).attr("transform",function(t){return"translate("+e.getXFromSeqPosition(t.start)+","+(C+e._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)))+")"}).attr("fill",function(t){return e._getFeatureColor(t)}).attr("stroke","transparent")}},{key:"_refreshResiduePaths",value:function(t){var e=this;t.attr("d",function(t){return e._featureShape.getFeatureShape(e.getSingleBaseWidth(),e._layoutObj.getFeatureHeight("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)),t.end?t.end-t.start+1:1,"rectangle")}).attr("transform",function(t){return"translate("+e.getXFromSeqPosition(t.start)+","+(C+e._layoutObj.getFeatureYPos("".concat(t.accession,"_").concat(t.k,"_").concat(t.i,"_").concat(t.j)))+")"}).attr("fill",function(t){return e._getFeatureColor(t)})}},{key:"_addHoverEvents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"entry";t.on("mouseover",function(t,r,i){e.dispatchEvent(new CustomEvent("change",{detail:{highlightend:t.end,highlightstart:t.start,type:n},bubbles:!0,cancelable:!0})),e.dispatchEvent(new CustomEvent("entrymouseover",{detail:Object.assign(t,{target:i[r],type:n}),bubbles:!0,cancelable:!0}))}).on("mouseout",function(t,r,i){e.dispatchEvent(new CustomEvent("change",{detail:{highlightend:null,highlightstart:null,type:n},bubbles:!0,cancelable:!0})),e.dispatchEvent(new CustomEvent("entrymouseout",{detail:Object.assign(t,{type:n}),bubbles:!0,cancelable:!0}))})}},{key:"_createFeatures",value:function(){var t=this;if(this._layoutObj.init(this._data,this._contributors),this._data.forEach(function(t,e){return t.k=e}),this.featuresG=this.seq_g.selectAll("g.feature-group").data(this._data).enter().append("g").attr("class","feature-group").attr("id",function(t){return"g_".concat(t.accession)}),this.locations=this.featuresG.selectAll("g.location-group").data(function(t){return t.locations.map(function(e){return Object.assign({},e,{feature:t})})}).enter().append("g").attr("class","location-group"),this.coverLines=this.locations.selectAll("line.cover").data(function(t){return[t.fragments.reduce(function(e,n){return{start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}},{start:1/0,end:-1/0})]}).enter().append("line").attr("class","cover"),this.features=this.locations.selectAll("path.feature").data(function(t){return t.fragments.map(function(e){return Object.assign({},e,{feature:t.feature})})}).enter().append("path").attr("class","feature").on("click",function(e,n,r){t._expanded?t.removeAttribute("expanded"):t.setAttribute("expanded","expanded"),t.dispatchEvent(new CustomEvent("entryclick",{detail:Object.assign(e,{target:r[n]}),bubbles:!0,cancelable:!0}))}),this._addHoverEvents(this.features),this.residues_g=this._createResidueGroup(this.featuresG),this.residues_loc=this._createResiduePaths(this.residues_g),this._addHoverEvents(this.residues_loc,"residue"),this._contributors){this._contributors.forEach(function(t,e){return t.k=e}),this.children_g||(this.children_g=this.svg.append("g").attr("class","children-features")),this.childrenGroup=this.children_g.append("g").attr("class","children-group").attr("visibility",this._expanded?"visible":"hidden"),this.childGroup=this.childrenGroup.selectAll("g.child-group").data(function(e){return t._contributors}).enter().append("g").attr("class","child-group");var e=this.childGroup.selectAll("g.child-location-group").data(function(e){return e.expanded=t._expanded,e.locations.map(function(t){return Object.assign({},t,{feature:e})})}).enter().append("g").attr("class","child-location-group");this.coverLinesChildren=e.selectAll("line.cover").data(function(t){return[t.fragments.reduce(function(e,n){return{start:Math.min(e.start,n.start),end:Math.max(e.end,n.end),feature:t.feature}},{start:1/0,end:-1/0})]}).enter().append("line").attr("class","cover"),this.featureChildren=e.selectAll("path.child-fragment").data(function(t){return t.fragments.map(function(e){return Object.assign({},e,{feature:t.feature})})}).enter().append("path").attr("class","child-fragment").on("click",function(e,n,r){e.feature.expanded=!e.feature.expanded,t.refresh(),t.dispatchEvent(new CustomEvent("entryclick",{detail:Object.assign(e,{target:r[n]}),bubbles:!0,cancelable:!0}))}),this._addHoverEvents(this.featureChildren),this.child_residues_g=this._createResidueGroup(this.childGroup),this.child_residues_loc=this._createResiduePaths(this.child_residues_g),this._addHoverEvents(this.child_residues_loc,"residue")}this.svg.attr("height",this._layoutObj.maxYPos),this._haveCreatedFeatures=!0}},{key:"_refreshFeatures",value:function(t){var e=this;t.attr("d",function(t){return e._featureShape.getFeatureShape(e.getSingleBaseWidth(),e._layoutObj.getFeatureHeight(t.feature),t.end?t.end-t.start+1:1,e._getShape(t.shape?t:t.feature))}).attr("fill",function(t){return e._getFeatureColor(t.feature)}).attr("stroke",function(t){return e._getFeatureColor(t.feature)}).attr("transform",function(t){return"translate("+e.getXFromSeqPosition(t.start)+","+(C+e._layoutObj.getFeatureYPos(t.feature))+")"})}},{key:"_refreshCoverLine",value:function(t){var e=this;t.attr("x1",function(t){return e.getXFromSeqPosition(t.start)}).attr("x2",function(t){return e.getXFromSeqPosition(t.end+1)}).attr("y1",function(t){return C+e._layoutObj.getFeatureYPos(t.feature)+e._layoutObj.getFeatureHeight(t.feature)/2}).attr("y2",function(t){return C+e._layoutObj.getFeatureYPos(t.feature)+e._layoutObj.getFeatureHeight(t.feature)/2}).attr("stroke",function(t){return e._getFeatureColor(t.feature)})}},{key:"refresh",value:function(){this._haveCreatedFeatures&&(this._layoutObj.expanded=this._expanded,this._layoutObj.init(this._data,this._contributors),this._refreshCoverLine(this.coverLines),this._refreshFeatures(this.features),this.residues_g.attr("visibility",this._expanded?"visible":"hidden"),this._refreshResiduePaths(this.residues_loc),this._contributors&&(this.childrenGroup.attr("visibility",this._expanded?"visible":"hidden"),this._refreshCoverLine(this.coverLinesChildren),this._refreshFeatures(this.featureChildren),this.child_residues_g.attr("visibility",function(t){return t.feature.expanded?"visible":"hidden"}),this._refreshResiduePaths(this.child_residues_loc)),this._updateHighlight(),this.svg.attr("height",this._layoutObj.maxYPos),this.highlighted.attr("height",this._layoutObj.maxYPos))}},{key:"data",set:function(t){this._data=this.normalizeLocations(t),this._createTrack()}},{key:"contributors",set:function(t){this._contributors=this.normalizeLocations(t),this._data&&this._createTrack()}},{key:"color",set:function(t){this._color!==t&&(this._color=t,this.refresh())}},{key:"margin",get:function(){return{top:0,right:10,bottom:0,left:10}}}])&&k(n.prototype,r),i&&k(n,i),e}(),R=function(){customElements.define("protvista-interpro-track",T)};window.customElements?R():document.addEventListener("WebComponentsReady",function(){R()});var F=T,D=n(319),M=n(378),V=n(402),H=[{accession:"IPR00001",locations:[{fragments:[{start:1,end:466}]}],color:"#cacaca"}],N=[{accession:"SF00001",locations:[{fragments:[{start:127,end:264},{start:279,end:385},{start:400,end:466}]}],color:"#7acaca"},{accession:"PF00001",locations:[{fragments:[{start:146,end:266}]},{fragments:[{start:346,end:466}]}],color:"#ca7aca"},{accession:"CD0001",locations:[{fragments:[{start:146,end:456}]}],color:"#caca7a"}];function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Q=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),W(this,K(e).apply(this,arguments))}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(e,r["Component"]),n=e,(o=[{key:"componentDidMount",value:function(){document.querySelector("#variation-track").data=M,document.querySelector("#interpro-track").data=H,document.querySelector("#interpro-track").contributors=N,document.querySelector("#sequence-track").data=V}},{key:"render",value:function(){return Object(D.a)("protvista-manager",f),Object(D.a)("protvista-feature-adapter",d.a),Object(D.a)("protvista-track",y.b),Object(D.a)("protvista-navigation",b.a),Object(D.a)("protvista-sequence",g.a),Object(D.a)("protvista-interpro-track",F),Object(D.a)("protvista-variation",v.a),Object(D.a)("data-loader",p.a),i.a.createElement(r.Fragment,null,i.a.createElement("protvista-manager",{attributes:"length displaystart displayend highlightstart highlightend variantfilters",id:"example"},i.a.createElement("protvista-navigation",{length:"770"}),i.a.createElement("protvista-sequence",{length:"770",id:"sequence-track"}),i.a.createElement("protvista-track",{id:"track1",length:"770"},i.a.createElement("protvista-feature-adapter",{id:"adapter1"},i.a.createElement("data-loader",null,i.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"})))),i.a.createElement("protvista-track",{id:"track1",length:"770",layout:"non-overlapping"},i.a.createElement("protvista-feature-adapter",{id:"adapter1"},i.a.createElement("data-loader",null,i.a.createElement("source",{src:"https://www.ebi.ac.uk/proteins/api/features/P05067?categories=PTM"})))),i.a.createElement("protvista-interpro-track",{id:"interpro-track",length:"770",shape:"roundRectangle",expanded:!0}),i.a.createElement("protvista-variation",{id:"variation-track",length:"770"})))}}])&&I(n.prototype,o),a&&I(n,a),e}();e.default=Q}}]);